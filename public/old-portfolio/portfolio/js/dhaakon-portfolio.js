function MotionObject(){this.b=0,this.c,this.t,this.prop=null,this.unit=""}var dat=dat||{};dat.gui=dat.gui||{},dat.utils=dat.utils||{},dat.controllers=dat.controllers||{},dat.dom=dat.dom||{},dat.color=dat.color||{},dat.utils.css=function(){return{load:function(a,b){var b=b||document,c=b.createElement("link");c.type="text/css",c.rel="stylesheet",c.href=a,b.getElementsByTagName("head")[0].appendChild(c)},inject:function(a,b){var b=b||document,c=document.createElement("style");c.type="text/css",c.innerHTML=a,b.getElementsByTagName("head")[0].appendChild(c)}}}(),dat.utils.common=function(){var a=Array.prototype.forEach,b=Array.prototype.slice;return{BREAK:{},extend:function(a){return this.each(b.call(arguments,1),function(b){for(var d in b)this.isUndefined(b[d])||(a[d]=b[d])},this),a},defaults:function(a){return this.each(b.call(arguments,1),function(b){for(var d in b)this.isUndefined(a[d])&&(a[d]=b[d])},this),a},compose:function(){var a=b.call(arguments);return function(){for(var d=b.call(arguments),e=a.length-1;e>=0;e--)d=[a[e].apply(this,d)];return d[0]}},each:function(b,c,d){if(a&&b.forEach===a)b.forEach(c,d);else if(b.length===b.length+0){for(var f=0,g=b.length;f<g;f++)if(f in b&&c.call(d,b[f],f)===this.BREAK)break}else for(f in b)if(c.call(d,b[f],f)===this.BREAK)break},defer:function(a){setTimeout(a,0)},toArray:function(a){return a.toArray?a.toArray():b.call(a)},isUndefined:function(a){return a===void 0},isNull:function(a){return a===null},isNaN:function(a){return a!==a},isArray:Array.isArray||function(a){return a.constructor===Array},isObject:function(a){return a===Object(a)},isNumber:function(a){return a===a+0},isString:function(a){return a===a+""},isBoolean:function(a){return a===!1||a===!0},isFunction:function(a){return Object.prototype.toString.call(a)==="[object Function]"}}}(),dat.controllers.Controller=function(a){var b=function(a,b){this.initialValue=a[b],this.domElement=document.createElement("div"),this.object=a,this.property=b,this.__onFinishChange=this.__onChange=void 0};return a.extend(b.prototype,{onChange:function(a){return this.__onChange=a,this},onFinishChange:function(a){return this.__onFinishChange=a,this},setValue:function(a){return this.object[this.property]=a,this.__onChange&&this.__onChange.call(this,a),this.updateDisplay(),this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}}),b}(dat.utils.common),dat.dom.dom=function(a){function b(b){return b==="0"||a.isUndefined(b)?0:(b=b.match(d),a.isNull(b)?0:parseFloat(b[1]))}var c={};a.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(b,d){a.each(b,function(a){c[a]=d})});var d=/(\d+(\.\d+)?)px/,e={makeSelectable:function(a,b){a!==void 0&&a.style!==void 0&&(a.onselectstart=b?function(){return!1}:function(){},a.style.MozUserSelect=b?"auto":"none",a.style.KhtmlUserSelect=b?"auto":"none",a.unselectable=b?"on":"off")},makeFullscreen:function(b,c,d){a.isUndefined(c)&&(c=!0),a.isUndefined(d)&&(d=!0),b.style.position="absolute",c&&(b.style.left=0,b.style.right=0),d&&(b.style.top=0,b.style.bottom=0)},fakeEvent:function(b,d,e,f){var e=e||{},g=c[d];if(!g)throw Error("Event type "+d+" not supported.");var h=document.createEvent(g);switch(g){case"MouseEvents":h.initMouseEvent(d,e.bubbles||!1,e.cancelable||!0,window,e.clickCount||1,0,0,e.x||e.clientX||0,e.y||e.clientY||0,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":g=h.initKeyboardEvent||h.initKeyEvent,a.defaults(e,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),g(d,e.bubbles||!1,e.cancelable,window,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.keyCode,e.charCode);break;default:h.initEvent(d,e.bubbles||!1,e.cancelable||!0)}a.defaults(h,f),b.dispatchEvent(h)},bind:function(a,b,c,d){return a.addEventListener?a.addEventListener(b,c,d||!1):a.attachEvent&&a.attachEvent("on"+b,c),e},unbind:function(a,b,c,d){return a.removeEventListener?a.removeEventListener(b,c,d||!1):a.detachEvent&&a.detachEvent("on"+b,c),e},addClass:function(a,b){if(a.className===void 0)a.className=b;else if(a.className!==b){var c=a.className.split(/ +/);c.indexOf(b)==-1&&(c.push(b),a.className=c.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return e},removeClass:function(a,b){if(b){if(a.className!==void 0)if(a.className===b)a.removeAttribute("class");else{var c=a.className.split(/ +/),d=c.indexOf(b);d!=-1&&(c.splice(d,1),a.className=c.join(" "))}}else a.className=void 0;return e},hasClass:function(a,b){return RegExp("(?:^|\\s+)"+b+"(?:\\s+|$)").test(a.className)||!1},getWidth:function(a){return a=getComputedStyle(a),b(a["border-left-width"])+b(a["border-right-width"])+b(a["padding-left"])+b(a["padding-right"])+b(a.width)},getHeight:function(a){return a=getComputedStyle(a),b(a["border-top-width"])+b(a["border-bottom-width"])+b(a["padding-top"])+b(a["padding-bottom"])+b(a.height)},getOffset:function(a){var b={left:0,top:0};if(a.offsetParent)do b.left+=a.offsetLeft,b.top+=a.offsetTop;while(a=a.offsetParent);return b},isActive:function(a){return a===document.activeElement&&(a.type||a.href)}};return e}(dat.utils.common),dat.controllers.OptionController=function(a,b,c){var d=function(a,e,f){d.superclass.call(this,a,e);var g=this;this.__select=document.createElement("select");if(c.isArray(f)){var h={};c.each(f,function(a){h[a]=a}),f=h}c.each(f,function(a,b){var c=document.createElement("option");c.innerHTML=b,c.setAttribute("value",a),g.__select.appendChild(c)}),this.updateDisplay(),b.bind(this.__select,"change",function(){g.setValue(this.options[this.selectedIndex].value)}),this.domElement.appendChild(this.__select)};return d.superclass=a,c.extend(d.prototype,a.prototype,{setValue:function(a){return a=d.superclass.prototype.setValue.call(this,a),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),a},updateDisplay:function(){return this.__select.value=this.getValue(),d.superclass.prototype.updateDisplay.call(this)}}),d}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.NumberController=function(a,b){var c=function(a,d,e){c.superclass.call(this,a,d),e=e||{},this.__min=e.min,this.__max=e.max,this.__step=e.step,a=this.__impliedStep=b.isUndefined(this.__step)?this.initialValue==0?1:Math.pow(10,Math.floor(Math.log(this.initialValue)/Math.LN10))/10:this.__step,a=a.toString(),this.__precision=a.indexOf(".")>-1?a.length-a.indexOf(".")-1:0};return c.superclass=a,b.extend(c.prototype,a.prototype,{setValue:function(a){return this.__min!==void 0&&a<this.__min?a=this.__min:this.__max!==void 0&&a>this.__max&&(a=this.__max),this.__step!==void 0&&a%this.__step!=0&&(a=Math.round(a/this.__step)*this.__step),c.superclass.prototype.setValue.call(this,a)},min:function(a){return this.__min=a,this},max:function(a){return this.__max=a,this},step:function(a){return this.__step=a,this}}),c}(dat.controllers.Controller,dat.utils.common),dat.controllers.NumberControllerBox=function(a,b,c){var d=function(a,e,f){function g(){var a=parseFloat(j.__input.value);c.isNaN(a)||j.setValue(a)}function h(a){var b=k-a.clientY;j.setValue(j.getValue()+b*j.__impliedStep),k=a.clientY}function i(){b.unbind(window,"mousemove",h),b.unbind(window,"mouseup",i)}this.__truncationSuspended=!1,d.superclass.call(this,a,e,f);var j=this,k;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),b.bind(this.__input,"change",g),b.bind(this.__input,"blur",function(){g(),j.__onFinishChange&&j.__onFinishChange.call(j,j.getValue())}),b.bind(this.__input,"mousedown",function(a){b.bind(window,"mousemove",h),b.bind(window,"mouseup",i),k=a.clientY}),b.bind(this.__input,"keydown",function(a){a.keyCode===13&&(j.__truncationSuspended=!0,this.blur(),j.__truncationSuspended=!1)}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return d.superclass=a,c.extend(d.prototype,a.prototype,{updateDisplay:function(){var a=this.__input,b;if(this.__truncationSuspended)b=this.getValue();else{b=this.getValue();var c=Math.pow(10,this.__precision);b=Math.round(b*c)/c}return a.value=b,d.superclass.prototype.updateDisplay.call(this)}}),d}(dat.controllers.NumberController,dat.dom.dom,dat.utils.common),dat.controllers.NumberControllerSlider=function(a,b,c,d,e){var f=function(a,c,d,e,g){function h(a){a.preventDefault();var c=b.getOffset(j.__background),d=b.getWidth(j.__background);return j.setValue(j.__min+(j.__max-j.__min)*((a.clientX-c.left)/(c.left+d-c.left))),!1}function i(){b.unbind(window,"mousemove",h),b.unbind(window,"mouseup",i),j.__onFinishChange&&j.__onFinishChange.call(j,j.getValue())}f.superclass.call(this,a,c,{min:d,max:e,step:g});var j=this;this.__background=document.createElement("div"),this.__foreground=document.createElement("div"),b.bind(this.__background,"mousedown",function(a){b.bind(window,"mousemove",h),b.bind(window,"mouseup",i),h(a)}),b.addClass(this.__background,"slider"),b.addClass(this.__foreground,"slider-fg"),this.updateDisplay(),this.__background.appendChild(this.__foreground),this.domElement.appendChild(this.__background)};return f.superclass=a,f.useDefaultStyles=function(){c.inject(e)},d.extend(f.prototype,a.prototype,{updateDisplay:function(){return this.__foreground.style.width=(this.getValue()-this.__min)/(this.__max-this.__min)*100+"%",f.superclass.prototype.updateDisplay.call(this)}}),f}(dat.controllers.NumberController,dat.dom.dom,dat.utils.css,dat.utils.common,".slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}"),dat.controllers.FunctionController=function(a,b,c){var d=function(a,c,e){d.superclass.call(this,a,c);var f=this;this.__button=document.createElement("div"),this.__button.innerHTML=e===void 0?"Fire":e,b.bind(this.__button,"click",function(a){return a.preventDefault(),f.fire(),!1}),b.addClass(this.__button,"button"),this.domElement.appendChild(this.__button)};return d.superclass=a,c.extend(d.prototype,a.prototype,{fire:function(){this.__onChange&&this.__onChange.call(this),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.getValue().call(this.object)}}),d}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.BooleanController=function(a,b,c){var d=function(a,c){d.superclass.call(this,a,c);var e=this;this.__prev=this.getValue(),this.__checkbox=document.createElement("input"),this.__checkbox.setAttribute("type","checkbox"),b.bind(this.__checkbox,"change",function(){e.setValue(!e.__prev)},!1),this.domElement.appendChild(this.__checkbox),this.updateDisplay()};return d.superclass=a,c.extend(d.prototype,a.prototype,{setValue:function(a){return a=d.superclass.prototype.setValue.call(this,a),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),a},updateDisplay:function(){return this.getValue()===!0?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,d.superclass.prototype.updateDisplay.call(this)}}),d}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.color.toString=function(a){return function(b){if(b.a==1||a.isUndefined(b.a)){for(b=b.hex.toString(16);b.length<6;)b="0"+b;return"#"+b}return"rgba("+Math.round(b.r)+","+Math.round(b.g)+","+Math.round(b.b)+","+b.a+")"}}(dat.utils.common),dat.color.interpret=function(a,b){var c,d,e=[{litmus:b.isString,conversions:{THREE_CHAR_HEX:{read:function(a){return a=a.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i),a===null?!1:{space:"HEX",hex:parseInt("0x"+a[1].toString()+a[1].toString()+a[2].toString()+a[2].toString()+a[3].toString()+a[3].toString())}},write:a},SIX_CHAR_HEX:{read:function(a){return a=a.match(/^#([A-F0-9]{6})$/i),a===null?!1:{space:"HEX",hex:parseInt("0x"+a[1].toString())}},write:a},CSS_RGB:{read:function(a){return a=a.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/),a===null?!1:{space:"RGB",r:parseFloat(a[1]),g:parseFloat(a[2]),b:parseFloat(a[3])}},write:a},CSS_RGBA:{read:function(a){return a=a.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/),a===null?!1:{space:"RGB",r:parseFloat(a[1]),g:parseFloat(a[2]),b:parseFloat(a[3]),a:parseFloat(a[4])}},write:a}}},{litmus:b.isNumber,conversions:{HEX:{read:function(a){return{space:"HEX",hex:a,conversionName:"HEX"}},write:function(a){return a.hex}}}},{litmus:b.isArray,conversions:{RGB_ARRAY:{read:function(a){return a.length!=3?!1:{space:"RGB",r:a[0],g:a[1],b:a[2]}},write:function(a){return[a.r,a.g,a.b]}},RGBA_ARRAY:{read:function(a){return a.length!=4?!1:{space:"RGB",r:a[0],g:a[1],b:a[2],a:a[3]}},write:function(a){return[a.r,a.g,a.b,a.a]}}}},{litmus:b.isObject,conversions:{RGBA_OBJ:{read:function(a){return b.isNumber(a.r)&&b.isNumber(a.g)&&b.isNumber(a.b)&&b.isNumber(a.a)?{space:"RGB",r:a.r,g:a.g,b:a.b,a:a.a}:!1},write:function(a){return{r:a.r,g:a.g,b:a.b,a:a.a}}},RGB_OBJ:{read:function(a){return b.isNumber(a.r)&&b.isNumber(a.g)&&b.isNumber(a.b)?{space:"RGB",r:a.r,g:a.g,b:a.b}:!1},write:function(a){return{r:a.r,g:a.g,b:a.b}}},HSVA_OBJ:{read:function(a){return b.isNumber(a.h)&&b.isNumber(a.s)&&b.isNumber(a.v)&&b.isNumber(a.a)?{space:"HSV",h:a.h,s:a.s,v:a.v,a:a.a}:!1},write:function(a){return{h:a.h,s:a.s,v:a.v,a:a.a}}},HSV_OBJ:{read:function(a){return b.isNumber(a.h)&&b.isNumber(a.s)&&b.isNumber(a.v)?{space:"HSV",h:a.h,s:a.s,v:a.v}:!1},write:function(a){return{h:a.h,s:a.s,v:a.v}}}}}];return function(){d=!1;var a=arguments.length>1?b.toArray(arguments):arguments[0];return b.each(e,function(e){if(e.litmus(a))return b.each(e.conversions,function(e,f){c=e.read(a);if(d===!1&&c!==!1)return d=c,c.conversionName=f,c.conversion=e,b.BREAK}),b.BREAK}),d}}(dat.color.toString,dat.utils.common),dat.GUI=dat.gui.GUI=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(a,b,c,f){if(b[c]===void 0)throw Error("Object "+b+' has no property "'+c+'"');f.color?b=new k(b,c):(b=[b,c].concat(f.factoryArgs),b=d.apply(a,b)),f.before instanceof e&&(f.before=f.before.__li),s(a,b),n.addClass(b.domElement,"c"),c=document.createElement("span"),n.addClass(c,"property-name"),c.innerHTML=b.property;var g=document.createElement("div");return g.appendChild(c),g.appendChild(b.domElement),f=q(a,g,f.before),n.addClass(f,I.CLASS_CONTROLLER_ROW),n.addClass(f,typeof b.getValue()),r(a,f,b),a.__controllers.push(b),b}function q(a,b,c){var d=document.createElement("li");return b&&d.appendChild(b),c?a.__ul.insertBefore(d,params.before):a.__ul.appendChild(d),a.onResize(),d}function r(a,b,c){c.__li=b,c.__gui=a,o.extend(c,{options:function(b){if(arguments.length>1)return c.remove(),p(a,c.object,c.property,{before:c.__li.nextElementSibling,factoryArgs:[o.toArray(arguments)]});if(o.isArray(b)||o.isObject(b))return c.remove(),p(a,c.object,c.property,{before:c.__li.nextElementSibling,factoryArgs:[b]})},name:function(a){return c.__li.firstElementChild.firstElementChild.innerHTML=a,c},listen:function(){return c.__gui.listen(c),c},remove:function(){return c.__gui.remove(c),c}});if(c instanceof i){var d=new h(c.object,c.property,{min:c.__min,max:c.__max,step:c.__step});o.each(["updateDisplay","onChange","onFinishChange"],function(a){var b=c[a],e=d[a];c[a]=d[a]=function(){var a=Array.prototype.slice.call(arguments);return b.apply(c,a),e.apply(d,a)}}),n.addClass(b,"has-slider"),c.domElement.insertBefore(d.domElement,c.domElement.firstElementChild)}else if(c instanceof h){var e=function(b){return o.isNumber(c.__min)&&o.isNumber(c.__max)?(c.remove(),p(a,c.object,c.property,{before:c.__li.nextElementSibling,factoryArgs:[c.__min,c.__max,c.__step]})):b};c.min=o.compose(e,c.min),c.max=o.compose(e,c.max)}else c instanceof f?(n.bind(b,"click",function(){n.fakeEvent(c.__checkbox,"click")}),n.bind(c.__checkbox,"click",function(a){a.stopPropagation()})):c instanceof g?(n.bind(b,"click",function(){n.fakeEvent(c.__button,"click")}),n.bind(b,"mouseover",function(){n.addClass(c.__button,"hover")}),n.bind(b,"mouseout",function(){n.removeClass(c.__button,"hover")})):c instanceof k&&(n.addClass(b,"color"),c.updateDisplay=o.compose(function(a){return b.style.borderLeftColor=c.__color.toString(),a},c.updateDisplay),c.updateDisplay());c.setValue=o.compose(function(b){return a.getRoot().__preset_select&&c.isModified()&&y(a.getRoot(),!0),b},c.setValue)}function s(a,b){var c=a.getRoot(),d=c.__rememberedObjects.indexOf(b.object);if(d!=-1){var e=c.__rememberedObjectIndecesToControllers[d];e===void 0&&(e={},c.__rememberedObjectIndecesToControllers[d]=e),e[b.property]=b;if(c.load&&c.load.remembered){c=c.load.remembered;if(c[a.preset])c=c[a.preset];else if(c[A])c=c[A];else return;c[d]&&c[d][b.property]!==void 0&&(d=c[d][b.property],b.initialValue=d,b.setValue(d))}}}function t(a){var b=a.__save_row=document.createElement("li");n.addClass(a.domElement,"has-save"),a.__ul.insertBefore(b,a.__ul.firstChild),n.addClass(b,"save-row");var c=document.createElement("span");c.innerHTML="&nbsp;",n.addClass(c,"button gears");var d=document.createElement("span");d.innerHTML="Save",n.addClass(d,"button"),n.addClass(d,"save");var e=document.createElement("span");e.innerHTML="New",n.addClass(e,"button"),n.addClass(e,"save-as");var f=document.createElement("span");f.innerHTML="Revert",n.addClass(f,"button"),n.addClass(f,"revert");var g=a.__preset_select=document.createElement("select");a.load&&a.load.remembered?o.each(a.load.remembered,function(b,c){x(a,c,c==a.preset)}):x(a,A,!1),n.bind(g,"change",function(){for(var b=0;b<a.__preset_select.length;b++)a.__preset_select[b].innerHTML=a.__preset_select[b].value;a.preset=this.value}),b.appendChild(g),b.appendChild(c),b.appendChild(d),b.appendChild(e),b.appendChild(f);if(B){var b=document.getElementById("dg-save-locally"),h=document.getElementById("dg-local-explain");b.style.display="block",b=document.getElementById("dg-local-storage"),localStorage.getItem(document.location.href+".isLocal")==="true"&&b.setAttribute("checked","checked");var i=function(){h.style.display=a.useLocalStorage?"block":"none"};i(),n.bind(b,"change",function(){a.useLocalStorage=!a.useLocalStorage,i()})}var j=document.getElementById("dg-new-constructor");n.bind(j,"keydown",function(a){a.metaKey&&(a.which===67||a.keyCode==67)&&D.hide()}),n.bind(c,"click",function(){j.innerHTML=JSON.stringify(a.getSaveObject(),void 0,2),D.show(),j.focus(),j.select()}),n.bind(d,"click",function(){a.save()}),n.bind(e,"click",function(){var b=prompt("Enter a new preset name.");b&&a.saveAs(b)}),n.bind(f,"click",function(){a.revert()})}function u(a){function b(b){return b.preventDefault(),e=b.clientX,n.addClass(a.__closeButton,I.CLASS_DRAG),n.bind(window,"mousemove",c),n.bind(window,"mouseup",d),!1}function c(b){return b.preventDefault(),a.width+=e-b.clientX,a.onResize(),e=b.clientX,!1}function d(){n.removeClass(a.__closeButton,I.CLASS_DRAG),n.unbind(window,"mousemove",c),n.unbind(window,"mouseup",d)}a.__resize_handle=document.createElement("div"),o.extend(a.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});var e;n.bind(a.__resize_handle,"mousedown",b),n.bind(a.__closeButton,"mousedown",b),a.domElement.insertBefore(a.__resize_handle,a.domElement.firstElementChild)}function v(a,b){a.domElement.style.width=b+"px",a.__save_row&&a.autoPlace&&(a.__save_row.style.width=b+"px"),a.__closeButton&&(a.__closeButton.style.width=b+"px")}function w(a,b){var c={};return o.each(a.__rememberedObjects,function(d,e){var f={};o.each(a.__rememberedObjectIndecesToControllers[e],function(a,c){f[c]=b?a.initialValue:a.getValue()}),c[e]=f}),c}function x(a,b,c){var d=document.createElement("option");d.innerHTML=b,d.value=b,a.__preset_select.appendChild(d),c&&(a.__preset_select.selectedIndex=a.__preset_select.length-1)}function y(a,b){var c=a.__preset_select[a.__preset_select.selectedIndex];c.innerHTML=b?c.value+"*":c.value}function z(a){a.length!=0&&l(function(){z(a)}),o.each(a,function(a){a.updateDisplay()})}a.inject(c);var A="Default",B;try{B="localStorage"in window&&window.localStorage!==null}catch(C){B=!1}var D,E=!0,F,G=!1,H=[],I=function(a){function b(){localStorage.setItem(document.location.href+".gui",JSON.stringify(d.getSaveObject()))}function c(){var a=d.getRoot();a.width+=1,o.defer(function(){a.width-=1})}var d=this;this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),n.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],a=a||{},a=o.defaults(a,{autoPlace:!0,width:I.DEFAULT_WIDTH}),a=o.defaults(a,{resizable:a.autoPlace,hideable:a.autoPlace}),o.isUndefined(a.load)?a.load={preset:A}:a.preset&&(a.load.preset=a.preset),o.isUndefined(a.parent)&&a.hideable&&H.push(this),a.resizable=o.isUndefined(a.parent)&&a.resizable,a.autoPlace&&o.isUndefined(a.scrollable)&&(a.scrollable=!0);var e=B&&localStorage.getItem(document.location.href+".isLocal")==="true";Object.defineProperties(this,{parent:{get:function(){return a.parent}},scrollable:{get:function(){return a.scrollable}},autoPlace:{get:function(){return a.autoPlace}},preset:{get:function(){return d.parent?d.getRoot().preset:a.load.preset},set:function(b){d.parent?d.getRoot().preset=b:a.load.preset=b;for(b=0;b<this.__preset_select.length;b++)this.__preset_select[b].value==this.preset&&(this.__preset_select.selectedIndex=b);d.revert()}},width:{get:function(){return a.width},set:function(b){a.width=b,v(d,b)}},name:{get:function(){return a.name},set:function(b){a.name=b,g&&(g.innerHTML=a.name)}},closed:{get:function(){return a.closed},set:function(b){a.closed=b,a.closed?n.addClass(d.__ul,I.CLASS_CLOSED):n.removeClass(d.__ul,I.CLASS_CLOSED),this.onResize(),d.__closeButton&&(d.__closeButton.innerHTML=b?I.TEXT_OPEN:I.TEXT_CLOSED)}},load:{get:function(){return a.load}},useLocalStorage:{get:function(){return e},set:function(a){B&&((e=a)?n.bind(window,"unload",b):n.unbind(window,"unload",b),localStorage.setItem(document.location.href+".isLocal",a))}}});if(o.isUndefined(a.parent)){a.closed=!1,n.addClass(this.domElement,I.CLASS_MAIN),n.makeSelectable(this.domElement,!1);if(B&&e){d.useLocalStorage=!0;var f=localStorage.getItem(document.location.href+".gui");f&&(a.load=JSON.parse(f))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=I.TEXT_CLOSED,n.addClass(this.__closeButton,I.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),n.bind(this.__closeButton,"click",function(){d.closed=!d.closed})}else{a.closed===void 0&&(a.closed=!0);var g=document.createTextNode(a.name);n.addClass(g,"controller-name"),f=q(d,g),n.addClass(this.__ul,I.CLASS_CLOSED),n.addClass(f,"title"),n.bind(f,"click",function(a){return a.preventDefault(),d.closed=!d.closed,!1}),a.closed||(this.closed=!1)}a.autoPlace&&(o.isUndefined(a.parent)&&(E&&(F=document.createElement("div"),n.addClass(F,"dg"),n.addClass(F,I.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(F),E=!1),F.appendChild(this.domElement),n.addClass(this.domElement,I.CLASS_AUTO_PLACE)),this.parent||v(d,a.width)),n.bind(window,"resize",function(){d.onResize()}),n.bind(this.__ul,"webkitTransitionEnd",function(){d.onResize()}),n.bind(this.__ul,"transitionend",function(){d.onResize()}),n.bind(this.__ul,"oTransitionEnd",function(){d.onResize()}),this.onResize(),a.resizable&&u(this),d.getRoot(),a.parent||c()};return I.toggleHide=function(){G=!G,o.each(H,function(a){a.domElement.style.zIndex=G?-999:999,a.domElement.style.opacity=G?0:1})},I.CLASS_AUTO_PLACE="a",I.CLASS_AUTO_PLACE_CONTAINER="ac",I.CLASS_MAIN="main",I.CLASS_CONTROLLER_ROW="cr",I.CLASS_TOO_TALL="taller-than-window",I.CLASS_CLOSED="closed",I.CLASS_CLOSE_BUTTON="close-button",I.CLASS_DRAG="drag",I.DEFAULT_WIDTH=245,I.TEXT_CLOSED="Close Controls",I.TEXT_OPEN="Open Controls",n.bind(window,"keydown",function(a){document.activeElement.type!=="text"&&(a.which===72||a.keyCode==72)&&I.toggleHide()},!1),o.extend(I.prototype,{add:function(a,b){return p(this,a,b,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(a,b){return p(this,a,b,{color:!0})},remove:function(a){this.__ul.removeChild(a.__li),this.__controllers.slice(this.__controllers.indexOf(a),1);var b=this;o.defer(function(){b.onResize()})},destroy:function(){this.autoPlace&&F.removeChild(this.domElement)},addFolder:function(a){if(this.__folders[a]!==void 0)throw Error('You already have a folder in this GUI by the name "'+a+'"');var b={name:a,parent:this};return b.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[a]&&(b.closed=this.load.folders[a].closed,b.load=this.load.folders[a]),b=new I(b),this.__folders[a]=b,a=q(this,b.domElement),n.addClass(a,"folder"),b},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var a=this.getRoot();if(a.scrollable){var b=n.getOffset(a.__ul).top,c=0;o.each(a.__ul.childNodes,function(b){a.autoPlace&&b===a.__save_row||(c+=n.getHeight(b))}),window.innerHeight-b-20<c?(n.addClass(a.domElement,I.CLASS_TOO_TALL),a.__ul.style.height=window.innerHeight-b-20+"px"):(n.removeClass(a.domElement,I.CLASS_TOO_TALL),a.__ul.style.height="auto")}a.__resize_handle&&o.defer(function(){a.__resize_handle.style.height=a.__ul.offsetHeight+"px"}),a.__closeButton&&(a.__closeButton.style.width=a.width+"px")},remember:function(){o.isUndefined(D)&&(D=new m,D.domElement.innerHTML=b);if(this.parent)throw Error("You can only call remember on a top level GUI.");var a=this;o.each(Array.prototype.slice.call(arguments),function(b){a.__rememberedObjects.length==0&&t(a),a.__rememberedObjects.indexOf(b)==-1&&a.__rememberedObjects.push(b)}),this.autoPlace&&v(this,this.width)},getRoot:function(){for(var a=this;a.parent;)a=a.parent;return a},getSaveObject:function(){var a=this.load;return a.closed=this.closed,this.__rememberedObjects.length>0&&(a.preset=this.preset,a.remembered||(a.remembered={}),a.remembered[this.preset]=w(this)),a.folders={},o.each(this.__folders,function(b,c){a.folders[c]=b.getSaveObject()}),a},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=w(this),y(this,!1)},saveAs:function(a){this.load.remembered||(this.load.remembered={},this.load.remembered[A]=w(this,!0)),this.load.remembered[a]=w(this),this.preset=a,x(this,a,!0)},revert:function(a){o.each(this.__controllers,function(b){this.getRoot().load.remembered?s(a||this.getRoot(),b):b.setValue(b.initialValue)},this),o.each(this.__folders,function(a){a.revert(a)}),a||y(this.getRoot(),!1)},listen:function(a){var b=this.__listening.length==0;this.__listening.push(a),b&&z(this.__listening)}}),I}(dat.utils.css,'<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>',".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save ul{margin-top:27px}.dg.a.has-save ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height 0.1s ease-out;-o-transition:height 0.1s ease-out;-moz-transition:height 0.1s ease-out;transition:height 0.1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li > *{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n",dat.controllers.factory=function(a,b,c,d,e,f,g){return function(h,i,j,k){var l=h[i];if(g.isArray(j)||g.isObject(j))return new a(h,i,j);if(g.isNumber(l))return g.isNumber(j)&&g.isNumber(k)?new c(h,i,j,k):new b(h,i,{min:j,max:k});if(g.isString(l))return new d(h,i);if(g.isFunction(l))return new e(h,i,"");if(g.isBoolean(l))return new f(h,i)}}(dat.controllers.OptionController,dat.controllers.NumberControllerBox,dat.controllers.NumberControllerSlider,dat.controllers.StringController=function(a,b,c){var d=function(a,c){function e(){f.setValue(f.__input.value)}d.superclass.call(this,a,c);var f=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),b.bind(this.__input,"keyup",e),b.bind(this.__input,"change",e),b.bind(this.__input,"blur",function(){f.__onFinishChange&&f.__onFinishChange.call(f,f.getValue())}),b.bind(this.__input,"keydown",function(a){a.keyCode===13&&this.blur()}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return d.superclass=a,c.extend(d.prototype,a.prototype,{updateDisplay:function(){return b.isActive(this.__input)||(this.__input.value=this.getValue()),d.superclass.prototype.updateDisplay.call(this)}}),d}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.FunctionController,dat.controllers.BooleanController,dat.utils.common),dat.controllers.Controller,dat.controllers.BooleanController,dat.controllers.FunctionController,dat.controllers.NumberControllerBox,dat.controllers.NumberControllerSlider,dat.controllers.OptionController,dat.controllers.ColorController=function(a,b,c,d,e){function f(a,b,c,d){a.style.background="",e.each(i,function(e){a.style.cssText+="background: "+e+"linear-gradient("+b+", "+c+" 0%, "+d+" 100%); "})}function g(a){a.style.background="",a.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",a.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",a.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",a.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",a.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var h=function(a,i){function j(a){o(a),b.bind(window,"mousemove",o),b.bind(window,"mouseup",k)}function k(){b.unbind(window,"mousemove",o),b.unbind(window,"mouseup",k)}function l(){var a=d(this.value);a!==!1?(q.__color.__state=a,q.setValue(q.__color.toOriginal())):this.value=q.__color.toString()}function m(){b.unbind(window,"mousemove",p),b.unbind(window,"mouseup",m)}function o(a){a.preventDefault();var c=b.getWidth(q.__saturation_field),d=b.getOffset(q.__saturation_field),e=(a.clientX-d.left+document.body.scrollLeft)/c,a=1-(a.clientY-d.top+document.body.scrollTop)/c;return a>1?a=1:a<0&&(a=0),e>1?e=1:e<0&&(e=0),q.__color.v=a,q.__color.s=e,q.setValue(q.__color.toOriginal()),!1}function p(a){a.preventDefault();var c=b.getHeight(q.__hue_field),d=b.getOffset(q.__hue_field),a=1-(a.clientY-d.top+document.body.scrollTop)/c;return a>1?a=1:a<0&&(a=0),q.__color.h=a*360,q.setValue(q.__color.toOriginal()),!1}h.superclass.call(this,a,i),this.__color=new c(this.getValue()),this.__temp=new c(0);var q=this;this.domElement=document.createElement("div"),b.makeSelectable(this.domElement,!1),this.__selector=document.createElement("div"),this.__selector.className="selector",this.__saturation_field=document.createElement("div"),this.__saturation_field.className="saturation-field",this.__field_knob=document.createElement("div"),this.__field_knob.className="field-knob",this.__field_knob_border="2px solid ",this.__hue_knob=document.createElement("div"),this.__hue_knob.className="hue-knob",this.__hue_field=document.createElement("div"),this.__hue_field.className="hue-field",this.__input=document.createElement("input"),this.__input.type="text",this.__input_textShadow="0 1px 1px ",b.bind(this.__input,"keydown",function(a){a.keyCode===13&&l.call(this)}),b.bind(this.__input,"blur",l),b.bind(this.__selector,"mousedown",function(){b.addClass(this,"drag").bind(window,"mouseup",function(){b.removeClass(q.__selector,"drag")})});var r=document.createElement("div");e.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),e.extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(this.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),e.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),e.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),e.extend(r.style,{width:"100%",height:"100%",background:"none"}),f(r,"top","rgba(0,0,0,0)","#000"),e.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"}),g(this.__hue_field),e.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"}),b.bind(this.__saturation_field,"mousedown",j),b.bind(this.__field_knob,"mousedown",j),b.bind(this.__hue_field,"mousedown",function(a){p(a),b.bind(window,"mousemove",p),b.bind(window,"mouseup",m)}),this.__saturation_field.appendChild(r),this.__selector.appendChild(this.__field_knob),this.__selector.appendChild(this.__saturation_field),this.__selector.appendChild(this.__hue_field),this.__hue_field.appendChild(this.__hue_knob),this.domElement.appendChild(this.__input),this.domElement.appendChild(this.__selector),this.updateDisplay()};h.superclass=a,e.extend(h.prototype,a.prototype,{updateDisplay:function(){var a=d(this.getValue());if(a!==!1){var b=!1;e.each(c.COMPONENTS,function(c){if(!e.isUndefined(a[c])&&!e.isUndefined(this.__color.__state[c])&&a[c]!==this.__color.__state[c])return b=!0,{}},this),b&&e.extend(this.__color.__state,a)}e.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var g=this.__color.v<.5||this.__color.s>.5?255:0,h=255-g;e.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+g+","+g+","+g+")"}),this.__hue_knob.style.marginTop=(1-this.__color.h/360)*100+"px",this.__temp.s=1,this.__temp.v=1,f(this.__saturation_field,"left","#fff",this.__temp.toString()),e.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+g+","+g+","+g+")",textShadow:this.__input_textShadow+"rgba("+h+","+h+","+h+",.7)"})}});var i=["-moz-","-o-","-webkit-","-ms-",""];return h}(dat.controllers.Controller,dat.dom.dom,dat.color.Color=function(a,b,c,d){function e(a,b,c){Object.defineProperty(a,b,{get:function(){return this.__state.space==="RGB"?this.__state[b]:(g(this,b,c),this.__state[b])},set:function(a){this.__state.space!=="RGB"&&(g(this,b,c),this.__state.space="RGB"),this.__state[b]=a}})}function f(a,b){Object.defineProperty(a,b,{get:function(){return this.__state.space==="HSV"?this.__state[b]:(h(this),this.__state[b])},set:function(a){this.__state.space!=="HSV"&&(h(this),this.__state.space="HSV"),this.__state[b]=a}})}function g(a,c,e){if(a.__state.space==="HEX")a.__state[c]=b.component_from_hex(a.__state.hex,e);else if(a.__state.space==="HSV")d.extend(a.__state,b.hsv_to_rgb(a.__state.h,a.__state.s,a.__state.v));else throw"Corrupted color state"}function h(a){var c=b.rgb_to_hsv(a.r,a.g,a.b);d.extend(a.__state,{s:c.s,v:c.v}),d.isNaN(c.h)?d.isUndefined(a.__state.h)&&(a.__state.h=0):a.__state.h=c.h}var i=function(){this.__state=a.apply(this,arguments);if(this.__state===!1)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};return i.COMPONENTS="r,g,b,h,s,v,hex,a".split(","),d.extend(i.prototype,{toString:function(){return c(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),e(i.prototype,"r",2),e(i.prototype,"g",1),e(i.prototype,"b",0),f(i.prototype,"h"),f(i.prototype,"s"),f(i.prototype,"v"),Object.defineProperty(i.prototype,"a",{get:function(){return this.__state.a},set:function(a){this.__state.a=a}}),Object.defineProperty(i.prototype,"hex",{get:function(){return!this.__state.space!=="HEX"&&(this.__state.hex=b.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(a){this.__state.space="HEX",this.__state.hex=a}}),i}(dat.color.interpret,dat.color.math=function(){var a;return{hsv_to_rgb:function(a,b,c){var d=a/60-Math.floor(a/60),e=c*(1-b),f=c*(1-d*b),b=c*(1-(1-d)*b),a=[[c,b,e],[f,c,e],[e,c,b],[e,f,c],[b,e,c],[c,e,f]][Math.floor(a/60)%6];return{r:a[0]*255,g:a[1]*255,b:a[2]*255}},rgb_to_hsv:function(a,b,c){var d=Math.min(a,b,c),e=Math.max(a,b,c),d=e-d;return e==0?{h:NaN,s:0,v:0}:(a=a==e?(b-c)/d:b==e?2+(c-a)/d:4+(a-b)/d,a/=6,a<0&&(a+=1),{h:a*360,s:d/e,v:e/255})},rgb_to_hex:function(a,b,c){return a=this.hex_with_component(0,2,a),a=this.hex_with_component(a,1,b),a=this.hex_with_component(a,0,c)},component_from_hex:function(a,b){return a>>b*8&255},hex_with_component:function(b,c,d){return d<<(a=c*8)|b&~(255<<a)}}}(),dat.color.toString,dat.utils.common),dat.color.interpret,dat.utils.common),dat.utils.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}(),dat.dom.CenteredDiv=function(a,b){var c=function(){this.backgroundElement=document.createElement("div"),b.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear"}),a.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),b.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var c=this;a.bind(this.backgroundElement,"click",function(){c.hide()})};return c.prototype.show=function(){var a=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),b.defer(function(){a.backgroundElement.style.opacity=1,a.domElement.style.opacity=1,a.domElement.style.webkitTransform="scale(1)"})},c.prototype.hide=function(){var b=this,c=function(){b.domElement.style.display="none",b.backgroundElement.style.display="none",a.unbind(b.domElement,"webkitTransitionEnd",c),a.unbind(b.domElement,"transitionend",c),a.unbind(b.domElement,"oTransitionEnd",c)};a.bind(this.domElement,"webkitTransitionEnd",c),a.bind(this.domElement,"transitionend",c),a.bind(this.domElement,"oTransitionEnd",c),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},c.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-a.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-a.getHeight(this.domElement)/2+"px"},c}(dat.dom.dom,dat.utils.common),dat.dom.dom,dat.utils.common);var Attraction,Behaviour,Collision,ConstantForce,EdgeBounce,EdgeWrap,Euler,ImprovedEuler,Integrator,Particle,Physics,Random,Spring,Vector,Verlet,Wander,namespace,__hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};namespace=function(a){var b,c,d,e,f,g,h;c=self,f=a.split("."),h=[];for(d=0,e=f.length;d<e;d++)b=f[d],h.push(c=(g=c[b])!=null?g:c[b]={});return h},function(){var a,b,c,d,e;a=0,c=["ms","moz","webkit","o"];for(d=0,e=c.length;d<e;d++){b=c[d];if(!window.requestAnimationFrame)window.requestAnimationFrame=window[b+"RequestAnimationFrame"],window.cancelRequestAnimationFrame=window[b+"CancelRequestAnimationFrame"];else continue}window.requestAnimationFrame||(window.requestAnimationFrame=function(b,c){var d,e,f;return e=(new Date).getTime(),d=Math.max(0,16-(e-f)),setTimeout(function(){return b(a+d)},d),f=e+d});if(!window.cancelAnimationFrame)return window.cancelAnimationFrame=function(a){return clearTimeout(a)}}(),Random=function(a,b){return b==null&&(b=a,a=0),a+Math.random()*(b-a)},Random.int=function(a,b){return b==null&&(b=a,a=0),Math.floor(a+Math.random()*(b-a))},Random.sign=function(a){return a==null&&(a=.5),Math.random()<a?1:-1},Random.bool=function(a){return a==null&&(a=.5),Math.random()<a},Random.item=function(a){return a[Math.floor(Math.random()*a.length)]},Vector=function(){function a(a,b){this.x=a!=null?a:0,this.y=b!=null?b:0}return a.add=function(b,c){return new a(b.x+c.x,b.y+c.y)},a.sub=function(b,c){return new a(b.x-c.x,b.y-c.y)},a.project=function(a,b){return a.clone().scale(a.dot(b)/a.magSq())},a.prototype.set=function(a,b){return this.x=a,this.y=b,this},a.prototype.add=function(a){return this.x+=a.x,this.y+=a.y,this},a.prototype.sub=function(a){return this.x-=a.x,this.y-=a.y,this},a.prototype.scale=function(a){return this.x*=a,this.y*=a,this},a.prototype.dot=function(a){return this.x*a.x+this.y*a.y},a.prototype.cross=function(a){return this.x*a.y-this.y*a.x},a.prototype.mag=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},a.prototype.magSq=function(){return this.x*this.x+this.y*this.y},a.prototype.dist=function(a){var b,c;return b=a.x-this.x,c=a.y-this.y,Math.sqrt(b*b+c*c)},a.prototype.distSq=function(a){var b,c;return b=a.x-this.x,c=a.y-this.y,b*b+c*c},a.prototype.norm=function(){var a;return a=Math.sqrt(this.x*this.x+this.y*this.y),this.x/=a,this.y/=a,this},a.prototype.limit=function(a){var b,c;c=this.x*this.x+this.y*this.y;if(c>a*a)return b=Math.sqrt(c),this.x/=b,this.y/=b,this.x*=a,this.y*=a,this},a.prototype.copy=function(a){return this.x=a.x,this.y=a.y,this},a.prototype.clone=function(){return new a(this.x,this.y)},a.prototype.clear=function(){return this.x=0,this.y=0,this},a}(),Particle=function(){function a(b){this.mass=b!=null?b:1,this.id="p"+a.GUID++,this.setMass(this.mass),this.setRadius(1),this.fixed=!1,this.behaviours=[],this.pos=new Vector,this.vel=new Vector,this.acc=new Vector,this.old={pos:new Vector,vel:new Vector,acc:new Vector}}return a.GUID=0,a.prototype.moveTo=function(a){return this.pos.copy(a),this.old.pos.copy(a)},a.prototype.setMass=function(a){return this.mass=a!=null?a:1,this.massInv=1/this.mass},a.prototype.setRadius=function(a){return this.radius=a!=null?a:1,this.radiusSq=this.radius*this.radius},a.prototype.update=function(a,b){var c,d,e,f,g;if(!this.fixed){f=this.behaviours,g=[];for(d=0,e=f.length;d<e;d++)c=f[d],g.push(c.apply(this,a,b));return g}},a}(),Spring=function(){function a(a,b,c,d){this.p1=a,this.p2=b,this.restLength=c!=null?c:100,this.stiffness=d!=null?d:1,this._delta=new Vector}return a.prototype.apply=function(){var a,b;this._delta.copy(this.p2.pos).sub(this.p1.pos),a=this._delta.mag()+1e-6,b=(a-this.restLength)/(a*(this.p1.massInv+this.p2.massInv))*this.stiffness,this.p1.fixed||this.p1.pos.add(this._delta.clone().scale(b*this.p1.massInv));if(!this.p2.fixed)return this.p2.pos.add(this._delta.scale(-b*this.p2.massInv))},a}(),Physics=function(){function a(a){this.integrator=a!=null?a:new Euler,this.timestep=1/60,this.viscosity=.005,this.behaviours=[],this._time=0,this._step=0,this._clock=null,this._buffer=0,this._maxSteps=4,this.particles=[],this.springs=[]}return a.prototype.integrate=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;c=1-this.viscosity,m=this.particles;for(d=g=0,j=m.length;g<j;d=++g){e=m[d],n=this.behaviours;for(h=0,k=n.length;h<k;h++)b=n[h],b.apply(e,a,d);e.update(a,d)}this.integrator.integrate(this.particles,a,c),o=this.springs,p=[];for(i=0,l=o.length;i<l;i++)f=o[i],p.push(f.apply());return p},a.prototype.step=function(){var a,b,c,d;(d=this._clock)==null&&(this._clock=(new Date).getTime()),c=(new Date).getTime(),a=c-this._clock;if(a<=0)return;a*=.001,this._clock=c,this._buffer+=a,b=0;while(this._buffer>=this.timestep&&++b<this._maxSteps)this.integrate(this.timestep),this._buffer-=this.timestep,this._time+=this.timestep;return this._step=(new Date).getTime()-c},a.prototype.destroy=function(){return this.integrator=null,this.particles=null,this.springs=null},a}(),Integrator=function(){function a(){}return a.prototype.integrate=function(a,b){},a}(),Euler=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.integrate=function(a,b,c){var d,e,f,g,h;e=new Vector,h=[];for(f=0,g=a.length;f<g;f++){d=a[f];if(!d.fixed)d.old.pos.copy(d.pos),d.acc.scale(d.massInv),e.copy(d.vel),d.vel.add(d.acc.scale(b)),d.pos.add(e.scale(b)),c&&d.vel.scale(c),h.push(d.acc.clear());else continue}return h},b}(Integrator),ImprovedEuler=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.integrate=function(a,b,c){var d,e,f,g,h,i,j;d=new Vector,g=new Vector,e=b*b,j=[];for(h=0,i=a.length;h<i;h++){f=a[h];if(!f.fixed)f.old.pos.copy(f.pos),f.acc.scale(f.massInv),g.copy(f.vel),d.copy(f.acc),f.pos.add(g.scale(b).add(d.scale(.5*e))),f.vel.add(f.acc.scale(b)),c&&f.vel.scale(c),j.push(f.acc.clear());else continue}return j},b}(Integrator),Verlet=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.integrate=function(a,b,c){var d,e,f,g,h,i;f=new Vector,d=b*b,i=[];for(g=0,h=a.length;g<h;g++){e=a[g];if(!e.fixed)e.acc.scale(e.massInv),e.vel.copy(e.pos).sub(e.old.pos),c&&e.vel.scale(c),f.copy(e.pos).add(e.vel.add(e.acc.scale(d))),e.old.pos.copy(e.pos),e.pos.copy(f),i.push(e.acc.clear());else continue}return i},b}(Integrator),Behaviour=function(){function a(){this.GUID=a.GUID++,this.interval=1}return a.GUID=0,a.prototype.apply=function(a,b,c){var d,e;return((e=a[d="__behaviour"+this.GUID])!=null?e:a[d]={counter:0}).counter++},a}(),Attraction=function(a){function b(a,c,d){this.target=a!=null?a:new Vector,this.radius=c!=null?c:1e3,this.strength=d!=null?d:100,this._delta=new Vector,this.setRadius(this.radius),b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.setRadius=function(a){return this.radius=a,this.radiusSq=a*a},b.prototype.apply=function(a,b,c){var d;this._delta.copy(this.target).sub(a.pos),d=this._delta.magSq();if(d<this.radiusSq&&d>1e-6)return this._delta.norm().scale(1-d/this.radiusSq),a.acc.add(this._delta.scale(this.strength))},b}(Behaviour),Collision=function(a){function b(a,c){this.useMass=a!=null?a:!0,this.callback=c!=null?c:null,this.pool=[],this._delta=new Vector,b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.apply=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o;o=[];for(f=m=c,n=this.pool.length-1;c<=n?m<=n:m>=n;f=c<=n?++m:--m)h=this.pool[f],h!==a?(this._delta.copy(h.pos).sub(a.pos),e=this._delta.magSq(),l=a.radius+h.radius,e<=l*l?(d=Math.sqrt(e),i=a.radius+h.radius-d,i+=.5,g=a.mass+h.mass,j=this.useMass?h.mass/g:.5,k=this.useMass?a.mass/g:.5,a.pos.add(this._delta.clone().norm().scale(i*-j)),h.pos.add(this._delta.norm().scale(i*k)),o.push(typeof this.callback=="function"?this.callback(a,h,i):void 0)):o.push(void 0)):o.push(void 0);return o},b}(Behaviour),ConstantForce=function(a){function b(a){this.force=a!=null?a:new Vector,b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.apply=function(a,b,c){return a.acc.add(this.force)},b}(Behaviour),EdgeBounce=function(a){function b(a,c){this.min=a!=null?a:new Vector,this.max=c!=null?c:new Vector,b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.apply=function(a,b,c){a.pos.x-a.radius<this.min.x?a.pos.x=this.min.x+a.radius:a.pos.x+a.radius>this.max.x&&(a.pos.x=this.max.x-a.radius);if(a.pos.y-a.radius<this.min.y)return a.pos.y=this.min.y+a.radius;if(a.pos.y+a.radius>this.max.y)return a.pos.y=this.max.y-a.radius},b}(Behaviour),EdgeWrap=function(a){function b(a,c){this.min=a!=null?a:new Vector,this.max=c!=null?c:new Vector,b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.apply=function(a,b,c){a.pos.x+a.radius<this.min.x?(a.pos.x=this.max.x+a.radius,a.old.pos.x=a.pos.x):a.pos.x-a.radius>this.max.x&&(a.pos.x=this.min.x-a.radius,a.old.pos.x=a.pos.x);if(a.pos.y+a.radius<this.min.y)return a.pos.y=this.max.y+a.radius,a.old.pos.y=a.pos.y;if(a.pos.y-a.radius>this.max.y)return a.pos.y=this.min.y-a.radius,a.old.pos.y=a.pos.y},b}(Behaviour),Wander=function(a){function b(a,c,d){this.jitter=a!=null?a:.5,this.radius=c!=null?c:100,this.strength=d!=null?d:1,this.theta=Math.random()*Math.PI*2,b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.apply=function(a,b,c){return this.theta+=(Math.random()-.5)*this.jitter*Math.PI*2,a.acc.x+=Math.cos(this.theta)*this.radius*this.strength,a.acc.y+=Math.sin(this.theta)*this.radius*this.strength},b}(Behaviour);var Sketch=function(){function l(a){return Object.prototype.toString.call(a)=="[object Array]"}function m(a){return typeof a=="function"}function n(a){return typeof a=="number"}function o(a){return typeof a=="string"}function p(a){return k[a]||String.fromCharCode(a)}function q(a,b,c){for(var d in b)if(c||!a.hasOwnProperty(d))a[d]=b[d];return a}function r(a,b){return function(){a.apply(b,arguments)}}function s(a){var b={};for(var c in a)m(a[c])?b[c]=r(a[c],a):b[c]=a[c];return b}function t(a){function M(b){m(b)&&b.apply(a,[].splice.call(arguments,1))}function N(a){for(n=0;n<K.length;n++)u=K[n],o(u)?e[(a?"add":"remove")+"EventListener"].call(e,u,c,!1):m(u)?c=u:e=u}function O(){E(b),b=D(O),F||(M(a.setup),F=m(a.setup),M(a.resize)),a.running&&!B&&(a.dt=(t=+(new Date))-a.now,a.millis+=a.dt,a.now=t,M(a.update),a.autoclear&&I&&a.clear(),M(a.draw)),B=++B%a.interval}function P(){e=H?a.style:a.canvas,r=H?"px":"",a.fullscreen&&(a.height=h.innerHeight,a.width=h.innerWidth),e.height=a.height+r,e.width=a.width+r,a.retina&&I&&G&&(e.height=a.height*G,e.width=a.width*G,e.style.height=a.height+"px",e.style.width=a.width+"px",a.scale(G,G)),F&&M(a.resize)}function Q(a,b){return l=b.getBoundingClientRect(),a.x=a.pageX-l.left-h.scrollX,a.y=a.pageY-l.top-h.scrollY,a}function R(b,c){return Q(b,a.element),c=c||{},c.ox=c.x||b.x,c.oy=c.y||b.y,c.x=b.x,c.y=b.y,c.dx=c.x-c.ox,c.dy=c.y-c.oy,c}function S(a){a.preventDefault(),v=s(a),v.originalEvent=a;if(v.touches){C.length=v.touches.length;for(n=0;n<v.touches.length;n++)C[n]=R(v.touches[n],C[n])}else C.length=0,C[0]=R(v,J);return q(J,C[0],!0),v}function T(b){b=S(b),z=(A=K.indexOf(w=b.type))-1,a.dragging=/down|start/.test(w)?!0:/up|end/.test(w)?!1:a.dragging;while(z)o(K[z])?M(a[K[z--]],b):o(K[A])?M(a[K[A++]],b):z=0}function U(b){x=b.keyCode,y=b.type=="keyup",L[x]=L[p(x)]=!y,M(a[b.type],b)}function V(b){a.autopause&&(b.type=="blur"?X:W)(),M(a[b.type],b)}function W(){a.now=+(new Date),a.running=!0}function X(){a.running=!1}function Y(){(a.running?X:W)()}function Z(){I&&a.clearRect(0,0,a.width,a.height)}function $(){j=a.element.parentNode,n=i.indexOf(a),j&&j.removeChild(a.element),~n&&i.splice(n,1),N(!1),X()}var b,c,e,j,l,n,r,t,u,v,w,x,y,z,A,B=0,C=[],F=!1,G=h.devicePixelRatio,H=a.type==f,I=a.type==d,J={x:0,y:0,ox:0,oy:0,dx:0,dy:0},K=[a.element,T,"mousedown","touchstart",T,"mousemove","touchmove",T,"mouseup","touchend",T,"click",g,U,"keydown","keyup",h,V,"focus","blur",P,"resize"],L={};for(x in k)L[k[x]]=!1;return q(a,{touches:C,mouse:J,keys:L,dragging:!1,running:!1,millis:0,now:NaN,dt:NaN,destroy:$,toggle:Y,clear:Z,start:W,stop:X}),i.push(a),a.autostart&&W(),N(!0),P(),O(),a}"use strict";var a="E LN10 LN2 LOG2E LOG10E PI SQRT1_2 SQRT2 abs acos asin atan ceil cos exp floor log round sin sqrt tan atan2 pow max min".split(" "),b="__hasSketch",c=Math,d="canvas",e="webgl",f="dom",g=document,h=window,i=[],j={fullscreen:!0,autostart:!0,autoclear:!0,autopause:!0,container:g.body,interval:2,globals:!0,retina:!0,type:d},k={8:"BACKSPACE",9:"TAB",13:"ENTER",16:"SHIFT",27:"ESCAPE",32:"SPACE",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN"},u,v,w={CANVAS:d,WEB_GL:e,WEBGL:e,DOM:f,instances:i,install:function(d){if(!d[b]){for(var e=0;e<a.length;e++)d[a[e]]=c[a[e]];q(d,{TWO_PI:c.PI*2,HALF_PI:c.PI/2,QUATER_PI:c.PI/4,random:function(a,b){return l(a)?a[~~(c.random()*a.length)]:(n(b)||(b=a||1,a=0),a+c.random()*(b-a))},lerp:function(a,b,c){return a+c*(b-a)},map:function(a,b,c,d,e){return(a-b)/(c-b)*(e-d)+d}}),d[b]=!0}},create:function(a){return a=q(a||{},j),a.globals&&w.install(self),u=a.element=a.element||g.createElement(a.type===f?"div":"canvas"),v=a.context=a.context||function(){switch(a.type){case d:return u.getContext("2d",a);case e:return u.getContext("webgl",a)||u.getContext("experimental-webgl",a);case f:return u.canvas=u}}(),a.container.appendChild(u),w.augment(v,a)},augment:function(a,b){return b=q(b||{},j),b.element=a.canvas||a,b.element.className+=" sketch",q(a,b,!0),t(a)}},x=["ms","moz","webkit","o"],y=self,z=0,A="AnimationFrame",B="request"+A,C="cancel"+A,D=y[B],E=y[C];for(var F=0;F<x.length&&!D;F++)D=y[x[F]+"Request"+A],E=y[x[F]+"Cancel"+B];return y[B]=D=D||function(a){var b=+(new Date),d=c.max(0,16-(b-z)),e=setTimeout(function(){a(b+d)},d);return z=b+d,e},y[C]=E=E||function(a){clearTimeout(a)},w}(),Attraction,Behaviour,Collision,ConstantForce,EdgeBounce,EdgeWrap,Euler,ImprovedEuler,Integrator,Particle,Physics,Random,Spring,Vector,Verlet,Wander,namespace,__hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};namespace=function(a){var b,c,d,e,f,g,h;c=self,f=a.split("."),h=[];for(d=0,e=f.length;d<e;d++)b=f[d],h.push(c=(g=c[b])!=null?g:c[b]={});return h},function(){var a,b,c,d,e;a=0,c=["ms","moz","webkit","o"];for(d=0,e=c.length;d<e;d++){b=c[d];if(!window.requestAnimationFrame)window.requestAnimationFrame=window[b+"RequestAnimationFrame"],window.cancelRequestAnimationFrame=window[b+"CancelRequestAnimationFrame"];else continue}window.requestAnimationFrame||(window.requestAnimationFrame=function(b,c){var d,e,f;return e=(new Date).getTime(),d=Math.max(0,16-(e-f)),setTimeout(function(){return b(a+d)},d),f=e+d});if(!window.cancelAnimationFrame)return window.cancelAnimationFrame=function(a){return clearTimeout(a)}}(),Random=function(a,b){return b==null&&(b=a,a=0),a+Math.random()*(b-a)},Random.int=function(a,b){return b==null&&(b=a,a=0),Math.floor(a+Math.random()*(b-a))},Random.sign=function(a){return a==null&&(a=.5),Math.random()<a?1:-1},Random.bool=function(a){return a==null&&(a=.5),Math.random()<a},Random.item=function(a){return a[Math.floor(Math.random()*a.length)]},Vector=function(){function a(a,b){this.x=a!=null?a:0,this.y=b!=null?b:0}return a.add=function(b,c){return new a(b.x+c.x,b.y+c.y)},a.sub=function(b,c){return new a(b.x-c.x,b.y-c.y)},a.project=function(a,b){return a.clone().scale(a.dot(b)/a.magSq())},a.prototype.set=function(a,b){return this.x=a,this.y=b,this},a.prototype.add=function(a){return this.x+=a.x,this.y+=a.y,this},a.prototype.sub=function(a){return this.x-=a.x,this.y-=a.y,this},a.prototype.scale=function(a){return this.x*=a,this.y*=a,this},a.prototype.dot=function(a){return this.x*a.x+this.y*a.y},a.prototype.cross=function(a){return this.x*a.y-this.y*a.x},a.prototype.mag=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},a.prototype.magSq=function(){return this.x*this.x+this.y*this.y},a.prototype.dist=function(a){var b,c;return b=a.x-this.x,c=a.y-this.y,Math.sqrt(b*b+c*c)},a.prototype.distSq=function(a){var b,c;return b=a.x-this.x,c=a.y-this.y,b*b+c*c},a.prototype.norm=function(){var a;return a=Math.sqrt(this.x*this.x+this.y*this.y),this.x/=a,this.y/=a,this},a.prototype.limit=function(a){var b,c;c=this.x*this.x+this.y*this.y;if(c>a*a)return b=Math.sqrt(c),this.x/=b,this.y/=b,this.x*=a,this.y*=a,this},a.prototype.copy=function(a){return this.x=a.x,this.y=a.y,this},a.prototype.clone=function(){return new a(this.x,this.y)},a.prototype.clear=function(){return this.x=0,this.y=0,this},a}(),Particle=function(){function a(b){this.mass=b!=null?b:1,this.id="p"+a.GUID++,this.setMass(this.mass),this.setRadius(1),this.fixed=!1,this.behaviours=[],this.pos=new Vector,this.vel=new Vector,this.acc=new Vector,this.old={pos:new Vector,vel:new Vector,acc:new Vector}}return a.GUID=0,a.prototype.moveTo=function(a){return this.pos.copy(a),this.old.pos.copy(a)},a.prototype.setMass=function(a){return this.mass=a!=null?a:1,this.massInv=1/this.mass},a.prototype.setRadius=function(a){return this.radius=a!=null?a:1,this.radiusSq=this.radius*this.radius},a.prototype.update=function(a,b){var c,d,e,f,g;if(!this.fixed){f=this.behaviours,g=[];for(d=0,e=f.length;d<e;d++)c=f[d],g.push(c.apply(this,a,b));return g}},a}(),Spring=function(){function a(a,b,c,d){this.p1=a,this.p2=b,this.restLength=c!=null?c:100,this.stiffness=d!=null?d:1,this._delta=new Vector}return a.prototype.apply=function(){var a,b;this._delta.copy(this.p2.pos).sub(this.p1.pos),a=this._delta.mag()+1e-6,b=(a-this.restLength)/(a*(this.p1.massInv+this.p2.massInv))*this.stiffness,this.p1.fixed||this.p1.pos.add(this._delta.clone().scale(b*this.p1.massInv));if(!this.p2.fixed)return this.p2.pos.add(this._delta.scale(-b*this.p2.massInv))},a}(),Physics=function(){function a(a){this.integrator=a!=null?a:new Euler,this.timestep=1/60,this.viscosity=.005,this.behaviours=[],this._time=0,this._step=0,this._clock=null,this._buffer=0,this._maxSteps=4,this.particles=[],this.springs=[]}return a.prototype.integrate=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;c=1-this.viscosity,m=this.particles;for(d=g=0,j=m.length;g<j;d=++g){e=m[d],n=this.behaviours;for(h=0,k=n.length;h<k;h++)b=n[h],b.apply(e,a,d);e.update(a,d)}this.integrator.integrate(this.particles,a,c),o=this.springs,p=[];for(i=0,l=o.length;i<l;i++)f=o[i],p.push(f.apply());return p},a.prototype.step=function(){var a,b,c,d;(d=this._clock)==null&&(this._clock=(new Date).getTime()),c=(new Date).getTime(),a=c-this._clock;if(a<=0)return;a*=.001,this._clock=c,this._buffer+=a,b=0;while(this._buffer>=this.timestep&&++b<this._maxSteps)this.integrate(this.timestep),this._buffer-=this.timestep,this._time+=this.timestep;return this._step=(new Date).getTime()-c},a.prototype.destroy=function(){return this.integrator=null,this.particles=null,this.springs=null},a}(),Integrator=function(){function a(){}return a.prototype.integrate=function(a,b){},a}(),Euler=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.integrate=function(a,b,c){var d,e,f,g,h;e=new Vector,h=[];for(f=0,g=a.length;f<g;f++){d=a[f];if(!d.fixed)d.old.pos.copy(d.pos),d.acc.scale(d.massInv),e.copy(d.vel),d.vel.add(d.acc.scale(b)),d.pos.add(e.scale(b)),c&&d.vel.scale(c),h.push(d.acc.clear());else continue}return h},b}(Integrator),ImprovedEuler=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.integrate=function(a,b,c){var d,e,f,g,h,i,j;d=new Vector,g=new Vector,e=b*b,j=[];for(h=0,i=a.length;h<i;h++){f=a[h];if(!f.fixed)f.old.pos.copy(f.pos),f.acc.scale(f.massInv),g.copy(f.vel),d.copy(f.acc),f.pos.add(g.scale(b).add(d.scale(.5*e))),f.vel.add(f.acc.scale(b)),c&&f.vel.scale(c),j.push(f.acc.clear());else continue}return j},b}(Integrator),Verlet=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.integrate=function(a,b,c){var d,e,f,g,h,i;f=new Vector,d=b*b,i=[];for(g=0,h=a.length;g<h;g++){e=a[g];if(!e.fixed)e.acc.scale(e.massInv),e.vel.copy(e.pos).sub(e.old.pos),c&&e.vel.scale(c),f.copy(e.pos).add(e.vel.add(e.acc.scale(d))),e.old.pos.copy(e.pos),e.pos.copy(f),i.push(e.acc.clear());else continue}return i},b}(Integrator),Behaviour=function(){function a(){this.GUID=a.GUID++,this.interval=1}return a.GUID=0,a.prototype.apply=function(a,b,c){var d,e;return((e=a[d="__behaviour"+this.GUID])!=null?e:a[d]={counter:0}).counter++},a}(),Attraction=function(a){function b(a,c,d){this.target=a!=null?a:new Vector,this.radius=c!=null?c:1e3,this.strength=d!=null?d:100,this._delta=new Vector,this.setRadius(this.radius),b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.setRadius=function(a){return this.radius=a,this.radiusSq=a*a},b.prototype.apply=function(a,b,c){var d;this._delta.copy(this.target).sub(a.pos),d=this._delta.magSq();if(d<this.radiusSq&&d>1e-6)return this._delta.norm().scale(1-d/this.radiusSq),a.acc.add(this._delta.scale(this.strength))},b}(Behaviour),Collision=function(a){function b(a,c){this.useMass=a!=null?a:!0,this.callback=c!=null?c:null,this.pool=[],this._delta=new Vector,b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.apply=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o;o=[];for(f=m=c,n=this.pool.length-1;c<=n?m<=n:m>=n;f=c<=n?++m:--m)h=this.pool[f],h!==a?(this._delta.copy(h.pos).sub(a.pos),e=this._delta.magSq(),l=a.radius+h.radius,e<=l*l?(d=Math.sqrt(e),i=a.radius+h.radius-d,i+=.5,g=a.mass+h.mass,j=this.useMass?h.mass/g:.5,k=this.useMass?a.mass/g:.5,a.pos.add(this._delta.clone().norm().scale(i*-j)),h.pos.add(this._delta.norm().scale(i*k)),o.push(typeof this.callback=="function"?this.callback(a,h,i):void 0)):o.push(void 0)):o.push(void 0);return o},b}(Behaviour),ConstantForce=function(a){function b(a){this.force=a!=null?a:new Vector,b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.apply=function(a,b,c){return a.acc.add(this.force)},b}(Behaviour),EdgeBounce=function(a){function b(a,c){this.min=a!=null?a:new Vector,this.max=c!=null?c:new Vector,b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.apply=function(a,b,c){a.pos.x-a.radius<this.min.x?a.pos.x=this.min.x+a.radius:a.pos.x+a.radius>this.max.x&&(a.pos.x=this.max.x-a.radius);if(a.pos.y-a.radius<this.min.y)return a.pos.y=this.min.y+a.radius;if(a.pos.y+a.radius>this.max.y)return a.pos.y=this.max.y-a.radius},b}(Behaviour),EdgeWrap=function(a){function b(a,c){this.min=a!=null?a:new Vector,this.max=c!=null?c:new Vector,b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.apply=function(a,b,c){a.pos.x+a.radius<this.min.x?(a.pos.x=this.max.x+a.radius,a.old.pos.x=a.pos.x):a.pos.x-a.radius>this.max.x&&(a.pos.x=this.min.x-a.radius,a.old.pos.x=a.pos.x);if(a.pos.y+a.radius<this.min.y)return a.pos.y=this.max.y+a.radius,a.old.pos.y=a.pos.y;if(a.pos.y-a.radius>this.max.y)return a.pos.y=this.min.y-a.radius,a.old.pos.y=a.pos.y},b}(Behaviour),Wander=function(a){function b(a,c,d){this.jitter=a!=null?a:.5,this.radius=c!=null?c:100,this.strength=d!=null?d:1,this.theta=Math.random()*Math.PI*2,b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.apply=function(a,b,c){return this.theta+=(Math.random()-.5)*this.jitter*Math.PI*2,a.acc.x+=Math.cos(this.theta)*this.radius*this.strength,a.acc.y+=Math.sin(this.theta)*this.radius*this.strength},b}(Behaviour);var dat=dat||{};dat.gui=dat.gui||{},dat.utils=dat.utils||{},dat.controllers=dat.controllers||{},dat.dom=dat.dom||{},dat.color=dat.color||{},dat.utils.css=function(){return{load:function(a,b){var b=b||document,c=b.createElement("link");c.type="text/css",c.rel="stylesheet",c.href=a,b.getElementsByTagName("head")[0].appendChild(c)},inject:function(a,b){var b=b||document,c=document.createElement("style");c.type="text/css",c.innerHTML=a,b.getElementsByTagName("head")[0].appendChild(c)}}}(),dat.utils.common=function(){var a=Array.prototype.forEach,b=Array.prototype.slice;return{BREAK:{},extend:function(a){return this.each(b.call(arguments,1),function(b){for(var d in b)this.isUndefined(b[d])||(a[d]=b[d])},this),a},defaults:function(a){return this.each(b.call(arguments,1),function(b){for(var d in b)this.isUndefined(a[d])&&(a[d]=b[d])},this),a},compose:function(){var a=b.call(arguments);return function(){for(var d=b.call(arguments),e=a.length-1;e>=0;e--)d=[a[e].apply(this,d)];return d[0]}},each:function(b,c,d){if(a&&b.forEach===a)b.forEach(c,d);else if(b.length===b.length+0){for(var f=0,g=b.length;f<g;f++)if(f in b&&c.call(d,b[f],f)===this.BREAK)break}else for(f in b)if(c.call(d,b[f],f)===this.BREAK)break},defer:function(a){setTimeout(a,0)},toArray:function(a){return a.toArray?a.toArray():b.call(a)},isUndefined:function(a){return a===void 0},isNull:function(a){return a===null},isNaN:function(a){return a!==a},isArray:Array.isArray||function(a){return a.constructor===Array},isObject:function(a){return a===Object(a)},isNumber:function(a){return a===a+0},isString:function(a){return a===a+""},isBoolean:function(a){return a===!1||a===!0},isFunction:function(a){return Object.prototype.toString.call(a)==="[object Function]"}}}(),dat.controllers.Controller=function(a){var b=function(a,b){this.initialValue=a[b],this.domElement=document.createElement("div"),this.object=a,this.property=b,this.__onFinishChange=this.__onChange=void 0};return a.extend(b.prototype,{onChange:function(a){return this.__onChange=a,this},onFinishChange:function(a){return this.__onFinishChange=a,this},setValue:function(a){return this.object[this.property]=a,this.__onChange&&this.__onChange.call(this,a),this.updateDisplay(),this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}}),b}(dat.utils.common),dat.dom.dom=function(a){function b(b){return b==="0"||a.isUndefined(b)?0:(b=b.match(d),a.isNull(b)?0:parseFloat(b[1]))}var c={};a.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(b,d){a.each(b,function(a){c[a]=d})});var d=/(\d+(\.\d+)?)px/,e={makeSelectable:function(a,b){a!==void 0&&a.style!==void 0&&(a.onselectstart=b?function(){return!1}:function(){},a.style.MozUserSelect=b?"auto":"none",a.style.KhtmlUserSelect=b?"auto":"none",a.unselectable=b?"on":"off")},makeFullscreen:function(b,c,d){a.isUndefined(c)&&(c=!0),a.isUndefined(d)&&(d=!0),b.style.position="absolute",c&&(b.style.left=0,b.style.right=0),d&&(b.style.top=0,b.style.bottom=0)},fakeEvent:function(b,d,e,f){var e=e||{},g=c[d];if(!g)throw Error("Event type "+d+" not supported.");var h=document.createEvent(g);switch(g){case"MouseEvents":h.initMouseEvent(d,e.bubbles||!1,e.cancelable||!0,window,e.clickCount||1,0,0,e.x||e.clientX||0,e.y||e.clientY||0,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":g=h.initKeyboardEvent||h.initKeyEvent,a.defaults(e,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),g(d,e.bubbles||!1,e.cancelable,window,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.keyCode,e.charCode);break;default:h.initEvent(d,e.bubbles||!1,e.cancelable||!0)}a.defaults(h,f),b.dispatchEvent(h)},bind:function(a,b,c,d){return a.addEventListener?a.addEventListener(b,c,d||!1):a.attachEvent&&a.attachEvent("on"+b,c),e},unbind:function(a,b,c,d){return a.removeEventListener?a.removeEventListener(b,c,d||!1):a.detachEvent&&a.detachEvent("on"+b,c),e},addClass:function(a,b){if(a.className===void 0)a.className=b;else if(a.className!==b){var c=a.className.split(/ +/);c.indexOf(b)==-1&&(c.push(b),a.className=c.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return e},removeClass:function(a,b){if(b){if(a.className!==void 0)if(a.className===b)a.removeAttribute("class");else{var c=a.className.split(/ +/),d=c.indexOf(b);d!=-1&&(c.splice(d,1),a.className=c.join(" "))}}else a.className=void 0;return e},hasClass:function(a,b){return RegExp("(?:^|\\s+)"+b+"(?:\\s+|$)").test(a.className)||!1},getWidth:function(a){return a=getComputedStyle(a),b(a["border-left-width"])+b(a["border-right-width"])+b(a["padding-left"])+b(a["padding-right"])+b(a.width)},getHeight:function(a){return a=getComputedStyle(a),b(a["border-top-width"])+b(a["border-bottom-width"])+b(a["padding-top"])+b(a["padding-bottom"])+b(a.height)},getOffset:function(a){var b={left:0,top:0};if(a.offsetParent)do b.left+=a.offsetLeft,b.top+=a.offsetTop;while(a=a.offsetParent);return b},isActive:function(a){return a===document.activeElement&&(a.type||a.href)}};return e}(dat.utils.common),dat.controllers.OptionController=function(a,b,c){var d=function(a,e,f){d.superclass.call(this,a,e);var g=this;this.__select=document.createElement("select");if(c.isArray(f)){var h={};c.each(f,function(a){h[a]=a}),f=h}c.each(f,function(a,b){var c=document.createElement("option");c.innerHTML=b,c.setAttribute("value",a),g.__select.appendChild(c)}),this.updateDisplay(),b.bind(this.__select,"change",function(){g.setValue(this.options[this.selectedIndex].value)}),this.domElement.appendChild(this.__select)};return d.superclass=a,c.extend(d.prototype,a.prototype,{setValue:function(a){return a=d.superclass.prototype.setValue.call(this,a),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),a},updateDisplay:function(){return this.__select.value=this.getValue(),d.superclass.prototype.updateDisplay.call(this)}}),d}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.NumberController=function(a,b){var c=function(a,d,e){c.superclass.call(this,a,d),e=e||{},this.__min=e.min,this.__max=e.max,this.__step=e.step,a=this.__impliedStep=b.isUndefined(this.__step)?this.initialValue==0?1:Math.pow(10,Math.floor(Math.log(this.initialValue)/Math.LN10))/10:this.__step,a=a.toString(),this.__precision=a.indexOf(".")>-1?a.length-a.indexOf(".")-1:0};return c.superclass=a,b.extend(c.prototype,a.prototype,{setValue:function(a){return this.__min!==void 0&&a<this.__min?a=this.__min:this.__max!==void 0&&a>this.__max&&(a=this.__max),this.__step!==void 0&&a%this.__step!=0&&(a=Math.round(a/this.__step)*this.__step),c.superclass.prototype.setValue.call(this,a)},min:function(a){return this.__min=a,this},max:function(a){return this.__max=a,this},step:function(a){return this.__step=a,this}}),c}(dat.controllers.Controller,dat.utils.common),dat.controllers.NumberControllerBox=function(a,b,c){var d=function(a,e,f){function g(){var a=parseFloat(j.__input.value);c.isNaN(a)||j.setValue(a)}function h(a){var b=k-a.clientY;j.setValue(j.getValue()+b*j.__impliedStep),k=a.clientY}function i(){b.unbind(window,"mousemove",h),b.unbind(window,"mouseup",i)}this.__truncationSuspended=!1,d.superclass.call(this,a,e,f);var j=this,k;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),b.bind(this.__input,"change",g),b.bind(this.__input,"blur",function(){g(),j.__onFinishChange&&j.__onFinishChange.call(j,j.getValue())}),b.bind(this.__input,"mousedown",function(a){b.bind(window,"mousemove",h),b.bind(window,"mouseup",i),k=a.clientY}),b.bind(this.__input,"keydown",function(a){a.keyCode===13&&(j.__truncationSuspended=!0,this.blur(),j.__truncationSuspended=!1)}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return d.superclass=a,c.extend(d.prototype,a.prototype,{updateDisplay:function(){var a=this.__input,b;if(this.__truncationSuspended)b=this.getValue();else{b=this.getValue();var c=Math.pow(10,this.__precision);b=Math.round(b*c)/c}return a.value=b,d.superclass.prototype.updateDisplay.call(this)}}),d}(dat.controllers.NumberController,dat.dom.dom,dat.utils.common),dat.controllers.NumberControllerSlider=function(a,b,c,d,e){var f=function(a,c,d,e,g){function h(a){a.preventDefault();var c=b.getOffset(j.__background),d=b.getWidth(j.__background);return j.setValue(j.__min+(j.__max-j.__min)*((a.clientX-c.left)/(c.left+d-c.left))),!1}function i(){b.unbind(window,"mousemove",h),b.unbind(window,"mouseup",i),j.__onFinishChange&&j.__onFinishChange.call(j,j.getValue())}f.superclass.call(this,a,c,{min:d,max:e,step:g});var j=this;this.__background=document.createElement("div"),this.__foreground=document.createElement("div"),b.bind(this.__background,"mousedown",function(a){b.bind(window,"mousemove",h),b.bind(window,"mouseup",i),h(a)}),b.addClass(this.__background,"slider"),b.addClass(this.__foreground,"slider-fg"),this.updateDisplay(),this.__background.appendChild(this.__foreground),this.domElement.appendChild(this.__background)};return f.superclass=a,f.useDefaultStyles=function(){c.inject(e)},d.extend(f.prototype,a.prototype,{updateDisplay:function(){return this.__foreground.style.width=(this.getValue()-this.__min)/(this.__max-this.__min)*100+"%",f.superclass.prototype.updateDisplay.call(this)}}),f}(dat.controllers.NumberController,dat.dom.dom,dat.utils.css,dat.utils.common,".slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}"),dat.controllers.FunctionController=function(a,b,c){var d=function(a,c,e){d.superclass.call(this,a,c);var f=this;this.__button=document.createElement("div"),this.__button.innerHTML=e===void 0?"Fire":e,b.bind(this.__button,"click",function(a){return a.preventDefault(),f.fire(),!1}),b.addClass(this.__button,"button"),this.domElement.appendChild(this.__button)};return d.superclass=a,c.extend(d.prototype,a.prototype,{fire:function(){this.__onChange&&this.__onChange.call(this),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.getValue().call(this.object)}}),d}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.BooleanController=function(a,b,c){var d=function(a,c){d.superclass.call(this,a,c);var e=this;this.__prev=this.getValue(),this.__checkbox=document.createElement("input"),this.__checkbox.setAttribute("type","checkbox"),b.bind(this.__checkbox,"change",function(){e.setValue(!e.__prev)},!1),this.domElement.appendChild(this.__checkbox),this.updateDisplay()};return d.superclass=a,c.extend(d.prototype,a.prototype,{setValue:function(a){return a=d.superclass.prototype.setValue.call(this,a),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),a},updateDisplay:function(){return this.getValue()===!0?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,d.superclass.prototype.updateDisplay.call(this)}}),d}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.color.toString=function(a){return function(b){if(b.a==1||a.isUndefined(b.a)){for(b=b.hex.toString(16);b.length<6;)b="0"+b;return"#"+b}return"rgba("+Math.round(b.r)+","+Math.round(b.g)+","+Math.round(b.b)+","+b.a+")"}}(dat.utils.common),dat.color.interpret=function(a,b){var c,d,e=[{litmus:b.isString,conversions:{THREE_CHAR_HEX:{read:function(a){return a=a.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i),a===null?!1:{space:"HEX",hex:parseInt("0x"+a[1].toString()+a[1].toString()+a[2].toString()+a[2].toString()+a[3].toString()+a[3].toString())}},write:a},SIX_CHAR_HEX:{read:function(a){return a=a.match(/^#([A-F0-9]{6})$/i),a===null?!1:{space:"HEX",hex:parseInt("0x"+a[1].toString())}},write:a},CSS_RGB:{read:function(a){return a=a.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/),a===null?!1:{space:"RGB",r:parseFloat(a[1]),g:parseFloat(a[2]),b:parseFloat(a[3])}},write:a},CSS_RGBA:{read:function(a){return a=a.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/),a===null?!1:{space:"RGB",r:parseFloat(a[1]),g:parseFloat(a[2]),b:parseFloat(a[3]),a:parseFloat(a[4])}},write:a}}},{litmus:b.isNumber,conversions:{HEX:{read:function(a){return{space:"HEX",hex:a,conversionName:"HEX"}},write:function(a){return a.hex}}}},{litmus:b.isArray,conversions:{RGB_ARRAY:{read:function(a){return a.length!=3?!1:{space:"RGB",r:a[0],g:a[1],b:a[2]}},write:function(a){return[a.r,a.g,a.b]}},RGBA_ARRAY:{read:function(a){return a.length!=4?!1:{space:"RGB",r:a[0],g:a[1],b:a[2],a:a[3]}},write:function(a){return[a.r,a.g,a.b,a.a]}}}},{litmus:b.isObject,conversions:{RGBA_OBJ:{read:function(a){return b.isNumber(a.r)&&b.isNumber(a.g)&&b.isNumber(a.b)&&b.isNumber(a.a)?{space:"RGB",r:a.r,g:a.g,b:a.b,a:a.a}:!1},write:function(a){return{r:a.r,g:a.g,b:a.b,a:a.a}}},RGB_OBJ:{read:function(a){return b.isNumber(a.r)&&b.isNumber(a.g)&&b.isNumber(a.b)?{space:"RGB",r:a.r,g:a.g,b:a.b}:!1},write:function(a){return{r:a.r,g:a.g,b:a.b}}},HSVA_OBJ:{read:function(a){return b.isNumber(a.h)&&b.isNumber(a.s)&&b.isNumber(a.v)&&b.isNumber(a.a)?{space:"HSV",h:a.h,s:a.s,v:a.v,a:a.a}:!1},write:function(a){return{h:a.h,s:a.s,v:a.v,a:a.a}}},HSV_OBJ:{read:function(a){return b.isNumber(a.h)&&b.isNumber(a.s)&&b.isNumber(a.v)?{space:"HSV",h:a.h,s:a.s,v:a.v}:!1},write:function(a){return{h:a.h,s:a.s,v:a.v}}}}}];return function(){d=!1;var a=arguments.length>1?b.toArray(arguments):arguments[0];return b.each(e,function(e){if(e.litmus(a))return b.each(e.conversions,function(e,f){c=e.read(a);if(d===!1&&c!==!1)return d=c,c.conversionName=f,c.conversion=e,b.BREAK}),b.BREAK}),d}}(dat.color.toString,dat.utils.common),dat.GUI=dat.gui.GUI=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(a,b,c,f){if(b[c]===void 0)throw Error("Object "+b+' has no property "'+c+'"');f.color?b=new k(b,c):(b=[b,c].concat(f.factoryArgs),b=d.apply(a,b)),f.before instanceof e&&(f.before=f.before.__li),s(a,b),n.addClass(b.domElement,"c"),c=document.createElement("span"),n.addClass(c,"property-name"),c.innerHTML=b.property;var g=document.createElement("div");return g.appendChild(c),g.appendChild(b.domElement),f=q(a,g,f.before),n.addClass(f,I.CLASS_CONTROLLER_ROW),n.addClass(f,typeof b.getValue()),r(a,f,b),a.__controllers.push(b),b}function q(a,b,c){var d=document.createElement("li");return b&&d.appendChild(b),c?a.__ul.insertBefore(d,params.before):a.__ul.appendChild(d),a.onResize(),d}function r(a,b,c){c.__li=b,c.__gui=a,o.extend(c,{options:function(b){if(arguments.length>1)return c.remove(),p(a,c.object,c.property,{before:c.__li.nextElementSibling,factoryArgs:[o.toArray(arguments)]});if(o.isArray(b)||o.isObject(b))return c.remove(),p(a,c.object,c.property,{before:c.__li.nextElementSibling,factoryArgs:[b]})},name:function(a){return c.__li.firstElementChild.firstElementChild.innerHTML=a,c},listen:function(){return c.__gui.listen(c),c},remove:function(){return c.__gui.remove(c),c}});if(c instanceof i){var d=new h(c.object,c.property,{min:c.__min,max:c.__max,step:c.__step});o.each(["updateDisplay","onChange","onFinishChange"],function(a){var b=c[a],e=d[a];c[a]=d[a]=function(){var a=Array.prototype.slice.call(arguments);return b.apply(c,a),e.apply(d,a)}}),n.addClass(b,"has-slider"),c.domElement.insertBefore(d.domElement,c.domElement.firstElementChild)}else if(c instanceof h){var e=function(b){return o.isNumber(c.__min)&&o.isNumber(c.__max)?(c.remove(),p(a,c.object,c.property,{before:c.__li.nextElementSibling,factoryArgs:[c.__min,c.__max,c.__step]})):b};c.min=o.compose(e,c.min),c.max=o.compose(e,c.max)}else c instanceof f?(n.bind(b,"click",function(){n.fakeEvent(c.__checkbox,"click")}),n.bind(c.__checkbox,"click",function(a){a.stopPropagation()})):c instanceof g?(n.bind(b,"click",function(){n.fakeEvent(c.__button,"click")}),n.bind(b,"mouseover",function(){n.addClass(c.__button,"hover")}),n.bind(b,"mouseout",function(){n.removeClass(c.__button,"hover")})):c instanceof k&&(n.addClass(b,"color"),c.updateDisplay=o.compose(function(a){return b.style.borderLeftColor=c.__color.toString(),a},c.updateDisplay),c.updateDisplay());c.setValue=o.compose(function(b){return a.getRoot().__preset_select&&c.isModified()&&y(a.getRoot(),!0),b},c.setValue)}function s(a,b){var c=a.getRoot(),d=c.__rememberedObjects.indexOf(b.object);if(d!=-1){var e=c.__rememberedObjectIndecesToControllers[d];e===void 0&&(e={},c.__rememberedObjectIndecesToControllers[d]=e),e[b.property]=b;if(c.load&&c.load.remembered){c=c.load.remembered;if(c[a.preset])c=c[a.preset];else if(c[A])c=c[A];else return;c[d]&&c[d][b.property]!==void 0&&(d=c[d][b.property],b.initialValue=d,b.setValue(d))}}}function t(a){var b=a.__save_row=document.createElement("li");n.addClass(a.domElement,"has-save"),a.__ul.insertBefore(b,a.__ul.firstChild),n.addClass(b,"save-row");var c=document.createElement("span");c.innerHTML="&nbsp;",n.addClass(c,"button gears");var d=document.createElement("span");d.innerHTML="Save",n.addClass(d,"button"),n.addClass(d,"save");var e=document.createElement("span");e.innerHTML="New",n.addClass(e,"button"),n.addClass(e,"save-as");var f=document.createElement("span");f.innerHTML="Revert",n.addClass(f,"button"),n.addClass(f,"revert");var g=a.__preset_select=document.createElement("select");a.load&&a.load.remembered?o.each(a.load.remembered,function(b,c){x(a,c,c==a.preset)}):x(a,A,!1),n.bind(g,"change",function(){for(var b=0;b<a.__preset_select.length;b++)a.__preset_select[b].innerHTML=a.__preset_select[b].value;a.preset=this.value}),b.appendChild(g),b.appendChild(c),b.appendChild(d),b.appendChild(e),b.appendChild(f);if(B){var b=document.getElementById("dg-save-locally"),h=document.getElementById("dg-local-explain");b.style.display="block",b=document.getElementById("dg-local-storage"),localStorage.getItem(document.location.href+".isLocal")==="true"&&b.setAttribute("checked","checked");var i=function(){h.style.display=a.useLocalStorage?"block":"none"};i(),n.bind(b,"change",function(){a.useLocalStorage=!a.useLocalStorage,i()})}var j=document.getElementById("dg-new-constructor");n.bind(j,"keydown",function(a){a.metaKey&&(a.which===67||a.keyCode==67)&&D.hide()}),n.bind(c,"click",function(){j.innerHTML=JSON.stringify(a.getSaveObject(),void 0,2),D.show(),j.focus(),j.select()}),n.bind(d,"click",function(){a.save()}),n.bind(e,"click",function(){var b=prompt("Enter a new preset name.");b&&a.saveAs(b)}),n.bind(f,"click",function(){a.revert()})}function u(a){function b(b){return b.preventDefault(),e=b.clientX,n.addClass(a.__closeButton,I.CLASS_DRAG),n.bind(window,"mousemove",c),n.bind(window,"mouseup",d),!1}function c(b){return b.preventDefault(),a.width+=e-b.clientX,a.onResize(),e=b.clientX,!1}function d(){n.removeClass(a.__closeButton,I.CLASS_DRAG),n.unbind(window,"mousemove",c),n.unbind(window,"mouseup",d)}a.__resize_handle=document.createElement("div"),o.extend(a.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});var e;n.bind(a.__resize_handle,"mousedown",b),n.bind(a.__closeButton,"mousedown",b),a.domElement.insertBefore(a.__resize_handle,a.domElement.firstElementChild)}function v(a,b){a.domElement.style.width=b+"px",a.__save_row&&a.autoPlace&&(a.__save_row.style.width=b+"px"),a.__closeButton&&(a.__closeButton.style.width=b+"px")}function w(a,b){var c={};return o.each(a.__rememberedObjects,function(d,e){var f={};o.each(a.__rememberedObjectIndecesToControllers[e],function(a,c){f[c]=b?a.initialValue:a.getValue()}),c[e]=f}),c}function x(a,b,c){var d=document.createElement("option");d.innerHTML=b,d.value=b,a.__preset_select.appendChild(d),c&&(a.__preset_select.selectedIndex=a.__preset_select.length-1)}function y(a,b){var c=a.__preset_select[a.__preset_select.selectedIndex];c.innerHTML=b?c.value+"*":c.value}function z(a){a.length!=0&&l(function(){z(a)}),o.each(a,function(a){a.updateDisplay()})}a.inject(c);var A="Default",B;try{B="localStorage"in window&&window.localStorage!==null}catch(C){B=!1}var D,E=!0,F,G=!1,H=[],I=function(a){function b(){localStorage.setItem(document.location.href+".gui",JSON.stringify(d.getSaveObject()))}function c(){var a=d.getRoot();a.width+=1,o.defer(function(){a.width-=1})}var d=this;this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),n.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],a=a||{},a=o.defaults(a,{autoPlace:!0,width:I.DEFAULT_WIDTH}),a=o.defaults(a,{resizable:a.autoPlace,hideable:a.autoPlace}),o.isUndefined(a.load)?a.load={preset:A}:a.preset&&(a.load.preset=a.preset),o.isUndefined(a.parent)&&a.hideable&&H.push(this),a.resizable=o.isUndefined(a.parent)&&a.resizable,a.autoPlace&&o.isUndefined(a.scrollable)&&(a.scrollable=!0);var e=B&&localStorage.getItem(document.location.href+".isLocal")==="true";Object.defineProperties(this,{parent:{get:function(){return a.parent}},scrollable:{get:function(){return a.scrollable}},autoPlace:{get:function(){return a.autoPlace}},preset:{get:function(){return d.parent?d.getRoot().preset:a.load.preset},set:function(b){d.parent?d.getRoot().preset=b:a.load.preset=b;for(b=0;b<this.__preset_select.length;b++)this.__preset_select[b].value==this.preset&&(this.__preset_select.selectedIndex=b);d.revert()}},width:{get:function(){return a.width},set:function(b){a.width=b,v(d,b)}},name:{get:function(){return a.name},set:function(b){a.name=b,g&&(g.innerHTML=a.name)}},closed:{get:function(){return a.closed},set:function(b){a.closed=b,a.closed?n.addClass(d.__ul,I.CLASS_CLOSED):n.removeClass(d.__ul,I.CLASS_CLOSED),this.onResize(),d.__closeButton&&(d.__closeButton.innerHTML=b?I.TEXT_OPEN:I.TEXT_CLOSED)}},load:{get:function(){return a.load}},useLocalStorage:{get:function(){return e},set:function(a){B&&((e=a)?n.bind(window,"unload",b):n.unbind(window,"unload",b),localStorage.setItem(document.location.href+".isLocal",a))}}});if(o.isUndefined(a.parent)){a.closed=!1,n.addClass(this.domElement,I.CLASS_MAIN),n.makeSelectable(this.domElement,!1);if(B&&e){d.useLocalStorage=!0;var f=localStorage.getItem(document.location.href+".gui");f&&(a.load=JSON.parse(f))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=I.TEXT_CLOSED,n.addClass(this.__closeButton,I.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),n.bind(this.__closeButton,"click",function(){d.closed=!d.closed})}else{a.closed===void 0&&(a.closed=!0);var g=document.createTextNode(a.name);n.addClass(g,"controller-name"),f=q(d,g),n.addClass(this.__ul,I.CLASS_CLOSED),n.addClass(f,"title"),n.bind(f,"click",function(a){return a.preventDefault(),d.closed=!d.closed,!1}),a.closed||(this.closed=!1)}a.autoPlace&&(o.isUndefined(a.parent)&&(E&&(F=document.createElement("div"),n.addClass(F,"dg"),n.addClass(F,I.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(F),E=!1),F.appendChild(this.domElement),n.addClass(this.domElement,I.CLASS_AUTO_PLACE)),this.parent||v(d,a.width)),n.bind(window,"resize",function(){d.onResize()}),n.bind(this.__ul,"webkitTransitionEnd",function(){d.onResize()}),n.bind(this.__ul,"transitionend",function(){d.onResize()}),n.bind(this.__ul,"oTransitionEnd",function(){d.onResize()}),this.onResize(),a.resizable&&u(this),d.getRoot(),a.parent||c()};return I.toggleHide=function(){G=!G,o.each(H,function(a){a.domElement.style.zIndex=G?-999:999,a.domElement.style.opacity=G?0:1})},I.CLASS_AUTO_PLACE="a",I.CLASS_AUTO_PLACE_CONTAINER="ac",I.CLASS_MAIN="main",I.CLASS_CONTROLLER_ROW="cr",I.CLASS_TOO_TALL="taller-than-window",I.CLASS_CLOSED="closed",I.CLASS_CLOSE_BUTTON="close-button",I.CLASS_DRAG="drag",I.DEFAULT_WIDTH=245,I.TEXT_CLOSED="Close Controls",I.TEXT_OPEN="Open Controls",n.bind(window,"keydown",function(a){document.activeElement.type!=="text"&&(a.which===72||a.keyCode==72)&&I.toggleHide()},!1),o.extend(I.prototype,{add:function(a,b){return p(this,a,b,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(a,b){return p(this,a,b,{color:!0})},remove:function(a){this.__ul.removeChild(a.__li),this.__controllers.slice(this.__controllers.indexOf(a),1);var b=this;o.defer(function(){b.onResize()})},destroy:function(){this.autoPlace&&F.removeChild(this.domElement)},addFolder:function(a){if(this.__folders[a]!==void 0)throw Error('You already have a folder in this GUI by the name "'+a+'"');var b={name:a,parent:this};return b.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[a]&&(b.closed=this.load.folders[a].closed,b.load=this.load.folders[a]),b=new I(b),this.__folders[a]=b,a=q(this,b.domElement),n.addClass(a,"folder"),b},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var a=this.getRoot();if(a.scrollable){var b=n.getOffset(a.__ul).top,c=0;o.each(a.__ul.childNodes,function(b){a.autoPlace&&b===a.__save_row||(c+=n.getHeight(b))}),window.innerHeight-b-20<c?(n.addClass(a.domElement,I.CLASS_TOO_TALL),a.__ul.style.height=window.innerHeight-b-20+"px"):(n.removeClass(a.domElement,I.CLASS_TOO_TALL),a.__ul.style.height="auto")}a.__resize_handle&&o.defer(function(){a.__resize_handle.style.height=a.__ul.offsetHeight+"px"}),a.__closeButton&&(a.__closeButton.style.width=a.width+"px")},remember:function(){o.isUndefined(D)&&(D=new m,D.domElement.innerHTML=b);if(this.parent)throw Error("You can only call remember on a top level GUI.");var a=this;o.each(Array.prototype.slice.call(arguments),function(b){a.__rememberedObjects.length==0&&t(a),a.__rememberedObjects.indexOf(b)==-1&&a.__rememberedObjects.push(b)}),this.autoPlace&&v(this,this.width)},getRoot:function(){for(var a=this;a.parent;)a=a.parent;return a},getSaveObject:function(){var a=this.load;return a.closed=this.closed,this.__rememberedObjects.length>0&&(a.preset=this.preset,a.remembered||(a.remembered={}),a.remembered[this.preset]=w(this)),a.folders={},o.each(this.__folders,function(b,c){a.folders[c]=b.getSaveObject()}),a},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=w(this),y(this,!1)},saveAs:function(a){this.load.remembered||(this.load.remembered={},this.load.remembered[A]=w(this,!0)),this.load.remembered[a]=w(this),this.preset=a,x(this,a,!0)},revert:function(a){o.each(this.__controllers,function(b){this.getRoot().load.remembered?s(a||this.getRoot(),b):b.setValue(b.initialValue)},this),o.each(this.__folders,function(a){a.revert(a)}),a||y(this.getRoot(),!1)},listen:function(a){var b=this.__listening.length==0;this.__listening.push(a),b&&z(this.__listening)}}),I}(dat.utils.css,'<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>',".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save ul{margin-top:27px}.dg.a.has-save ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height 0.1s ease-out;-o-transition:height 0.1s ease-out;-moz-transition:height 0.1s ease-out;transition:height 0.1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li > *{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n",dat.controllers.factory=function(a,b,c,d,e,f,g){return function(h,i,j,k){var l=h[i];if(g.isArray(j)||g.isObject(j))return new a(h,i,j);if(g.isNumber(l))return g.isNumber(j)&&g.isNumber(k)?new c(h,i,j,k):new b(h,i,{min:j,max:k});if(g.isString(l))return new d(h,i);if(g.isFunction(l))return new e(h,i,"");if(g.isBoolean(l))return new f(h,i)}}(dat.controllers.OptionController,dat.controllers.NumberControllerBox,dat.controllers.NumberControllerSlider,dat.controllers.StringController=function(a,b,c){var d=function(a,c){function e(){f.setValue(f.__input.value)}d.superclass.call(this,a,c);var f=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),b.bind(this.__input,"keyup",e),b.bind(this.__input,"change",e),b.bind(this.__input,"blur",function(){f.__onFinishChange&&f.__onFinishChange.call(f,f.getValue())}),b.bind(this.__input,"keydown",function(a){a.keyCode===13&&this.blur()}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return d.superclass=a,c.extend(d.prototype,a.prototype,{updateDisplay:function(){return b.isActive(this.__input)||(this.__input.value=this.getValue()),d.superclass.prototype.updateDisplay.call(this)}}),d}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.FunctionController,dat.controllers.BooleanController,dat.utils.common),dat.controllers.Controller,dat.controllers.BooleanController,dat.controllers.FunctionController,dat.controllers.NumberControllerBox,dat.controllers.NumberControllerSlider,dat.controllers.OptionController,dat.controllers.ColorController=function(a,b,c,d,e){function f(a,b,c,d){a.style.background="",e.each(i,function(e){a.style.cssText+="background: "+e+"linear-gradient("+b+", "+c+" 0%, "+d+" 100%); "})}function g(a){a.style.background="",a.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",a.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",a.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",a.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",a.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var h=function(a,i){function j(a){o(a),b.bind(window,"mousemove",o),b.bind(window,"mouseup",k)}function k(){b.unbind(window,"mousemove",o),b.unbind(window,"mouseup",k)}function l(){var a=d(this.value);a!==!1?(q.__color.__state=a,q.setValue(q.__color.toOriginal())):this.value=q.__color.toString()}function m(){b.unbind(window,"mousemove",p),b.unbind(window,"mouseup",m)}function o(a){a.preventDefault();var c=b.getWidth(q.__saturation_field),d=b.getOffset(q.__saturation_field),e=(a.clientX-d.left+document.body.scrollLeft)/c,a=1-(a.clientY-d.top+document.body.scrollTop)/c;return a>1?a=1:a<0&&(a=0),e>1?e=1:e<0&&(e=0),q.__color.v=a,q.__color.s=e,q.setValue(q.__color.toOriginal()),!1}function p(a){a.preventDefault();var c=b.getHeight(q.__hue_field),d=b.getOffset(q.__hue_field),a=1-(a.clientY-d.top+document.body.scrollTop)/c;return a>1?a=1:a<0&&(a=0),q.__color.h=a*360,q.setValue(q.__color.toOriginal()),!1}h.superclass.call(this,a,i),this.__color=new c(this.getValue()),this.__temp=new c(0);var q=this;this.domElement=document.createElement("div"),b.makeSelectable(this.domElement,!1),this.__selector=document.createElement("div"),this.__selector.className="selector",this.__saturation_field=document.createElement("div"),this.__saturation_field.className="saturation-field",this.__field_knob=document.createElement("div"),this.__field_knob.className="field-knob",this.__field_knob_border="2px solid ",this.__hue_knob=document.createElement("div"),this.__hue_knob.className="hue-knob",this.__hue_field=document.createElement("div"),this.__hue_field.className="hue-field",this.__input=document.createElement("input"),this.__input.type="text",this.__input_textShadow="0 1px 1px ",b.bind(this.__input,"keydown",function(a){a.keyCode===13&&l.call(this)}),b.bind(this.__input,"blur",l),b.bind(this.__selector,"mousedown",function(){b.addClass(this,"drag").bind(window,"mouseup",function(){b.removeClass(q.__selector,"drag")})});var r=document.createElement("div");e.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),e.extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(this.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),e.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),e.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),e.extend(r.style,{width:"100%",height:"100%",background:"none"}),f(r,"top","rgba(0,0,0,0)","#000"),e.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"}),g(this.__hue_field),e.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"}),b.bind(this.__saturation_field,"mousedown",j),b.bind(this.__field_knob,"mousedown",j),b.bind(this.__hue_field,"mousedown",function(a){p(a),b.bind(window,"mousemove",p),b.bind(window,"mouseup",m)}),this.__saturation_field.appendChild(r),this.__selector.appendChild(this.__field_knob),this.__selector.appendChild(this.__saturation_field),this.__selector.appendChild(this.__hue_field),this.__hue_field.appendChild(this.__hue_knob),this.domElement.appendChild(this.__input),this.domElement.appendChild(this.__selector),this.updateDisplay()};h.superclass=a,e.extend(h.prototype,a.prototype,{updateDisplay:function(){var a=d(this.getValue());if(a!==!1){var b=!1;e.each(c.COMPONENTS,function(c){if(!e.isUndefined(a[c])&&!e.isUndefined(this.__color.__state[c])&&a[c]!==this.__color.__state[c])return b=!0,{}},this),b&&e.extend(this.__color.__state,a)}e.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var g=this.__color.v<.5||this.__color.s>.5?255:0,h=255-g;e.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+g+","+g+","+g+")"}),this.__hue_knob.style.marginTop=(1-this.__color.h/360)*100+"px",this.__temp.s=1,this.__temp.v=1,f(this.__saturation_field,"left","#fff",this.__temp.toString()),e.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+g+","+g+","+g+")",textShadow:this.__input_textShadow+"rgba("+h+","+h+","+h+",.7)"})}});var i=["-moz-","-o-","-webkit-","-ms-",""];return h}(dat.controllers.Controller,dat.dom.dom,dat.color.Color=function(a,b,c,d){function e(a,b,c){Object.defineProperty(a,b,{get:function(){return this.__state.space==="RGB"?this.__state[b]:(g(this,b,c),this.__state[b])},set:function(a){this.__state.space!=="RGB"&&(g(this,b,c),this.__state.space="RGB"),this.__state[b]=a}})}function f(a,b){Object.defineProperty(a,b,{get:function(){return this.__state.space==="HSV"?this.__state[b]:(h(this),this.__state[b])},set:function(a){this.__state.space!=="HSV"&&(h(this),this.__state.space="HSV"),this.__state[b]=a}})}function g(a,c,e){if(a.__state.space==="HEX")a.__state[c]=b.component_from_hex(a.__state.hex,e);else if(a.__state.space==="HSV")d.extend(a.__state,b.hsv_to_rgb(a.__state.h,a.__state.s,a.__state.v));else throw"Corrupted color state"}function h(a){var c=b.rgb_to_hsv(a.r,a.g,a.b);d.extend(a.__state,{s:c.s,v:c.v}),d.isNaN(c.h)?d.isUndefined(a.__state.h)&&(a.__state.h=0):a.__state.h=c.h}var i=function(){this.__state=a.apply(this,arguments);if(this.__state===!1)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};return i.COMPONENTS="r,g,b,h,s,v,hex,a".split(","),d.extend(i.prototype,{toString:function(){return c(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),e(i.prototype,"r",2),e(i.prototype,"g",1),e(i.prototype,"b",0),f(i.prototype,"h"),f(i.prototype,"s"),f(i.prototype,"v"),Object.defineProperty(i.prototype,"a",{get:function(){return this.__state.a},set:function(a){this.__state.a=a}}),Object.defineProperty(i.prototype,"hex",{get:function(){return!this.__state.space!=="HEX"&&(this.__state.hex=b.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(a){this.__state.space="HEX",this.__state.hex=a}}),i}(dat.color.interpret,dat.color.math=function(){var a;return{hsv_to_rgb:function(a,b,c){var d=a/60-Math.floor(a/60),e=c*(1-b),f=c*(1-d*b),b=c*(1-(1-d)*b),a=[[c,b,e],[f,c,e],[e,c,b],[e,f,c],[b,e,c],[c,e,f]][Math.floor(a/60)%6];return{r:a[0]*255,g:a[1]*255,b:a[2]*255}},rgb_to_hsv:function(a,b,c){var d=Math.min(a,b,c),e=Math.max(a,b,c),d=e-d;return e==0?{h:NaN,s:0,v:0}:(a=a==e?(b-c)/d:b==e?2+(c-a)/d:4+(a-b)/d,a/=6,a<0&&(a+=1),{h:a*360,s:d/e,v:e/255})},rgb_to_hex:function(a,b,c){return a=this.hex_with_component(0,2,a),a=this.hex_with_component(a,1,b),a=this.hex_with_component(a,0,c)},component_from_hex:function(a,b){return a>>b*8&255},hex_with_component:function(b,c,d){return d<<(a=c*8)|b&~(255<<a)}}}(),dat.color.toString,dat.utils.common),dat.color.interpret,dat.utils.common),dat.utils.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}(),dat.dom.CenteredDiv=function(a,b){var c=function(){this.backgroundElement=document.createElement("div"),b.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear"}),a.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),b.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var c=this;a.bind(this.backgroundElement,"click",function(){c.hide()})};return c.prototype.show=function(){var a=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),b.defer(function(){a.backgroundElement.style.opacity=1,a.domElement.style.opacity=1,a.domElement.style.webkitTransform="scale(1)"})},c.prototype.hide=function(){var b=this,c=function(){b.domElement.style.display="none",b.backgroundElement.style.display="none",a.unbind(b.domElement,"webkitTransitionEnd",c),a.unbind(b.domElement,"transitionend",c),a.unbind(b.domElement,"oTransitionEnd",c)};a.bind(this.domElement,"webkitTransitionEnd",c),a.bind(this.domElement,"transitionend",c),a.bind(this.domElement,"oTransitionEnd",c),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},c.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-a.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-a.getHeight(this.domElement)/2+"px"},c}(dat.dom.dom,dat.utils.common),dat.dom.dom,dat.utils.common),"use strict";var CSSMatrix=function(){var a=[].slice.call(arguments),b=this;if(a.length)for(var c=a.length;c--;)Math.abs(a[c])<CSSMatrix.SMALL_NUMBER&&(a[c]=0);b.setIdentity();if(a.length==16)b.m11=b.a=a[0],b.m12=b.b=a[1],b.m13=a[2],b.m14=a[3],b.m21=b.c=a[4],b.m22=b.d=a[5],b.m23=a[6],b.m24=a[7],b.m31=a[8],b.m32=a[9],b.m33=a[10],b.m34=a[11],b.m41=b.e=a[12],b.m42=b.f=a[13],b.m43=a[14],b.m44=a[15];else if(a.length==6)this.affine=!0,b.m11=b.a=a[0],b.m12=b.b=a[1],b.m14=b.e=a[4],b.m21=b.c=a[2],b.m22=b.d=a[3],b.m24=b.f=a[5];else if(a.length===1&&typeof a[0]=="string")b.setMatrixValue(a[0]);else if(a.length>0)throw new TypeError("Invalid Matrix Value")};CSSMatrix.SMALL_NUMBER=1e-6,CSSMatrix.Rotate=function(a,b,c){a*=Math.PI/180,b*=Math.PI/180,c*=Math.PI/180;var d=Math.cos(a),e=-Math.sin(a),f=Math.cos(b),g=-Math.sin(b),h=Math.cos(c),i=-Math.sin(c),j=new CSSMatrix;return j.m11=j.a=f*h,j.m12=j.b=-f*i,j.m13=g,j.m21=j.c=e*g*h+d*i,j.m22=j.d=d*h-e*g*i,j.m23=-e*f,j.m31=e*i-d*g*h,j.m32=e*h+d*g*i,j.m33=d*f,j},CSSMatrix.RotateAxisAngle=function(a,b,c,d){d*=Math.PI/360;var e=Math.sin(d),f=Math.cos(d),g=e*e,h=Math.sqrt(a*a+b*b+c*c);h===0?(a=0,b=0,c=1):(a/=h,b/=h,c/=h);var i=a*a,j=b*b,k=c*c,l=new CSSMatrix;return l.m11=l.a=1-2*(j+k)*g,l.m12=l.b=2*(a*b*g+c*e*f),l.m13=2*(a*c*g-b*e*f),l.m21=l.c=2*(b*a*g-c*e*f),l.m22=l.d=1-2*(k+i)*g,l.m23=2*(b*c*g+a*e*f),l.m31=2*(c*a*g+b*e*f),l.m32=2*(c*b*g-a*e*f),l.m33=1-2*(i+j)*g,l.m14=l.m24=l.m34=0,l.m41=l.e=l.m42=l.f=l.m43=0,l.m44=1,l},CSSMatrix.ScaleX=function(a){var b=new CSSMatrix;return b.m11=b.a=a,b},CSSMatrix.ScaleY=function(a){var b=new CSSMatrix;return b.m22=b.d=a,b},CSSMatrix.ScaleZ=function(a){var b=new CSSMatrix;return b.m33=a,b},CSSMatrix.Scale=function(a,b,c){var d=new CSSMatrix;return d.m11=d.a=a,d.m22=d.d=b,d.m33=c,d},CSSMatrix.SkewX=function(a){a*=Math.PI/180;var b=new CSSMatrix;return b.m21=b.c=Math.tan(a),b},CSSMatrix.SkewY=function(a){a*=Math.PI/180;var b=new CSSMatrix;return b.m12=b.b=Math.tan(a),b},CSSMatrix.Translate=function(a,b,c){var d=new CSSMatrix;return d.m41=d.e=a,d.m42=d.f=b,d.m43=c,d},CSSMatrix.multiply=function(a,b){var c=b.m11*a.m11+b.m12*a.m21+b.m13*a.m31+b.m14*a.m41,d=b.m11*a.m12+b.m12*a.m22+b.m13*a.m32+b.m14*a.m42,e=b.m11*a.m13+b.m12*a.m23+b.m13*a.m33+b.m14*a.m43,f=b.m11*a.m14+b.m12*a.m24+b.m13*a.m34+b.m14*a.m44,g=b.m21*a.m11+b.m22*a.m21+b.m23*a.m31+b.m24*a.m41,h=b.m21*a.m12+b.m22*a.m22+b.m23*a.m32+b.m24*a.m42,i=b.m21*a.m13+b.m22*a.m23+b.m23*a.m33+b.m24*a.m43,j=b.m21*a.m14+b.m22*a.m24+b.m23*a.m34+b.m24*a.m44,k=b.m31*a.m11+b.m32*a.m21+b.m33*a.m31+b.m34*a.m41,l=b.m31*a.m12+b.m32*a.m22+b.m33*a.m32+b.m34*a.m42,m=b.m31*a.m13+b.m32*a.m23+b.m33*a.m33+b.m34*a.m43,n=b.m31*a.m14+b.m32*a.m24+b.m33*a.m34+b.m34*a.m44,o=b.m41*a.m11+b.m42*a.m21+b.m43*a.m31+b.m44*a.m41,p=b.m41*a.m12+b.m42*a.m22+b.m43*a.m32+b.m44*a.m42,q=b.m41*a.m13+b.m42*a.m23+b.m43*a.m33+b.m44*a.m43,r=b.m41*a.m14+b.m42*a.m24+b.m43*a.m34+b.m44*a.m44;return new CSSMatrix(c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r)},CSSMatrix.prototype.setMatrixValue=function(a){a=String(a).trim();var b=this;b.setIdentity();if(a=="none")return b;var c=a.slice(0,a.indexOf("(")),d,e;if(c=="matrix3d"){d=a.slice(9,-1).split(",");for(e=d.length;e--;)d[e]=parseFloat(d[e]);b.m11=b.a=d[0],b.m12=b.b=d[1],b.m13=d[2],b.m14=d[3],b.m21=b.c=d[4],b.m22=b.d=d[5],b.m23=d[6],b.m24=d[7],b.m31=d[8],b.m32=d[9],b.m33=d[10],b.m34=d[11],b.m41=b.e=d[12],b.m42=b.f=d[13],b.m43=d[14],b.m44=d[15]}else{if(c!="matrix")throw new TypeError("Invalid Matrix Value");b.affine=!0,d=a.slice(7,-1).split(",");for(e=d.length;e--;)d[e]=parseFloat(d[e]);b.m11=b.a=d[0],b.m12=b.b=d[2],b.m41=b.e=d[4],b.m21=b.c=d[1],b.m22=b.d=d[3],b.m42=b.f=d[5]}return b},CSSMatrix.prototype.multiply=function(a){return CSSMatrix.multiply(this,a)},CSSMatrix.prototype.inverse=function(){throw new Error("the inverse() method is not implemented (yet).")},CSSMatrix.prototype.translate=function(a,b,c){return c==null&&(c=0),CSSMatrix.multiply(this,CSSMatrix.Translate(a,b,c))},CSSMatrix.prototype.scale=function(a,b,c){return b==null&&(b=a),c==null&&(c=1),CSSMatrix.multiply(this,CSSMatrix.Scale(a,b,c))},CSSMatrix.prototype.rotate=function(a,b,c){return b==null&&(b=a),c==null&&(c=a),CSSMatrix.multiply(this,CSSMatrix.Rotate(a,b,c))},CSSMatrix.prototype.rotateAxisAngle=function(a,b,c,d){return b==null&&(b=a),c==null&&(c=a),CSSMatrix.multiply(this,CSSMatrix.RotateAxisAngle(a,b,c,d))},CSSMatrix.prototype.skewX=function(a){return CSSMatrix.multiply(this,CSSMatrix.SkewX(a))},CSSMatrix.prototype.skewY=function(a){return CSSMatrix.multiply(this,CSSMatrix.SkewY(a))},CSSMatrix.prototype.toString=function(){var a=this;return this.affine?"matrix("+[a.a,a.b,a.c,a.d,a.e,a.f].join(", ")+")":"matrix3d("+[a.m11,a.m12,a.m13,a.m14,a.m21,a.m22,a.m23,a.m24,a.m31,a.m32,a.m33,a.m34,a.m41,a.m42,a.m43,a.m44].join(", ")+")"},CSSMatrix.prototype.setIdentity=function(){var a=this;return a.m11=a.a=1,a.m12=a.b=0,a.m13=0,a.m14=0,a.m21=a.c=0,a.m22=a.d=1,a.m23=0,a.m24=0,a.m31=0,a.m32=0,a.m33=1,a.m34=0,a.m41=a.e=0,a.m42=a.f=0,a.m43=0,a.m44=1,this},CSSMatrix.prototype.transform=function(a){var b=this,c=b.m11*a.x+b.m12*a.y+b.m13*a.z+b.m14*a.w,d=b.m21*a.x+b.m22*a.y+b.m23*a.z+b.m24*a.w,e=b.m31*a.x+b.m32*a.y+b.m33*a.z+b.m34*a.w,f=b.m41*a.x+b.m42*a.y+b.m43*a.z+b.m44*a.w;return a.x=c/f,a.y=d/f,a.z=e/f,a},CSSMatrix.prototype.toFullString=function(){var a=this;return[[a.m11,a.m12,a.m13,a.m14].join(", "),[a.m21,a.m22,a.m23,a.m24].join(", "),[a.m31,a.m32,a.m33,a.m34].join(", "),[a.m41,a.m42,a.m43,a.m44].join(", ")].join("\n")};var Tween=function(a){this.onEnd=null,this.onBegin=null,this.onAnimate=null,this.delay=0,this.node=null,this.duration=0,this.isAnimating=!1,this.isReversed=!1,this.isPaused=!1,this.isControlled=!1,this.properties=null,this.curve=[0,1],this.easing=Tween.Easing.Quad.easeOut,this._previousTime=null,this._currentTime=null,this._startTime=0,this._endTime=null,this._delta=null,this._t=0,this._motionStack=null;if(a){for(key in a)this[key]=a[key];this._initProperties()}this._t=-this.delay};Tween.prototype={_initProperties:function(){this._motionStack==null&&(this._motionStack=[],this.properties!=null?this._setMotionFromProperty():this._setMotionFromCurve())},_callbacks:{onEnd:[],onBegin:[],onComplete:[]},_setMotionFromCurve:function(){var a=this.curve;if(a instanceof Tween.Line==0){var b=new MotionObject;b.d=this.duration,b.b=a[0],b.c=a[1]-a[0],this._motionStack.push(b)}else{var c=a.curves[0],d=a.curves[1];for(var e=0;e<c.length;++e){var b=new MotionObject;b.b=c[e],b.c=d[e]-c[e],this._motionStack.push(b)}}},_setMotionFromProperty:function(){for(var a in this.properties){var b=new MotionObject;b.prop=a;var c=this.properties[a];if(typeof c=="object")for(_p in c)_p=="begin"&&(b.b=c[_p]),_p=="end"&&(b.c=c[_p]-b.b),_p=="unit"&&(b.unit=c[_p]);else this.change=c-this.begin;this._motionStack.push(b)}},_start:function(){this._currentTime=0,this._startTime=this.delay,this._endTime=this.delay==0?this.duration:this.duration,this.onBegin!=null&&this.onBegin(),this._previousTime=Date.now(),this.isAnimating=!0;var a=this;a._update()},_step:function(){this._currentTime=Date.now(),this._delta=this._currentTime-this._previousTime,this._delta=Math.min(this._delta,25);if(!this.isReversed)if(this._t+this._delta<this._endTime){this._t=this._delta+this._t,this.isControlled||this._update();if(this._t<0)return;this._setProperties()}else{this._t=this.duration,this._setProperties();if(this._callbacks.onComplete.length>0)for(var a in this._callbacks.onComplete)aCallback=this._callbacks.onComplete[a],aCallback();this._stop()}else this._t>0?(this._t=this._t-this._delta>0?this._t-this._delta:0,this._update(),this._setProperties()):this._stop();this._previousTime=this._currentTime},_setProperties:function(){for(var a in this._motionStack){var b=this._motionStack[a];if(b.prop!=null){this.node.style[b.prop]=this.easing(this._t,b.b,b.c,this._endTime)+b.unit;if(this.onAnimate!=null)var c=this.easing(this._t,0,1,this.duration)}else if(this._motionStack.length==1)var c=this.easing(this._t,b.b,b.c,this.duration);else{var c=[];for(b in this._motionStack){var d=this._motionStack[b];c.push(this.easing(this._t,d.b,d.c,this.duration))}}this.onAnimate!=null&&this.onAnimate(c,this)}},_stop:function(){this.isAnimating=!1,this.onEnd!=null&&!this.isPaused&&this.onEnd()},_update:function(a){var b=this;this.isAnimating==1&&requestAnimationFrame(function(){b._step()})},goToPercentage:function(a){if(this._t==a)return;this.isAnimating=!1,this._t=a,this._setProperties()},getStartTime:function(){return this._startTime+this.delay},setStartTime:function(a){this._startTime=a,this._endTime=this._startTime+this.duration},getEndTime:function(){return this._startTime+this.duration},reverse:function(){this.isReversed=this.isReversed==0?this.isReversed=!0:this.isReversed=!1},resume:function(){if(!this.isPaused)return;this._delta=0,this._previousTime=Date.now(),this.isPaused=!1,this.isAnimating=!0,this._update()},pause:function(){if(this.isAnimating==0)return;this.isAnimating=!1,this.isPaused=!0,this._step()},play:function(a){if(a)for(key in a)this[key]=a[key];this._initProperties(),this._start()},getValue:function(){return this._t}},Tween.Line=function(a,b){if(a.length!=b.length)throw new Error("Uneven Amount of Lines "+a.length+" != "+b.length);this.curves=[a,b]},Tween.Line.prototype.toConstructorString=function(){return"new Tween.Line(["+this.curves[0].toString()+"],["+this.curves[1].toString()+"])"},Tween.Easing={Back:{easeIn:function(a,b,c,d,e){return e==undefined&&(e=1.70158),c*(a/=d)*a*((e+1)*a-e)+b},easeOut:function(a,b,c,d,e){return e==undefined&&(e=1.70158),c*((a=a/d-1)*a*((e+1)*a+e)+1)+b},easeInOut:function(a,b,c,d,e){return e==undefined&&(e=1.70158),(a/=d/2)<1?c/2*a*a*(((e*=1.525)+1)*a-e)+b:c/2*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)+b}},Bounce:{easeOut:function(a,b,c,d){return(a/=d)<1/2.75?c*7.5625*a*a+b:a<2/2.75?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:a<2.5/2.75?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+.984375)+b},easeIn:function(a,b,c,d){return easeOut=function(a,b,c,d){return(a/=d)<1/2.75?c*7.5625*a*a+b:a<2/2.75?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:a<2.5/2.75?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+.984375)+b},c-easeOut(d-a,0,c,d)+b},easeInOut:function(a,b,c,d){return easeOut=function(a,b,c,d){return(a/=d)<1/2.75?c*7.5625*a*a+b:a<2/2.75?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:a<2.5/2.75?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+.984375)+b},a<d/2?easeOut(a*2,0,c,d)*.5+b:easeOut(a*2-d,0,c,d)*.5+c*.5+b}},Circ:{easeIn:function(a,b,c,d){return c*(a/=d)*a*a+b},easeOut:function(a,b,c,d){return c*((a=a/d-1)*a*a+1)+b},easeInOut:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a+b:c/2*((a-=2)*a*a+2)+b}},Cubic:{easeIn:function(a,b,c,d){return c*(a/=d)*a*a+b},easeOut:function(a,b,c,d){return c*((a=a/d-1)*a*a+1)+b},easeInOut:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a+b:c/2*((a-=2)*a*a+2)+b}},Elastic:{easeIn:function(a,b,c,d,e,f){if(a==0)return b;if((a/=d)==1)return b+c;f||(f=d*.3);if(!e||e<Math.abs(c)){e=c;var g=f/4}else var g=f/(2*Math.PI)*Math.asin(c/e);return-(e*Math.pow(2,10*(a-=1))*Math.sin((a*d-g)*2*Math.PI/f))+b},easeOut:function(a,b,c,d,e,f){if(a==0)return b;if((a/=d)==1)return b+c;f||(f=d*.3);if(!e||e<Math.abs(c)){e=c;var g=f/4}else var g=f/(2*Math.PI)*Math.asin(c/e);return e*Math.pow(2,-10*a)*Math.sin((a*d-g)*2*Math.PI/f)+c+b},easeInOut:function(a,b,c,d,e,f){if(a==0)return b;if((a/=d/2)==2)return b+c;f||(f=d*.3*1.5);if(!e||e<Math.abs(c)){e=c;var g=f/4}else var g=f/(2*Math.PI)*Math.asin(c/e);return a<1?-0.5*e*Math.pow(2,10*(a-=1))*Math.sin((a*d-g)*2*Math.PI/f)+b:e*Math.pow(2,-10*(a-=1))*Math.sin((a*d-g)*2*Math.PI/f)*.5+c+b}},Expo:{easeIn:function(a,b,c,d){return a==0?b:c*Math.pow(2,10*(a/d-1))+b},easeOut:function(a,b,c,d){return a==d?b+c:c*(-Math.pow(2,-10*a/d)+1)+b},easeInOut:function(a,b,c,d){return a==0?b:a==d?b+c:(a/=d/2)<1?c/2*Math.pow(2,10*(a-1))+b:c/2*(-Math.pow(2,-10*--a)+2)+b}},Linear:{easeNone:function(a,b,c,d){return c*a/d+b},easeIn:function(a,b,c,d){return c*a/d+b},easeOut:function(a,b,c,d){return c*a/d+b},easeInOut:function(a,b,c,d){return c*a/d+b}},Quad:{easeIn:function(a,b,c,d){return c*(a/=d)*a+b},easeOut:function(a,b,c,d){return-c*(a/=d)*(a-2)+b},easeInOut:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b}},Quart:{easeIn:function(a,b,c,d){return c*(a/=d)*a*a*a+b},easeOut:function(a,b,c,d){return-c*((a=a/d-1)*a*a*a-1)+b},easeInOut:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a+b:-c/2*((a-=2)*a*a*a-2)+b}},Quint:{easeIn:function(a,b,c,d){return c*(a/=d)*a*a*a*a+b},easeOut:function(a,b,c,d){return c*((a=a/d-1)*a*a*a*a+1)+b},easeInOut:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a*a+b:c/2*((a-=2)*a*a*a*a+2)+b}},getTweenConstructor:function(a){var b="Tween.Easing";for(var c in Tween.Easing)for(var d in Tween.Easing[c])if(Tween.Easing[c][d].toString()==a)return b+"."+c+"."+d;return null}},function(){var a=0,b=["ms","moz","webkit","o"];for(var c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b,c){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=window.setTimeout(function(){b(d+e)},e);return a=d+e,f}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}();var Timeline=function(a){this.currentframe=0,this._prevTime=-1,this.callbacks=[],this._tween=new Tween,this.duration=a.duration,this.scene=null,this._setup(),this._head=this._tail=null};Timeline.prototype={_isMouseDown:!1,_tween:null,_currentPercentage:1,_prevTime:-1,_name:null,callbacks:[],clearTweens:function(){this.callbacks=[],this._head=null,this._tail=null},_head:null,_tail:null,_setup:function(){this._tween.easing=Tween.Easing.Linear.easeNone,this._tween.duration=this.duration,this._tween.curve=[0,this.duration],this._tween._initProperties(),this.onComplete=function(){};var a=this;this._tween.onAnimate=function(b){b==a.duration&&a.onComplete(),a._step(b);for(var c in a.callbacks)a.callbacks[c](b)}},start:function(){this._tween.play()},_step:function(a){this._prevTime<a?this._stepForward(a):this._stepBackward(a),this._prevTime=a},_stepForward:function(a){var b=this._head;while(b){var c=b;b=c._next,a>c.startTime&&a<c.endTime?c.tween.goToPercentage(a-c.startTime):a>c.endTime&&c.tween.goToPercentage(c.tween.duration)}},_stepBackward:function(a){var b=this._tail;while(b){var c=b;b=c._prev,a>c.startTime&&a<c.endTime?c.tween.goToPercentage(a-c.startTime):a<c.startTime&&c.tween.goToPercentage(0)}},registerTween:function(a){var b=new Timeline.TweenObject({startTime:a.getStartTime(),endTime:a.getEndTime(),tween:a});b.tween.parent=this;if(!this._head){this._insertBeginning(b);return}var c=this._head;while(c){var d=c;c=d._next;if(d.startTime>b.startTime){this._insertBefore(d,b),this.outputTimes();return}}this._insertEnd(b)},_insertAfter:function(a,b){b._prev=a,b._next=a._next,a._next==null?this._tail=b:a._next._prev=b,a._next=b},_insertBefore:function(a,b){b._prev=a._prev,b._next=a,a._prev==null?this._head=b:a._prev._next=b,a._prev=b},_insertBeginning:function(a){this._head==null?this._head=this._tail=a:this._insertBefore(this._head,a)},_insertEnd:function(a){this._tail==null?this._insertBeginning(a):this._insertAfter(this._tail,a)},outputTimes:function(){return;var a,b},getRootTween:function(){return this._tween}};var TweenObject=function(){Timeline.TweenObject=function(a){this.startTime=Timeline.TweenObject.prototype.startTime,this.duration=Timeline.TweenObject.prototype.duration,this.isPlaying=Timeline.TweenObject.prototype.isPlaying,this.tween=null,this._next=this._prev=null;if(a)for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b])},Timeline.TweenObject.prototype={startTime:0,duration:0,isPlaying:!1,isControlled:!1,tween:0,_next:null,_prev:null}}();!function(){if(this.SVG=function(a){return SVG.supported?new SVG.Doc(a):void 0},SVG.ns="http://www.w3.org/2000/svg",SVG.xlink="http://www.w3.org/1999/xlink",SVG.did=1e3,SVG.eid=function(a){return"Svgjs"+a.charAt(0).toUpperCase()+a.slice(1)+SVG.did++},SVG.create=function(a){var b=document.createElementNS(this.ns,a);return b.setAttribute("id",this.eid(a)),b},SVG.extend=function(){var a,b,c,d;for(a=[].slice.call(arguments),b=a.pop(),d=a.length-1;d>=0;d--)if(a[d])for(c in b)a[d].prototype[c]=b[c];SVG.Set&&SVG.Set.inherit&&SVG.Set.inherit()},SVG.get=function(a){var b=document.getElementById(a);return b?b.instance:void 0},SVG.supported=function(){return!!document.createElementNS&&!!document.createElementNS(SVG.ns,"svg").createSVGRect}(),!SVG.supported)return!1;SVG.regex={test:function(a,b){return this[b].test(a)},unit:/^(-?[\d\.]+)([a-z%]{0,2})$/,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isStyle:/^font|text|leading|cursor/,isBlank:/^(\s+)?$/,isNumber:/^-?[\d\.]+$/,isPercent:/^-?[\d\.]+%$/},SVG.defaults={matrix:"1 0 0 1 0 0",attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000"},trans:function(){return{x:0,y:0,scaleX:1,scaleY:1,rotation:0,skewX:0,skewY:0,matrix:this.matrix,a:1,b:0,c:0,d:1,e:0,f:0}}},SVG.Color=function(a){var b;this.r=0,this.g=0,this.b=0,"string"==typeof a?SVG.regex.isRgb.test(a)?(b=SVG.regex.rgb.exec(a.replace(/\s/g,"")),this.r=parseInt(b[1]),this.g=parseInt(b[2]),this.b=parseInt(b[3])):SVG.regex.isHex.test(a)&&(b=SVG.regex.hex.exec(this._fullHex(a)),this.r=parseInt(b[1],16),this.g=parseInt(b[2],16),this.b=parseInt(b[3],16)):"object"==typeof a&&(this.r=a.r,this.g=a.g,this.b=a.b)},SVG.extend(SVG.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+this._compToHex(this.r)+this._compToHex(this.g)+this._compToHex(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return.3*(this.r/255)+.59*(this.g/255)+.11*(this.b/255)},_fullHex:function(a){return 4==a.length?["#",a.substring(1,2),a.substring(1,2),a.substring(2,3),a.substring(2,3),a.substring(3,4),a.substring(3,4)].join(""):a},_compToHex:function(a){var b=a.toString(16);return 1==b.length?"0"+b:b}}),SVG.Color.test=function(a){return a+="",SVG.regex.isHex.test(a)||SVG.regex.isRgb.test(a)},SVG.Color.isRgb=function(a){return a&&"number"==typeof a.r},SVG.Number=function(a){switch(this.value=0,this.unit="",typeof a){case"number":this.value=a;break;case"string":var b=a.match(SVG.regex.unit);b&&(this.value=parseFloat(b[1]),"%"==b[2]&&(this.value/=100),this.unit=b[2]);break;default:a instanceof SVG.Number&&(this.value=a.value,this.unit=a.unit)}},SVG.extend(SVG.Number,{toString:function(){return("%"==this.unit?~~(100*this.value):this.value)+this.unit},valueOf:function(){return this.value},to:function(a){return"string"==typeof a&&(this.unit=a),this},plus:function(a){return this.value=this+new SVG.Number(a),this},minus:function(a){return this.plus(-(new SVG.Number(a)))},times:function(a){return this.value=this*new SVG.Number(a),this},divide:function(a){return this.value=this/new SVG.Number(a),this}}),SVG.ViewBox=function(a){var b,c,d,e,f=a.bbox(),g=(a.attr("viewBox")||"").match(/-?[\d\.]+/g);this.x=f.x,this.y=f.y,this.width=a.node.offsetWidth||a.attr("width"),this.height=a.node.offsetHeight||a.attr("height"),g&&(b=parseFloat(g[0]),c=parseFloat(g[1]),d=parseFloat(g[2]),e=parseFloat(g[3]),this.zoom=this.width/this.height>d/e?this.height/e:this.width/d,this.x=b,this.y=c,this.width=d,this.height=e),this.zoom=this.zoom||1},SVG.extend(SVG.ViewBox,{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height}}),SVG.BBox=function(a){var b;if(this.x=0,this.y=0,this.width=0,this.height=0,a){try{b=a.node.getBBox()}catch(c){b={x:a.node.clientLeft,y:a.node.clientTop,width:a.node.clientWidth,height:a.node.clientHeight}}this.x=b.x+a.trans.x,this.y=b.y+a.trans.y,this.width=b.width*a.trans.scaleX,this.height=b.height*a.trans.scaleY}this.cx=this.x+this.width/2,this.cy=this.y+this.height/2},SVG.extend(SVG.BBox,{merge:function(a){var b=new SVG.BBox;return b.x=Math.min(this.x,a.x),b.y=Math.min(this.y,a.y),b.width=Math.max(this.x+this.width,a.x+a.width)-b.x,b.height=Math.max(this.y+this.height,a.y+a.height)-b.y,b.cx=b.x+b.width/2,b.cy=b.y+b.height/2,b}}),SVG.RBox=function(a){var b,c,d={};if(this.x=0,this.y=0,this.width=0,this.height=0,a){for(b=a.doc().parent,c=a.doc().viewbox().zoom,d=a.node.getBoundingClientRect(),this.x=d.left,this.y=d.top,this.x-=b.offsetLeft,this.y-=b.offsetTop;b=b.offsetParent;)this.x-=b.offsetLeft,this.y-=b.offsetTop;for(b=a;b=b.parent;)"svg"==b.type&&b.viewbox&&(c*=b.viewbox().zoom,this.x-=b.x()||0,this.y-=b.y()||0)}this.x/=c,this.y/=c,this.width=d.width/=c,this.height=d.height/=c,this.cx=this.x+this.width/2,this.cy=this.y+this.height/2},SVG.Element=function(a){this._stroke=SVG.defaults.attrs.stroke,this.styles={},this.trans=SVG.defaults.trans(),(this.node=a)&&(this.type=a.nodeName,this.node.instance=this)},SVG.extend(SVG.Element,{x:function(a){return a&&(a=new SVG.Number(a),a.value/=this.trans.scaleX),this.attr("x",a)},y:function(a){return a&&(a=new SVG.Number(a),a.value/=this.trans.scaleY),this.attr("y",a)},cx:function(a){return null==a?this.bbox().cx:this.x(a-this.bbox().width/2)},cy:function(a){return null==a?this.bbox().cy:this.y(a-this.bbox().height/2)},move:function(a,b){return this.x(a).y(b)},center:function(a,b){return this.cx(a).cy(b)},size:function(a,b){return this.attr({width:new SVG.Number(a),height:new SVG.Number(b)})},clone:function(){var a,b,c=this.type;return a="rect"==c||"ellipse"==c?this.parent[c](0,0):"line"==c?this.parent[c](0,0,0,0):"image"==c?this.parent[c](this.src):"text"==c?this.parent[c](this.content):"path"==c?this.parent[c](this.attr("d")):"polyline"==c||"polygon"==c?this.parent[c](this.attr("points")):"g"==c?this.parent.group():this.parent[c](),b=this.attr(),delete b.id,a.attr(b),a.trans=this.trans,a.transform({})},remove:function(){return this.parent&&this.parent.removeElement(this),this},doc:function(a){return this._parent(a||SVG.Doc)},attr:function(a,b,c){if(null==a){for(a={},b=this.node.attributes,c=b.length-1;c>=0;c--)a[b[c].nodeName]=SVG.regex.test(b[c].nodeValue,"isNumber")?parseFloat(b[c].nodeValue):b[c].nodeValue;return a}if("object"==typeof a)for(b in a)this.attr(b,a[b]);else if(null===b)this.node.removeAttribute(a);else{if(null==b)return this._isStyle(a)?"text"==a?this.content:"leading"==a&&this.leading?this.leading():this.style(a):(b=this.node.getAttribute(a),null==b?SVG.defaults.attrs[a]:SVG.regex.test(b,"isNumber")?parseFloat(b):b);if("style"==a)return this.style(b);if("x"==a&&Array.isArray(this.lines))for(c=this.lines.length-1;c>=0;c--)this.lines[c].attr(a,b);"stroke-width"==a?this.attr("stroke",parseFloat(b)>0?this._stroke:null):"stroke"==a&&(this._stroke=b),(SVG.Color.test(b)||SVG.Color.isRgb(b))&&(b=new SVG.Color(b)),null!=c?this.node.setAttributeNS(c,a,b.toString()):this.node.setAttribute(a,b.toString()),this._isStyle(a)&&("text"==a?this.text(b):"leading"==a&&this.leading?this.leading(b):this.style(a,b),this.rebuild&&this.rebuild(a,b))}return this},transform:function(a,b){if(0==arguments.length)return this.trans;if("string"==typeof a){if(arguments.length<2)return this.trans[a];var c={};return c[a]=b,this.transform(c)}var c=[];a=this._parseMatrix(a);for(b in a)null!=a[b]&&(this.trans[b]=a[b]);return this.trans.matrix=this.trans.a+" "+this.trans.b+" "+this.trans.c+" "+this.trans.d+" "+this.trans.e+" "+this.trans.f,a=this.trans,a.matrix!=SVG.defaults.matrix&&c.push("matrix("+a.matrix+")"),0!=a.rotation&&c.push("rotate("+a.rotation+" "+(null==a.cx?this.bbox().cx:a.cx)+" "+(null==a.cy?this.bbox().cy:a.cy)+")"),(1!=a.scaleX||1!=a.scaleY)&&c.push("scale("+a.scaleX+" "+a.scaleY+")"),0!=a.skewX&&c.push("skewX("+a.skewX+")"),0!=a.skewY&&c.push("skewY("+a.skewY+")"),(0!=a.x||0!=a.y)&&c.push("translate("+a.x/a.scaleX+" "+a.y/a.scaleY+")"),this._offset&&0!=this._offset.x&&0!=this._offset.y&&c.push("translate("+ -this._offset.x+" "+ -this._offset.y+")"),0==c.length?this.node.removeAttribute("transform"):this.node.setAttribute("transform",c.join(" ")),this},style:function(a,b){if(0==arguments.length)return this.attr("style")||"";if(arguments.length<2)if("object"==typeof a)for(b in a)this.style(b,a[b]);else{if(!SVG.regex.isCss.test(a))return this.styles[a];a=a.split(";");for(var c=0;c<a.length;c++)b=a[c].split(":"),2==b.length&&this.style(b[0].replace(/\s+/g,""),b[1].replace(/^\s+/,"").replace(/\s+$/,""))}else null===b||SVG.regex.test(b,"isBlank")?delete this.styles[a]:this.styles[a]=b;a="";for(b in this.styles)a+=b+":"+this.styles[b]+";";return""==a?this.node.removeAttribute("style"):this.node.setAttribute("style",a),this},data:function(a,b,c){if(arguments.length<2)try{return JSON.parse(this.attr("data-"+a))}catch(d){return this.attr("data-"+a)}else this.attr("data-"+a,null===b?null:c===!0||"string"==typeof b||"number"==typeof b?b:JSON.stringify(b));return this},bbox:function(){return new SVG.BBox(this)},rbox:function(){return new SVG.RBox(this)},inside:function(a,b){var c=this.bbox();return a>c.x&&b>c.y&&a<c.x+c.width&&b<c.y+c.height},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},_parent:function(a){for(var b=this;null!=b&&!(b instanceof a);)b=b.parent;return b},_isStyle:function(a){return"string"==typeof a?SVG.regex.test(a,"isStyle"):!1},_parseMatrix:function(a){if(a.matrix){var b=a.matrix.replace(/\s/g,"").split(",");6==b.length&&(a.a=parseFloat(b[0]),a.b=parseFloat(b[1]),a.c=parseFloat(b[2]),a.d=parseFloat(b[3]),a.e=parseFloat(b[4]),a.f=parseFloat(b[5]))}return a}}),SVG.Container=function(a){this.constructor.call(this,a)},SVG.Container.prototype=new SVG.Element,SVG.extend(SVG.Container,{children:function(){return this._children||(this._children=[])},add:function(a,b){if(!this.has(a)){if(b=null==b?this.children().length:b,a.parent){var c=a.parent.children().indexOf(a);a.parent.children().splice(c,1)}this.children().splice(b,0,a),this.node.insertBefore(a.node,this.node.childNodes[b]||null),a.parent=this}return this._defs&&(this.node.removeChild(this._defs.node),this.node.appendChild(this._defs.node)),this},put:function(a,b){return this.add(a,b),a},has:function(a){return this.children().indexOf(a)>=0},get:function(a){return this.children()[a]},each:function(a,b){var c,d,e=this.children();for(c=0,d=e.length;d>c;c++)e[c]instanceof SVG.Element&&a.apply(e[c],[c,e]),b&&e[c]instanceof SVG.Container&&e[c].each(a,b);return this},removeElement:function(a){var b=this.children().indexOf(a);return this.children().splice(b,1),this.node.removeChild(a.node),a.parent=null,this},defs:function(){return this.doc().defs()},first:function(){return this.children()[0]instanceof SVG.Defs?this.children()[1]:this.children()[0]},last:function(){return this.children()[this.children().length-1]},viewbox:function(a){return 0==arguments.length?new SVG.ViewBox(this):(a=1==arguments.length?[a.x,a.y,a.width,a.height]:[].slice.call(arguments),this.attr("viewBox",a.join(" ")))},clear:function(){for(var a=this.children().length-1;a>=0;a--)this.removeElement(this.children()[a]);return this._defs&&this._defs.clear(),this}}),SVG.FX=function(a){this.target=a},SVG.extend(SVG.FX,{animate:function(a,b,c){var d,e,f,g,h=this.target,i=this;return"object"==typeof a&&(c=a.delay,b=a.ease,a=a.duration),a=null==a?1e3:a,b=b||"<>",i.to=function(a){var c;if(a=0>a?0:a>1?1:a,null==d){d=[];for(g in i.attrs)d.push(g)}if(null==e){e=[];for(g in i.trans)e.push(g)}if(null==f){f=[];for(g in i.styles)f.push(g)}for(a="<>"==b?-Math.cos(a*Math.PI)/2+.5:">"==b?Math.sin(a*Math.PI/2):"<"==b?-Math.cos(a*Math.PI/2)+1:"-"==b?a:"function"==typeof b?b(a):a,i._x?h.x(i._at(i._x,a)):i._cx&&h.cx(i._at(i._cx,a)),i._y?h.y(i._at(i._y,a)):i._cy&&h.cy(i._at(i._cy,a)),i._size&&h.size(i._at(i._size.width,a),i._at(i._size.height,a)),i._viewbox&&h.viewbox(i._at(i._viewbox.x,a),i._at(i._viewbox.y,a),i._at(i._viewbox.width,a),i._at(i._viewbox.height,a)),c=d.length-1;c>=0;c--)h.attr(d[c],i._at(i.attrs[d[c]],a));for(c=e.length-1;c>=0;c--)h.transform(e[c],i._at(i.trans[e[c]],a));for(c=f.length-1;c>=0;c--)h.style(f[c],i._at(i.styles[f[c]],a));i._during&&i._during.call(h,a,function(b,c){return i._at({from:b,to:c},a)})},"number"==typeof a&&(this.timeout=setTimeout(function(){var b=1e3/60,c=(new Date).getTime(),d=c+a;i.interval=setInterval(function(){var b=(new Date).getTime(),e=b>d?1:(b-c)/a;i.to(e),b>d&&(clearInterval(i.interval),i._after?i._after.apply(h,[i]):i.stop())},a>b?b:a)},c||0)),this},bbox:function(){return this.target.bbox()},attr:function(a,b){if("object"==typeof a)for(var c in a)this.attr(c,a[c]);else this.attrs[a]={from:this.target.attr(a),to:b};return this},transform:function(a,b){if(1==arguments.length){a=this.target._parseMatrix(a),delete a.matrix;for(b in a)this.trans[b]={from:this.target.trans[b],to:a[b]}}else{var c={};c[a]=b,this.transform(c)}return this},style:function(a,b){if("object"==typeof a)for(var c in a)this.style(c,a[c]);else this.styles[a]={from:this.target.style(a),to:b};return this},x:function(a){return this._x={from:this.target.x(),to:a},this},y:function(a){return this._y={from:this.target.y(),to:a},this},cx:function(a){return this._cx={from:this.target.cx(),to:a},this},cy:function(a){return this._cy={from:this.target.cy(),to:a},this},move:function(a,b){return this.x(a).y(b)},center:function(a,b){return this.cx(a).cy(b)},size:function(a,b){if(this.target instanceof SVG.Text)this.attr("font-size",a);else{var c=this.target.bbox();this._size={width:{from:c.width,to:a},height:{from:c.height,to:b}}}return this},viewbox:function(a,b,c,d){if(this.target instanceof SVG.Container){var e=this.target.viewbox();this._viewbox={x:{from:e.x,to:a},y:{from:e.y,to:b},width:{from:e.width,to:c},height:{from:e.height,to:d}}}return this},update:function(a){return this.target instanceof SVG.Stop&&(null!=a.opacity&&this.attr("stop-opacity",a.opacity),null!=a.color&&this.attr("stop-color",a.color),null!=a.offset&&this.attr("offset",new SVG.Number(a.offset))),this},during:function(a){return this._during=a,this},after:function(a){return this._after=a,this},stop:function(){return clearTimeout(this.timeout),clearInterval(this.interval),this.attrs={},this.trans={},this.styles={},delete this._x,delete this._y,delete this._cx,delete this._cy,delete this._size,delete this._after,delete this._during,delete this._viewbox,this},_at:function(a,b){return"number"==typeof a.from?a.from+(a.to-a.from)*b:SVG.regex.unit.test(a.to)?(new SVG.Number(a.to)).minus(new SVG.Number(a.from)).times(b).plus(new SVG.Number(a.from)):a.to&&(a.to.r||SVG.Color.test(a.to))?this._color(a,b):1>b?a.from:a.to},_color:function(a,b){var c,d;return b=0>b?0:b>1?1:b,c=new SVG.Color(a.from),d=new SVG.Color(a.to),(new SVG.Color({r:~~(c.r+(d.r-c.r)*b),g:~~(c.g+(d.g-c.g)*b),b:~~(c.b+(d.b-c.b)*b)})).toHex()}}),SVG.extend(SVG.Element,{animate:function(a,b,c){return(this.fx||(this.fx=new SVG.FX(this))).stop().animate(a,b,c)},stop:function(){return this.fx&&this.fx.stop(),this}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave"].forEach(function(a){SVG.Element.prototype[a]=function(b){var c=this;return this.node["on"+a]="function"==typeof b?function(){return b.apply(c,arguments)}:null,this}}),SVG.on=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)},SVG.off=function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent("on"+b,c)},SVG.extend(SVG.Element,{on:function(a,b){return SVG.on(this.node,a,b),this},off:function(a,b){return SVG.off(this.node,a,b),this}}),SVG.Defs=function(){this.constructor.call(this,SVG.create("defs"))},SVG.Defs.prototype=new SVG.Container,SVG.G=function(){this.constructor.call(this,SVG.create("g"))},SVG.G.prototype=new SVG.Container,SVG.extend(SVG.G,{x:function(a){return null==a?this.trans.x:this.transform("x",a)},y:function(a){return null==a?this.trans.y:this.transform("y",a)}}),SVG.extend(SVG.Container,{group:function(){return this.put(new SVG.G)}}),SVG.extend(SVG.Element,{siblings:function(){return this.parent.children()},position:function(){var a=this.siblings();return a.indexOf(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-1]},forward:function(){var a=this.position();return this.parent.removeElement(this).put(this,a+1)},backward:function(){var a=this.position();return a>0&&this.parent.removeElement(this).add(this,a-1),this},front:function(){return this.parent.removeElement(this).put(this)},back:function(){return this.position()>0&&this.parent.removeElement(this).add(this,0),this},before:function(a){a.remove();var b=this.position();return this.parent.add(a,b),this},after:function(a){a.remove();var b=this.position();return this.parent.add(a,b+1),this}}),SVG.Mask=function(){this.constructor.call(this,SVG.create("mask")),this.targets=[]},SVG.Mask.prototype=new SVG.Container,SVG.extend(SVG.Mask,{remove:function(){for(var a=this.targets.length-1;a>=0;a--)this.targets[a]&&this.targets[a].unmask();return delete this.targets,this.parent.removeElement(this),this}}),SVG.extend(SVG.Element,{maskWith:function(a){return this.masker=a instanceof SVG.Mask?a:this.parent.mask().add(a),this.masker.targets.push(this),this.attr("mask",'url("#'+this.masker.attr("id")+'")')},unmask:function(){return delete this.masker,this.attr("mask",null)}}),SVG.extend(SVG.Container,{mask:function(){return this.defs().put(new SVG.Mask)}}),SVG.Clip=function(){this.constructor.call(this,SVG.create("clipPath")),this.targets=[]},SVG.Clip.prototype=new SVG.Container,SVG.extend(SVG.Clip,{remove:function(){for(var a=this.targets.length-1;a>=0;a--)this.targets[a]&&this.targets[a].unclip();return delete this.targets,this.parent.removeElement(this),this}}),SVG.extend(SVG.Element,{clipWith:function(a){return this.clipper=a instanceof SVG.Clip?a:this.parent.clip().add(a),this.clipper.targets.push(this),this.attr("clip-path",'url("#'+this.clipper.attr("id")+'")')},unclip:function(){return delete this.clipper,this.attr("clip-path",null)}}),SVG.extend(SVG.Container,{clip:function(){return this.defs().put(new SVG.Clip)}}),SVG.Gradient=function(a){this.constructor.call(this,SVG.create(a+"Gradient")),this.type=a},SVG.Gradient.prototype=new SVG.Container,SVG.extend(SVG.Gradient,{from:function(a,b){return"radial"==this.type?this.attr({fx:new SVG.Number(a),fy:new SVG.Number(b)}):this.attr({x1:new SVG.Number(a),y1:new SVG.Number(b)})},to:function(a,b){return"radial"==this.type?this.attr({cx:new SVG.Number(a),cy:new SVG.Number(b)}):this.attr({x2:new SVG.Number(a),y2:new SVG.Number(b)})},radius:function(a){return"radial"==this.type?this.attr({r:new SVG.Number(a)}):this},at:function(a){return this.put(new SVG.Stop(a))},update:function(a){return this.clear(),a(this),this},fill:function(){return"url(#"+this.attr("id")+")"},toString:function(){return this.fill()}}),SVG.extend(SVG.Defs,{gradient:function(a,b){var c=this.put(new SVG.Gradient(a));return b(c),c}}),SVG.extend(SVG.Container,{gradient:function(a,b){return this.defs().gradient(a,b)}}),SVG.Stop=function(a){this.constructor.call(this,SVG.create("stop")),this.update(a)},SVG.Stop.prototype=new SVG.Element,SVG.extend(SVG.Stop,{update:function(a){return null!=a.opacity&&this.attr("stop-opacity",a.opacity),null!=a.color&&this.attr("stop-color",a.color),null!=a.offset&&this.attr("offset",new SVG.Number(a.offset)),this}}),SVG.Use=function(){this.constructor.call(this,SVG.create("use"))},SVG.Use.prototype=new SVG.Element,SVG.extend(SVG.Use,{element:function(a){return this.target=a,this.attr("xlink:href","#"+a,SVG.xlink)}}),SVG.extend(SVG.Container,{use:function(a){return this.put(new SVG.Use).element(a)}}),SVG.Doc=function(a){this.parent="string"==typeof a?document.getElementById(a):a,this.constructor.call(this,"svg"==this.parent.nodeName?this.parent:SVG.create("svg")),this.attr({xmlns:SVG.ns,version:"1.1",width:"100%",height:"100%"}).attr("xlink",SVG.xlink,SVG.ns),this._defs=new SVG.Defs,this.node.appendChild(this._defs.node),"svg"!=this.parent.nodeName&&this.stage()},SVG.Doc.prototype=new SVG.Container,SVG.extend(SVG.Doc,{stage:function(){var a,b=this,c=document.createElement("div");return c.style.cssText="position:relative;height:100%;",b.parent.appendChild(c),c.appendChild(b.node),a=function(){"complete"===document.readyState?(b.style("position:absolute;"),setTimeout(function(){b.style("position:relative;overflow:hidden;"),b.parent.removeChild(b.node.parentNode),b.node.parentNode.removeChild(b.node),b.parent.appendChild(b.node),b.fixSubPixelOffset(),SVG.on(window,"resize",function(){b.fixSubPixelOffset()})},5)):setTimeout(a,10)},a(),this},defs:function(){return this._defs},fixSubPixelOffset:function(){var a=this.node.getScreenCTM();this.style("left",-a.e%1+"px").style("top",-a.f%1+"px")}}),SVG.Shape=function(a){this.constructor.call(this,a)},SVG.Shape.prototype=new SVG.Element,SVG.Rect=function(){this.constructor.call(this,SVG.create("rect"))},SVG.Rect.prototype=new SVG.Shape,SVG.extend(SVG.Container,{rect:function(a,b){return this.put((new SVG.Rect).size(a,b))}}),SVG.Ellipse=function(){this.constructor.call(this,SVG.create("ellipse"))},SVG.Ellipse.prototype=new SVG.Shape,SVG.extend(SVG.Ellipse,{x:function(a){return null==a?this.cx()-this.attr("rx"):this.cx(a+this.attr("rx"))},y:function(a){return null==a?this.cy()-this.attr("ry"):this.cy(a+this.attr("ry"))},cx:function(a){return null==a?this.attr("cx"):this.attr("cx",(new SVG.Number(a)).divide(this.trans.scaleX))},cy:function(a){return null==a?this.attr("cy"):this.attr("cy",(new SVG.Number(a)).divide(this.trans.scaleY))},size:function(a,b){return this.attr({rx:(new SVG.Number(a)).divide(2),ry:(new SVG.Number(b)).divide(2)})}}),SVG.extend(SVG.Container,{circle:function(a){return this.ellipse(a,a)},ellipse:function(a,b){return this.put(new SVG.Ellipse).size(a,b).move(0,0)}}),SVG.Line=function(){this.constructor.call(this,SVG.create("line"))},SVG.Line.prototype=new SVG.Shape,SVG.extend(SVG.Line,{x:function(a){var b=this.bbox();return null==a?b.x:this.attr({x1:this.attr("x1")-b.x+a,x2:this.attr("x2")-b.x+a})},y:function(a){var b=this.bbox();return null==a?b.y:this.attr({y1:this.attr("y1")-b.y+a,y2:this.attr("y2")-b.y+a})},cx:function(a){var b=this.bbox().width/2;return null==a?this.x()+b:this.x(a-b)},cy:function(a){var b=this.bbox().height/2;return null==a?this.y()+b:this.y(a-b)},size:function(a,b){var c=this.bbox();return this.attr(this.attr("x1")<this.attr("x2")?"x2":"x1",c.x+a).attr(this.attr("y1")<this.attr("y2")?"y2":"y1",c.y+b)},plot:function(a,b,c,d){return this.attr({x1:a,y1:b,x2:c,y2:d})}}),SVG.extend(SVG.Container,{line:function(a,b,c,d){return this.put((new SVG.Line).plot(a,b,c,d))}}),SVG.Polyline=function(a){this.constructor.call(this,SVG.create("polyline")),this.unbiased=a},SVG.Polyline.prototype=new SVG.Shape,SVG.Polygon=function(a){this.constructor.call(this,SVG.create("polygon")),this.unbiased=a},SVG.Polygon.prototype=new SVG.Shape,SVG.extend(SVG.Polyline,SVG.Polygon,{_plot:function(a){if(Array.isArray(a)){var b,c,d=[];for(b=0,c=a.length;c>b;b++)d.push(a[b].join(","));a=d.length>0?d.join(" "):"0,0"}return this.attr("points",a||"0,0")}}),SVG.extend(SVG.Container,{polyline:function(a,b){return this.put(new SVG.Polyline(b)).plot(a)},polygon:function(a,b){return this.put(new SVG.Polygon(b)).plot(a)}}),SVG.Path=function(a){this.constructor.call(this,SVG.create("path")),this.unbiased=a},SVG.Path.prototype=new SVG.Shape,SVG.extend(SVG.Path,{_plot:function(a){return this.attr("d",a||"M0,0")}}),SVG.extend(SVG.Container,{path:function(a,b){return this.put(new SVG.Path(b)).plot(a)}}),SVG.extend(SVG.Polyline,SVG.Polygon,SVG.Path,{x:function(a){return null==a?this.bbox().x:this.transform("x",a)},y:function(a){return null==a?this.bbox().y:this.transform("y",a)},size:function(a,b){var c=a/this._offset.width;return this.transform({scaleX:c,scaleY:null!=b?b/this._offset.height:c})},plot:function(a){var b=this.trans.scaleX,c=this.trans.scaleY;return this._plot(a),this._offset=this.transform({scaleX:1,scaleY:1}).bbox(),this.unbiased?this._offset.x=this._offset.y=0:(this._offset.x-=this.trans.x,this._offset.y-=this.trans.y),this.transform({scaleX:b,scaleY:c})}}),SVG.Image=function(){this.constructor.call(this,SVG.create("image"))},SVG.Image.prototype=new SVG.Shape,SVG.extend(SVG.Image,{load:function(a){return a?this.attr("xlink:href",this.src=a,SVG.xlink):this}}),SVG.extend(SVG.Container,{image:function(a,b,c){return b=null!=b?b:100,this.put((new SVG.Image).load(a).size(b,null!=c?c:b))}});var a="size family weight stretch variant style".split(" ");SVG.Text=function(){this.constructor.call(this,SVG.create("text")),this.styles={"font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"},this._leading=1.2,this._base=.276666666},SVG.Text.prototype=new SVG.Shape,SVG.extend(SVG.Text,{x:function(a,b){return null==a?b?this.attr("x"):this.bbox().x:(b||(b=this.style("text-anchor"),a="start"==b?a:"end"==b?a+this.bbox().width:a+this.bbox().width/2),this.attr("x",a))},cx:function(a){return null==a?this.bbox().cx:this.x(a-this.bbox().width/2)},cy:function(a,b){return null==a?this.bbox().cy:this.y(b?a:a-this.bbox().height/2)},move:function(a,b,c){return this.x(a,c).y(b)},center:function(a,b,c){return this.cx(a,c).cy(b,c)},text:function(a){if(null==a)return this.content;this.clear(),this.content=SVG.regex.isBlank.test(a)?"text":a;var b,c,d=a.split("\n");for(b=0,c=d.length;c>b;b++)this.tspan(d[b]);return this.attr("textLength",1).attr("textLength",null)},tspan:function(a){var b=(new SVG.TSpan).text(a);return this.node.appendChild(b.node),this.lines.push(b),b.attr("style",this.style())},size:function(a){return this.attr("font-size",a)},leading:function(a){return null==a?this._leading:(this._leading=a,this.rebuild("leading",a))},rebuild:function(){var a,b,c=this.styles["font-size"];for(a=0,b=this.lines.length;b>a;a++)this.lines[a].attr({dy:c*this._leading-(0==a?c*this._base:0),x:this.attr("x")||0,style:this.style()});return this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this.lines=[],this}}),SVG.extend(SVG.Container,{text:function(a){return this.put((new SVG.Text).text(a))}}),SVG.TSpan=function(){this.constructor.call(this,SVG.create("tspan"))},SVG.TSpan.prototype=new SVG.Shape,SVG.extend(SVG.TSpan,{text:function(a){return this.node.appendChild(document.createTextNode(a)),this}}),SVG.Nested=function(){this.constructor.call(this,SVG.create("svg")),this.style("overflow","visible")},SVG.Nested.prototype=new SVG.Container,SVG.extend(SVG.Container,{nested:function(){return this.put(new SVG.Nested)}}),SVG._stroke=["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],SVG._fill=["color","opacity","rule"];var b=function(a,b){return"color"==b?a:a+"-"+b};["fill","stroke"].forEach(function(a){var c={};c[a]=function(c){if("string"==typeof c||SVG.Color.isRgb(c)||c&&"function"==typeof c.fill)this.attr(a,c);else for(index=SVG["_"+a].length-1;index>=0;index--)null!=c[SVG["_"+a][index]]&&this.attr(b(a,SVG["_"+a][index]),c[SVG["_"+a][index]]);return this},SVG.extend(SVG.Shape,SVG.FX,c)}),SVG.extend(SVG.Element,SVG.FX,{rotate:function(a,b,c){return this.transform({rotation:a||0,cx:b,cy:c})},skew:function(a,b){return this.transform({skewX:a||0,skewY:b||0})},scale:function(a,b){return this.transform({scaleX:a,scaleY:null==b?a:b})},translate:function(a,b){return this.transform({x:a,y:b})},matrix:function(a){return this.transform({matrix:a})},opacity:function(a){return this.attr("opacity",a)}}),SVG.Text&&SVG.extend(SVG.Text,SVG.FX,{font:function(b){for(var c in b)"anchor"==c?this.attr("text-anchor",b[c]):a.indexOf(c)>-1?this.attr("font-"+c,b[c]):this.attr(c,b[c]);return this}}),SVG.Set=function(){this.clear()},SVG.SetFX=function(a){this.set=a},SVG.extend(SVG.Set,{add:function(){var a,b,c=[].slice.call(arguments);for(a=0,b=c.length;b>a;a++)this.members.push(c[a]);return this},remove:function(a){var b=this.members.indexOf(a);return b>-1&&this.members.splice(b,1),this},each:function(a){for(var b=0,c=this.members.length;c>b;b++)a.apply(this.members[b],[b,this.members]);return this},clear:function(){return this.members=[],this},valueOf:function(){return this.members}}),SVG.Set.inherit=function(){var a,b=[];for(var a in SVG.Shape.prototype)"function"==typeof SVG.Shape.prototype[a]&&"function"!=typeof SVG.Set.prototype[a]&&b.push(a);b.forEach(function(a){SVG.Set.prototype[a]=function(){for(var b=0,c=this.members.length;c>b;b++)this.members[b]&&"function"==typeof this.members[b][a]&&this.members[b][a].apply(this.members[b],arguments);return"animate"==a?this.fx||(this.fx=new SVG.SetFX(this)):this}}),b=[];for(var a in SVG.FX.prototype)"function"==typeof SVG.FX.prototype[a]&&"function"!=typeof SVG.SetFX.prototype[a]&&b.push(a);b.forEach(function(a){SVG.SetFX.prototype[a]=function(){for(var b=0,c=this.set.members.length;c>b;b++)this.set.members[b].fx[a].apply(this.set.members[b].fx,arguments);return this}})},SVG.extend(SVG.Container,{set:function(){return new SVG.Set}}),SVG.extend(SVG.Element,{_memory:{},remember:function(a,b){if("object"==typeof arguments[0])for(var b in a)this.remember(b,a[b]);else{if(1==arguments.length)return this._memory[a];this._memory[a]=b}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var a=arguments.length-1;a>=0;a--)delete this._memory[arguments[a]];return this}})}.call(this),function(a){function b(){}function c(a,b){if(e)return b.indexOf(a);var c=b.length;while(c--)if(b[c]===a)return c;return-1}"use strict";var d=b.prototype,e=Array.prototype.indexOf?!0:!1;d.getListeners=function(a){var b=this._events||(this._events={});return b[a]||(b[a]=[])},d.addListener=function(a,b){var d=this.getListeners(a);return c(b,d)===-1&&d.push(b),this},d.on=d.addListener,d.removeListener=function(a,b){var d=this.getListeners(a),e=c(b,d);return e!==-1&&(d.splice(e,1),d.length===0&&(this._events[a]=null)),this},d.off=d.removeListener,d.addListeners=function(a,b){return this.manipulateListeners(!1,a,b)},d.removeListeners=function(a,b){return this.manipulateListeners(!0,a,b)},d.manipulateListeners=function(a,b,c){var d,e,f=a?this.removeListener:this.addListener,g=a?this.removeListeners:this.addListeners;if(typeof b=="object")for(d in b)b.hasOwnProperty(d)&&(e=b[d])&&(typeof e=="function"?f.call(this,d,e):g.call(this,d,e));else{d=c.length;while(d--)f.call(this,b,c[d])}return this},d.removeEvent=function(a){return a?this._events[a]=null:this._events=null,this},d.emitEvent=function(a,b){var c=this.getListeners(a),d=c.length,e;while(d--)e=b?c[d].apply(null,b):c[d](),e===!0&&this.removeListener(a,c[d]);return this},d.trigger=d.emitEvent,typeof define=="function"&&define.amd?define(function(){return b}):a.EventEmitter=b}(this);var About,Animations,EventManager,Events,Experiments,ExperimentsData,Module,ParticleImages,PhysicsDemo,Portfolio,PortfolioData,Slide,Slideshow,TypePath,Utils,Work,__bind=function(a,b){return function(){return a.apply(b,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(a,b){function d(){this.constructor=a}for(var c in b)__hasProp.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},_this=this;Module=function(){function a(a){this.id=a,this.closeClickHandler=__bind(this.closeClickHandler,this)}return a.prototype.container=null,a.prototype.closeButton=document.getElementById("dhaakon-close"),a.prototype.start=function(){},a.prototype.close=function(){},a.prototype.addListeners=function(){},a.prototype.createClose=function(){return this.closeButton.style.display="block",Animations.fade("in",this.closeButton,.6,.2),this.closeButton.onclick=this.closeClickHandler},a.prototype.closeClickHandler=function(a){var b,c=this;return console.log("close"),b=function(){return c.closeButton.style.display="none",window.location.hash="main",EventManager.emitEvent(Events.CLOSE_EVENT)},Animations.fade("out",this.closeButton,0,.1,b)},a}(),PortfolioData={projects:[{name:"IBM - Cloud Technology",client:"IBM",technologies:"HTML, CSS3, JavaScript, Dojo GFX",description:"",link:"http://www-03.ibm.com/innovation/us/technology/cloudtechnology.html",images:["img/work/ibm-cloud-1.jpg","img/work/ibm-cloud-2.jpg","img/work/ibm-cloud-3.jpg","img/work/ibm-cloud-4.jpg","img/work/ibm-cloud-5.jpg"]},{name:"IBM - PureSystems",client:"IBM",technologies:"HTML, CSS3, JavaScript, Dojo GFX",description:"",link:"http://www-03.ibm.com/innovation/us/technology/integratedsystems.html",images:["img/work/ibm-puresystems-1.jpg","img/work/ibm-puresystems-2.jpg","img/work/ibm-puresystems-3.jpg","img/work/ibm-puresystems-4.jpg","img/work/ibm-puresystems-5.jpg"]},{name:"IBM - Smarter Analytics",client:"IBM",technologies:"HTML, CSS3, JavaScript, Dojo GFX",description:"",link:"http://www-03.ibm.com/innovation/us/technology/analytics.html",images:["img/work/ibm-smarter-1.jpg","img/work/ibm-smarter-2.jpg","img/work/ibm-smarter-3.jpg"]},{name:"HP - Awards Meter",client:"UBS",technologies:"HTML5, CSS3, JavaScript",description:"",link:"http://www.awardsmeter.com/",images:["img/work/awards-1.png","img/work/awards-2.png"]},{name:"IBM - 5 Minutes From Now...",client:"IBM",technologies:"HTML, CSS3, JavaScript",description:"",link:"",images:["img/work/ibm-analytics-1.png","img/work/ibm-analytics-2.png","img/work/ibm-analytics-3.png","img/work/ibm-analytics-4.png"]},{name:"UBS - Neo",client:"UBS",technologies:"HTML, CSS3, JavaScript",description:"",link:"",images:["img/work/ubs-1.jpg","img/work/ubs-2.jpg","img/work/ubs-3.jpg","img/work/ubs-4.jpg"]},{name:"Johnson & Johnson - Invega Sustenna",client:"Johnson & Johnson",technologies:"HTML, CSS3, JavaScript",description:"",link:"",images:["img/work/invega-1.png","img/work/invega-2.png"]}]},ExperimentsData={projects:[{name:"CSS3 Sphere",technologies:"HTML, CSS3, JavaScript, Dojo GFX",description:"",link:"http://codepen.io/dhaakon/full/zldha",images:["img/work/experiment-1.jpg"]},{name:"Web GL Hello",technologies:"HTML, CSS3, JavaScript, Dojo GFX",description:"",link:"http://dhaakon.com/type-demo3d/",images:["img/work/experiment-4.jpg"]},{name:"CSS3 Tentacle",technologies:"HTML, CSS3, JavaScript, Dojo GFX",description:"",link:"http://codepen.io/dhaakon/full/xaogi",images:["img/work/experiment-2.jpg"]},{name:"Canvas Autonomous Drawing",technologies:"HTML, CSS3, JavaScript, Dojo GFX",description:"",link:"http://codepen.io/dhaakon/full/inyzL",images:["img/work/experiment-3.jpg"]}]},Slide=function(){function a(a,b){this.proj=a,this.id=b,this.createContainer(),this.createTitle(),this.createButton(),this.createImages(),this.isActive=!1,this.addListeners()}return a.prototype.ID_PREFIX="slide-",a.prototype.SLIDE_CLASSNAME="slide",a.prototype.IMAGE_WIDTH=703,a.prototype.IMAGE_HEIGHT=359,a.prototype.SLIDESHOW_DELAY=140,a.prototype.SLIDE_MOVE_DURATION=.6,a.prototype.SLIDE_MOVE_DELAY=.5,a.prototype.container=null,a.prototype.title=null,a.prototype.button=null,a.prototype.currentImage=0,a.prototype.images=null,a.prototype.imagesContainer=null,a.prototype.imagesSlideshow=null,a.prototype.startX=0,a.prototype.endX=0,a.prototype.timer=0,a.prototype.isActive=null,a.prototype.createContainer=function(){return this.container=document.createElement("li"),this.container.className=this.SLIDE_CLASSNAME,this.width=$(this.container).width(),this.container.id=this.ID_PREFIX+this.proj.name.replace(" ","-")},a.prototype.createTitle=function(){return this.title=document.createElement("h2"),this.title.innerHTML=this.proj.name,this.container.appendChild(this.title)},a.prototype.createButton=function(){var a=this;if(this.proj.link==="")return;return this.button=document.createElement("button"),this.button.innerHTML="go",this.container.appendChild(this.button),this.button.onclick=function(){return a.goToLink()}},a.prototype.goToLink=function(){return window.location=this.proj.link},a.prototype.createImages=function(){var a,b,c,d,e,f,g;c=new Image,c.className="vignette",c.src="img/vignette.png",this.imagesContainer=document.createElement("div"),this.imagesContainer.id="image-container",this.imagesSlideshow=document.createElement("div"),this.imagesSlideshow.id="image-slideshow",this.container.appendChild(this.imagesContainer),this.imagesContainer.appendChild(this.imagesSlideshow),this.imagesLength=this.proj.images.length;if(this.proj.images.length===0)return;this.maxImages=this.proj.images.length,g=0,f=this.proj.images;for(d=0,e=f.length;d<e;d++)a=f[d],b=new Image,b.src=a,b.width=this.IMAGE_WIDTH,g+=this.IMAGE_WIDTH,this.imagesSlideshow.appendChild(b);return this.imagesSlideshow.style.width=g+this.proj.images.length+"px"},a.prototype.activate=function(){return this.isActive=!0,this.startSlideshow()},a.prototype.deactivate=function(){return this.isActive=!1,window.cancelAnimationFrame(this.animFrame),this.timer=0,this.interval&&clearInterval(this.interval),this.interval=null,this.move(0)},a.prototype.update=function(){var a=this;this.cb=function(){return a.update()},this.animFrame=window.requestAnimationFrame(this.cb);if(!this.isActive){window.cancelAnimationFrame(this.animFrame);return}return this.timer<=this.SLIDESHOW_DELAY?this.timer++:(this.timer=0,this.currentImage+1<this.maxImages?this.move(this.currentImage+1):this.move(0))},a.prototype.startSlideshow=function(){var a,b=this;this.update();return},a.prototype.move=function(a){var b;return this.startX=-this.currentImage*this.IMAGE_WIDTH,this.endX=-a*this.IMAGE_WIDTH,b=Math.max(Math.abs(a-this.currentImage),1),Animations.move(this.imagesSlideshow,this.SLIDE_MOVE_DELAY,this.SLIDE_MOVE_DURATION,{y:0,x:[this.startX,this.endX]}),this.currentImage=a},a.prototype.addListeners=function(){var a=this;return this.container.onclick=function(b){var c;return c={id:a.id,x:$(a.container).position().left},EventManager.emitEvent(Events.SLIDE_EVENT_CLICK,[c])}},a}(),function(){var a,b,c,d,e,f;c=window,f=["ms","moz","webkit","o"];for(d=0,e=f.length;d<e;d++){b=f[d];if(c.requestAnimationFrame)break;c.requestAnimationFrame=c[""+b+"RequestAnimationFrame"],c.cancelAnimationFrame=c[""+b+"CancelAnimationFrame"]||c[""+b+"CancelRequestAnimationFrame"]}return a=0,c.requestAnimationFrame||(c.requestAnimationFrame=function(b){var d;return a=Math.max(a+16,d=+(new Date)),c.setTimeout(function(){return b(+(new Date))},a-d)}),c.cancelAnimationFrame||(c.cancelAnimationFrame=function(a){return clearTimeout(a)})}(),Slideshow=function(a){function b(a,c,d,e){this.move=__bind(this.move,this),this.close=__bind(this.close,this),this.onSlideClick=__bind(this.onSlideClick,this),this.onKeyPress=__bind(this.onKeyPress,this),this.onResize=__bind(this.onResize,this),b.__super__.constructor.call(this),this.data=a,this.wrapper=c,this.container=d,this.slideContainer=e,this.slides=[],this.maxSlides=this.data.projects.length,this.slides.length===0&&this.createSlides()}return __extends(b,a),b.prototype.SLIDE_DELAY=.1,b.prototype.SLIDE_DURATION=.3,b.prototype.OFFSET=700,b.prototype.SLIDE_WIDTH=740,b.prototype.SLIDE_PADDING=42,b.prototype.SLIDE_BUFFER_SIZE=2,b.prototype.FIRST_SLIDE=3,b.prototype.MIN_HEIGHT=768,b.prototype.MIN_WIDTH=1024,b.prototype.isOnLastSlide=!1,b.prototype.isOnFirstSlide=!1,b.prototype.wrapper=null,b.prototype.container=null,b.prototype.slideContainer=null,b.prototype.data=null,b.prototype.slides=[],b.prototype.currentSlide=3,b.prototype.maxSlides=5,b.prototype.startX=0,b.prototype.endX=0,b.prototype.addListeners=function(){return EventManager.addListener(Events.CLOSE_EVENT,this.close),EventManager.addListener(Events.SLIDE_EVENT_CLICK,this.onSlideClick),EventManager.addListener(Events.WINDOW_RESIZE,this.onResize),EventManager.addListener(Events.KEYBOARD_EVENT,this.onKeyPress)},b.prototype.removeListeners=function(){return EventManager.removeListener(Events.CLOSE_EVENT,this.close),EventManager.removeListener(Events.SLIDE_EVENT_CLICK,this.onSlideClick),EventManager.removeListener(Events.KEYBOARD_EVENT,this.onKeyPress)},b.prototype.onResize=function(){return this.wrapper.style.width=$(window).width()+"px",this.wrapper.style.height=$(window).height()+"px",Utils.transform(this.container,(new CSSMatrix).translate(this.calcXOffset(this.currentSlide),this.calcYOffset(this.currentSlide)).toString()),this.startX=this.calcXOffset(this.currentSlide)},b.prototype.onKeyPress=function(a){switch(a.keyCode){case 37:return console.log(this.currentSlide),this.move(this.currentSlide-1);case 39:return console.log(this.currentSlide),this.move(this.currentSlide+1);case 32:if(this.slides[this.currentSlide].proj.link!=="")return this.slides[this.currentSlide].goToLink();break;case 27:return this.close(),this.closeClickHandler(a)}},b.prototype.onSlideClick=function(a){return console.log(a.id),this.slides[this.currentSlide].deactivate(),this.move(a.id)},b.prototype.animateSlides=function(){var a,b,c,d,e,f;a=0,e=this.slides,f=[];for(c=0,d=e.length;c<d;c++)b=e[c],a++,f.push(Animations.fade("in",b.container,a*.2+this.SLIDE_DELAY,.5));return f},b.prototype.createBufferSlide=function(a,b){var c;return c=new Slide(a,b),this.slides.push(c),this.slideContainer.appendChild(c.container)},b.prototype.createSlides=function(){var a,b,c,d,e,f,g,h,i,j,k,l;l=this.SLIDE_WIDTH*5,b=this.SLIDE_BUFFER_SIZE;for(a=e=i=this.data.projects.length-2,j=this.data.projects.length-1;i<=j?e<=j:e>=j;a=i<=j?++e:--e)this.createBufferSlide(this.data.projects[a],this.data.projects.length-a);k=this.data.projects;for(f=0,h=k.length;f<h;f++)c=k[f],d=new Slide(c,b),this.slides.push(d),this.slideContainer.appendChild(d.container),l+=this.SLIDE_WIDTH+this.SLIDE_PADDING*2,b++;for(a=g=0;g<=1;a=++g)this.createBufferSlide(this.data.projects[a],this.slides.length+a);return this.container.style.width=l+"px"},b.prototype.setupSlideNavigation=function(){var a=this;return},b.prototype.kill=function(){var a,b=this;return this.removeListeners(),a=function(){return b.wrapper.style.display="none"},Animations.fade("out",this.wrapper,0,.25,a),this.currentSlide=this.FIRST_SLIDE},b.prototype.close=function(){var a,b,c,d,e,f,g,h=this;this.slides[this.currentSlide].deactivate(),this.kill(),b=0,f=this.slides,g=[];for(d=0,e=f.length;d<e;d++)c=f[d],b++,b===this.slides.length?a=function(){return h.kill()}:a=null,g.push(Animations.fade("out",c.container,0,.3,a));return g},b.prototype.start=function(){return this.wrapper.style.display="block",this.wrapper.style.left="0px",this.wrapper.style.width=$(window).width()+"px",this.wrapper.style.height=$(window).height()+"px",Animations.fade("in",this.wrapper,0,.4),this.setupSlideNavigation(),this.addListeners(),this.animateSlides(),this.createClose(),this.slides[this.FIRST_SLIDE].activate(),this.onResize()},b.prototype.move=function(a,b){var c,d=this;return this.removeListeners(),this.endX=this.calcXOffset(a),a===this.SLIDE_BUFFER_SIZE-1&&(this.isOnFirstSlide=!0),a===this.slides.length-this.SLIDE_BUFFER_SIZE&&(this.isOnLastSlide=!0),this.slides[this.currentSlide].deactivate(),c=function(){var a;return d.isOnFirstSlide&&(a=d.currentSlide,d.currentSlide=d.slides.length-(d.SLIDE_BUFFER_SIZE+1),d.isOnFirstSlide=!1,d.isOnLastSlide=!1,d.slides[a].deactivate(),setTimeout(function(){return d.onResize()},1),d.slides[d.currentSlide].activate()),d.isOnLastSlide&&(a=d.currentSlide,d.currentSlide=d.SLIDE_BUFFER_SIZE,d.isOnFirstSlide=!1,d.isOnLastSlide=!1,d.slides[a].deactivate(),setTimeout(function(){return d.onResize()},1),d.slides[d.currentSlide].activate()),d.startX=d.endX,d.addListeners()},b===void 0&&(b=this.SLIDE_DURATION),Animations.move(this.container,0,b,{y:this.calcYOffset(a),x:[this.startX,this.endX]},c,10),this.currentSlide=a,this.slides[this.currentSlide].activate()},b.prototype.calcXOffset=function(a){var b,c,d,e,f,g;return c=$(this.slides[a].container),b=$(this.container).width(),f=$(window).width(),e=c.width(),g=c.position().left+this.SLIDE_PADDING,d=f-e,-(g-d/2)},b.prototype.calcYOffset=function(a){var b,c,d,e,f,g;return d=$(this.slides[a].container),b=$(this.container).height(),c=$(window).height(),f=d.height(),g=d.position().top,e=c-f,-(g-e/2)},b}(Module),ParticleImages=[{name:"hello-world",offset:{x:420,y:140},paths:["M121.29,20.196c-1.983,6.5-11.653,26.617-25.599,46.698c12.576-11.527,23.856-16.951,30.822-16.812c10.272,0.228,12.043,9.014,6.382,21.092c-2.775,6.426-23.963,36.006-28.608,45.02c-2.279,4.559-3.275,8.869-0.516,12.531c-7.738,10.369-17.629,14.954-24.517,14.074c-7.392-0.912-11.056-7.675-5.158-18.292c7.163-12.853,26.049-35.625,32.667-48.505c3.212-6.113,3.708-10.038,0.372-10.112c-4.457-0.087-17.308,11.065-27.742,24.082c-0.455,0.596-0.911,1.192-1.369,1.788c-6.59,9.322-16.058,21.604-21.971,31.485c-2.337,3.914-4.122,7.522-5.668,10.788c-3.812,1.174-10.374,2.134-15.613,1.414c-6.548-0.906-11.136-4.072-6.081-11.557c3.145-5.382,21.677-26.163,37.423-47.432C82.264,55.211,95.628,33.476,97.76,26.69c1.566-3.876,1.727-7.799-1.055-8.411c3.886-8.143,11.202-14.573,19.052-14.27C123.866,4.322,124.148,11.806,121.29,20.196z","M176.845,132.499c-3.761,11.24-20.303,18.368-34.257,16.987c-16.652-1.466-29.874-14.441-17.693-39.857c15.69-31.74,43.424-58.942,67.4-58.441c10.101,0.305,16.992,7.572,12.143,21.84c-7.69,22.735-29.05,36.47-49.147,35.372c-1.707-0.074-3.173-0.346-4.483-0.61c-6.456,15.249-2.88,21.178,4.02,21.55c4.452,0.314,10.061-1.501,18.496-10.978C176.604,121.559,178.712,127.019,176.845,132.499z M180.319,74.694c1.699-4.422,0.592-7.707-1.867-7.765c-4.355-0.016-12.687,9.626-21.673,28.18c0.678,0.22,1.439,0.247,2.2,0.272C167.544,95.671,176.462,84.788,180.319,74.694z","M257.625,24.953c-0.997,6.342-7.52,24.569-15.929,45.885c-8.133,20.825-18.151,44.74-19.764,51.119c-1.483,5.157-1.77,10.086,1.187,14.081c-4.022,7.724-11.865,18.696-21.045,18.112c-12.778-0.917-10.88-13.254-7.804-22.801c3.098-10.406,14.052-34.401,23.022-55.041c9.22-21.034,16.456-38.71,17.871-45.591c0.867-3.637,0.412-7.293-2.47-7.906c2.615-7.537,9.316-13.317,17.22-12.918C258.08,10.313,259.144,17.178,257.625,24.953z","M294.569,26.472c-0.789,6.251-6.325,23.946-13.456,45.223c-6.898,20.719-15.391,45.02-16.705,51.586c-1.192,5.267-1.213,10.309,1.941,14.344c-3.597,7.936-10.872,19.37-20.043,18.979c-12.764-0.663-11.476-13.496-8.933-23.356c2.583-10.815,12.009-35.397,19.717-56.062c7.925-21.129,14.13-38.34,15.277-45.134c0.694-3.564,0.083-7.143-2.823-7.752c2.296-7.367,8.828-12.983,16.746-12.568C294.475,12.173,295.751,18.872,294.569,26.472z","M282.872,109.402c7.739-34.674,27.515-54.733,49.616-54.403c17.437,0.733,26.901,12.037,24.352,34.93c-3.24,30.505-26.04,68.973-51.85,68.604C284.913,158.184,277.283,134.905,282.872,109.402z M308.305,106.61c-2.662,14.813-1.656,28.757,4.728,28.834c7.847-0.015,15.975-22.874,18.608-40.702c2.128-14.348,0.675-24.213-5.233-24.391C319.392,70.214,311.868,86.929,308.305,106.61z","M358.396,144.996c1.22-12.306,8.492-22.462,17.318-22.48c7.909,0.021,10.901,8.647,10.11,21.282c-1.228,21.257-15.764,60.391-32.537,61.005c-5.288,0.018-6.39-4.943-5.878-10.613c0.254-2.838,0.846-5.63,1.598-8.377c0.223,0,0.446,0,0.669,0c6.226-0.04,13.036-12.251,13.794-21.635c0.417-5.022-0.821-9.542-4.871-11.117C358.199,150.409,358.151,147.548,358.396,144.996z","M433.17,61.917c3.163-2.486,8.55-4.054,13.521-3.931c9.505,0.267,12.361,4.827,12.618,12.64c0.372,10.362-3.942,26.539-3.621,44.645c0.102,4.863,0.505,9.71,1.55,14.488c12.142-6.162,16.956-39.51,16.091-53.865c-0.259-4.996-1.116-10.22-2.848-13.498c2.606-2.27,7.069-3.668,11.621-3.563c6.11,0.176,12.313,3.04,12.966,10.367c0.523,6.118-0.678,15.331-3.74,26.592c1.359,18.237,2.714,26.886,4.865,32.605c11.878-6.129,14.989-38.328,13.343-52.234c-0.524-4.836-1.655-9.897-3.556-13.076c2.491-2.206,6.884-3.567,11.442-3.471c6.122,0.163,12.472,2.933,13.514,10.013c1.226,9.239-1.015,26.21-8.178,45.271c-7.081,18.403-19.083,38.895-35.471,39.976c-2.592,0.156-4.729-0.236-7.224-1.632c-3.605-4.402-5.132-10.582-5.891-17.344c-7.274,11.537-16.532,20.613-27.096,21.035c-2.596,0.111-4.71-0.335-7.138-1.818c-6.147-8.463-7.725-20.675-7.608-32.249c0.229-20.627,3.448-25.999,3.512-45.829C435.861,71.341,434.718,65.615,433.17,61.917z","M540.553,107.835c-4.2-30.509,8.77-47.375,31.103-47.17c17.649,0.532,30.828,9.834,36.056,28.077c7.257,23.981-4.204,55.667-29.808,58.903C558.046,149.922,543.671,130.372,540.553,107.835z M564.868,104.232c2.32,12.551,7.673,24.123,14.012,23.617c7.8-0.75,8.707-19.784,5.262-34.383c-2.725-11.778-7.532-19.901-13.488-19.978C563.556,73.443,561.804,87.557,564.868,104.232z","M653.533,124.689c0.919,2.871,2.223,5.967,3.422,8.752c-3.198,2.544-9.134,4.54-12.676,4.981c-9.35,1.194-13.668-4.01-15.155-9.565c-1.271-5.934-6.119-43.219-8.272-49.299c-1.071-3.439-3.182-6.472-6.739-7.167c-0.876-5.454,2.455-11.178,11.46-11.038c8.443,0.136,13.3,4.329,15.646,10.848c0.572,1.605,0.812,2.677,1.203,5.003c1.996-11.335,8.177-15.368,13.753-15.376c5.307,0.06,8.498,3.025,10.021,6.682c1.62,3.896,1.114,8.594-1.159,11.075c-4.249-2.338-8.284-3.223-10.495-3.199c-8.962,0.002-9.301,11.744-8.59,20.077C649.479,111.049,650.913,116.594,653.533,124.689z","M689.45,42.696c1.897,7.432,17.662,55.696,22.118,65.472c1.615,3.293,4.199,6.3,9.317,8.167c0.504,5.016-1.108,12.714-10.138,14.225c-12.576,2.017-17.633-6.267-20.385-12.938c-6.263-16.428-18.123-62.747-20.649-70.896c-0.968-2.593-3.109-5.219-6.278-5.68c-0.834-5.408,3.86-9.527,11.934-9.175C683.724,32.239,687.291,37.183,689.45,42.696z","M744.228,48.709c-1.97-3.673-4.658-5.038-7.055-5.425c-1.619-5.125,3.332-8.881,10.882-8.608c6.65,0.224,11.557,2.993,15.271,9.886c1.919,7.17,26.229,49.33,31.254,54.732c2.097,2.484,4.608,4.263,10.067,5.381c1.935,6.101-2.534,9.656-9.428,11.016c-9.152,1.853-16.389-1.4-21.277-8.408c-0.581-0.824-1.244-1.763-1.667-2.6c0.263,9.446-5.758,16.399-14.762,18.03c-11.575,2.332-24.77-5.376-33.471-21.592c-12.368-22.89-7.418-38.904,10.034-38.868c5.351,0.002,10.836,1.778,18.755,5.272C749.896,60.95,744.626,49.699,744.228,48.709z M756.913,75.879c-5.769-3.044-9.777-3.763-12.293-3.711c-6.718,0.124-7.48,8.872,1.354,22.808c4.849,7.618,11.459,14.955,16.526,14.242c3.65-0.508,6.274-6.617,4.174-14.446C763.308,88.288,760.01,82.032,756.913,75.879z"]},{name:"face",offset:{x:300,y:470},paths:["M307.082,744.359c0,0-157.627,49.507-265.748-71.132c0,0,69.993-5.122,80.805-22.193l13.657-149.66c0,0-31.298,5.122-29.021-14.796c2.276-19.917,6.26-14.226,6.26-14.226s11.382,24.469,23.9,17.64c0,0-6.829-12.521,5.122-12.52c11.95,0.001,45.524,4.553,59.181-21.055s21.056-61.458,15.934-93.894s-33.005-37.558-33.005-37.558s26.746,12.519,22.762,56.336c-3.983,43.817-21.625,68.856-34.712,79.668s-32.436,13.089-52.922-3.414c-20.486-16.503-50.078-55.768-59.182-95.601C51.007,322.121,6.051,146.852,181.889,63.771c175.839-83.082,286.236,47.801,286.236,47.801s3.374,125.993-72.878,157.291c-76.253,31.298-97.308,15.935-129.745,45.525c0,0-11.381,40.972,8.536,52.353c0,0-34.712-15.365-21.624-60.32c0,0,13.657,19.917,52.922-3.983s57.478,17.641,17.642,20.486c-39.835,2.845-61.459-13.088-57.476,10.243c0,0,13.089-7.967,25.039-7.398s23.899,10.812,31.297,10.243c7.399-0.569-14.226,5.122-29.59,10.812c-15.365,5.69-25.608-5.122-25.608-5.122s7.397,3.415,13.088,2.845c0,0-6.26-12.52,2.845-15.364c9.105-2.845,25.038-3.983,15.365,12.519c-9.674,16.502-11.382-13.088-6.829-10.812","M143.764,491.698c0,0-21.623,110.966,87.065,165.595c108.688,54.629,132.02,38.696,138.849,35.282c6.829-3.415,3.414-6.829,3.414-6.829s27.316,14.228,62.597-21.623s36.419-53.49,48.369-75.684s22.193-31.297,35.85-81.943c13.658-50.646,40.404-153.645,30.729-202.015c0,0,7.399,52.353,2.846,62.596c0,0,54.061-68.855,35.85-130.882c-18.21-62.027-59.184-97.309-123.486-106.414c0,0,28.455,5.121,29.592,10.812c1.137,5.691,15.932,76.254,7.966,95.033s-34.143,31.297-34.143,31.297s14.797,1.139,14.227,9.674c-0.57,8.536,6.829,19.347,6.829,19.347s25.604-2.277,37.556,9.674c11.952,11.951,14.228,26.746,14.228,26.746l-5.69,9.674c0,0,12.52,0.569,1.707,12.52c-10.813,11.95-10.813,11.95-10.813,11.95s-1.706-16.503-13.087-17.641c-11.381-1.138-33.006-2.276-38.127,9.674c0,0,34.711-43.249,51.215-1.139l-14.794,1.707c0,0,2.276-13.087-9.674-10.242c-11.95,2.845-7.967,16.502-1.708,17.64c6.26,1.138,8.536-5.69,8.536-5.69s11.952-15.934-9.104-15.365s-26.746,19.917-26.746,19.917l10.812,121.208l-90.479,35.851","M377.646,485.438c0,0-6.262,9.106-3.984,18.211c0,0,25.609-13.657,34.713-3.415c9.104,10.243,6.258,38.695,6.258,38.695l-13.657,2.846c0,0,0.568,20.484,6.829,24.469s-6.26,18.778-10.243,29.021s-6.827,18.209-19.916,20.486s-49.508-11.38-50.646-35.28c0,0,11.382,12.521,21.625,22.193c10.243,9.672,25.038,0,25.038,0l-0.569,24.469l-3.414-25.607c0,0-9.104,21.624-44.955-20.486c0,0-2.277,1.707-9.106-1.707c0,0,47.232-22.193,52.354-30.729c0,0-1.137,9.106,14.796,9.675c15.933,0.568,11.95-9.104,25.607-6.828c13.657,2.275,13.088,11.38,13.657,17.64c0.568,6.26-2.276,10.241-8.536,10.812c-6.26,0.57-8.536-5.12-15.364-4.552c-6.829,0.569-5.122,3.981-11.382,2.845c-6.26-1.137,0.002-7.966-10.811-7.966c-10.813,0-27.883,10.243-44.387,10.243","M436.826,659.57c0,0,22.193,0,49.507,27.314c27.315,27.314,54.062,37.556,67.15,42.109C566.57,733.547,612.095,762,612.095,762"]},{name:"bike",offset:{x:320,y:300},paths:["M527.997,129.052c-22.906,0-46.48,6.156-65.97,17.987L420.673,95.81        l6.671-18.011c24.688-3.826,30.381-10.242,36.898-17.369c6.515-7.128,5.519-12.023-4.215-11.98        c-9.735,0.042-60.978,2.931-95.469,4.398c-6.591,0.215-11.658,4.835-5.871,9.862c5.785,5.027,30.011,13.679,44.057,15.507        l-2.67,8.156H225.317l12.582-44.596l-10.006-18.01l8.672-9.339h42.691l-0.667-14.009h-48.695l-22.681,24.682l11.341,19.344        l-35.788,98.732c-17.311-9.254-37.781-14.127-57.763-14.127c-68.719,0-124.766,56.046-124.766,124.765        c0,68.72,56.047,124.771,124.766,124.771c68.719,0,124.766-56.047,124.766-124.766c0-38.016-18.032-74.568-48.16-98.3l5.559-15.062        l124.131,140.39c-3.66,10.444,2.781,20.967,15.072,22.979l8.264,32.126h-6.672v9.339l27.35-1.334l-0.666-8.672h-8.672        l-6.779-32.146c4.529-2.688,8.322-6.123,9.949-10.603l37.996-6.828c14.611,53.885,64.322,92.874,120.856,92.874        c68.72,0,124.767-56.047,124.767-124.766C652.764,185.099,596.717,129.052,527.997,129.052z M226.03,253.814        c0,55.645-45.383,101.026-101.026,101.026S23.977,309.459,23.977,253.814c0-55.644,45.383-101.025,101.026-101.025        c17.759,0,35.912,5.13,50.55,13.771c-9.908,31.311-19.547,47.458-50.033,71.999c-7.4,0.313-13.028,6.254-13.028,13.342        c0,7.349,5.993,13.342,13.341,13.342c7.348-0.001,12.799-5.994,12.799-13.676c23.425-18.604,41.658-36.34,54.806-71.825        C214.191,198.566,226.03,225.797,226.03,253.814z M346.629,248.564l-2-14.676h5.336l-0.667-9.339H325.95l0.666,8.673h6.004        l1.334,16.01c0,0-117.401-132.125-118.069-132.792l2.716-8.314l174.429-0.229L346.629,248.564z M403.855,265.133l-39.664,4.021        l48.973-149.399l31.642,37.883c-30.382,27.949-41.575,61.575-41.575,96.178C403.23,257.229,403.717,262.102,403.855,265.133z         M458.938,176.147l53.834,69.928l-85.418,13.942C427.562,229.684,431.033,200.477,458.938,176.147z M527.996,354.843        c-44.988,0-85.636-30.782-97.063-73.362l91.829-17.608c1.805,0.849,3.94,1.37,5.974,1.37c7.348,0,13.342-5.993,13.342-13.342        c0-7.243-5.838-13.237-12.545-13.342l-54.834-72.804c14.99-8.777,35.539-12.967,53.298-12.967        c55.644,0,101.028,45.383,101.028,101.026C629.024,309.459,583.641,354.843,527.996,354.843z"]}],Animations={fade:function(a,b,c,d,e){var f,g,h=this;a==="in"?g=TweenLite.to(b,d,{delay:c,opacity:1,onComplete:e}):g=TweenLite.to(b,d,{delay:c,opacity:0,onComplete:e}),g.play();return},drop:function(a,b,c,d,e){var f,g,h,i;return a==="down"?f="top":f="bottom",g=Utils.getCSS(b,f),console.log(b),h={node:b,delay:c,duration:d,curve:[parseInt(g.split("px")[0],0)],onAnimate:function(a){return this.node.style[f]=a+"px"}},i=new Tween(h),i.play()},tween:function(a,b,c,d,e,f){var g,h,i=this;return g={node:b,delay:c,duration:d,curve:e,easing:Tween.Easing.Quad.easeInOut,onAnimate:function(b){return this.node.style[a]=b}},f&&(g._callbacks={onComplete:[function(){return f()}]}),h=new Tween(g),h.play()},move:function(a,b,c,d,e,f){var g,h,i,j=this;return h={object:a,x:d.x[0],y:d.y},g=function(){return f?Utils.transform(h.object,(new CSSMatrix).translate(h.x,h.y,f).toString()):Utils.transform(h.object,(new CSSMatrix).translate(h.x,h.y).toString())},i=TweenLite.to(h,c,{delay:b,x:d.x[1],onUpdate:g,onComplete:e})}},PhysicsDemo=function(){function a(a){this.pathImages=a,this.onmousemove=__bind(this.onmousemove,this),this.draw=__bind(this.draw,this),this.redistributeParticles=__bind(this.redistributeParticles,this),this.onresize=__bind(this.onresize,this),this.onTimelineComplete=__bind(this.onTimelineComplete,this),this.avoidMouse=new Attraction,this.createSketch(),this.max_index=this.pathImages.length}return a.prototype.AVOID_MOUSE_STRENGTH=25e3,a.prototype.SPEED=2,a.prototype.MIN_SPEED=1.3,a.prototype.X_OFFSET=300,a.prototype.Y_OFFSET=470,a.prototype.DESTROY_SIZE=.45,a.prototype.engine=null,a.prototype.sketch=null,a.prototype.min_mass=5,a.prototype.max_mass=25,a.prototype.destroy=!1,a.prototype.renderer=null,a.prototype.isDrawingParticles=!0,a.prototype.isPhysicsRunning=!0,a.prototype.counter=0,a.prototype.max_count=175,a.prototype.timeline=null,a.prototype.currentIndex=0,a.prototype.changeImage=function(a){return this.currentIndex=a,this.X_OFFSET=this.pathImages[this.currentIndex].offset.x,this.Y_OFFSET=this.pathImages[this.currentIndex].offset.y,this.createParticles(this.pathImages[this.currentIndex].points)},a.prototype.destroySketch=function(a){var b=this;return this.destroy=!0,EventManager.removeListener(Events.WINDOW_RESIZE,this.onresize),this.timeline._duration===0&&this.reset(),this.timeline.eventCallback("onReverseComplete",function(){b.destroy=!1,b.reset();if(a)return a()}),this.timeline.timeScale(5.3),this.timeline.reverse()},a.prototype.reset=function(){return this.counter=0,this.sketch.stop(),this.sketch.clear(),this.sketch.destroy(),this.destroyParticles()},a.prototype.destroyParticles=function(){return this.engine.destroy()},a.prototype.setupGUI=function(){return this.gui.add(this,"AVOID_MOUSE_STRENGTH",5e3,15e3)},a.prototype.onTimelineComplete=function(){return this.isPhysicsRunning=!0},a.prototype.onresize=function(){return this.sketch.height=window.innerHeight,this.sketch.width=window.innerWidth,this.redistributeParticles()},a.prototype.redistributeParticles=function(){var a,b,c,d,e,f;e=this.engine.particles,f=[];for(c=0,d=e.length;c<d;c++)a=e[c],b=a.behaviours[1].target,b.x=a.destX+(this.sketch.width/2-this.X_OFFSET),b.y=a.destY+(this.sketch.height/2-this.Y_OFFSET),f.push(a.moveTo(b));return f},a.prototype.createSketch=function(){var a;return this.sketch=Sketch.create({container:document.getElementById("dhaakon-sketch-container")}),console.log(this.sketch.element),this.sketch.mousemove=this.onmousemove,this.sketch.draw=this.draw,this.timeline=new TimelineMax({align:"start",onComplete:this.onTimelineComplete,stagger:3.5,ease:SlowMo.ease}),this.timeline.timeScale(1.4),EventManager.addListener(Events.WINDOW_RESIZE,this.onresize),this.currentIndex+1<this.max_index?a=this.currentIndex+1:a=0,this.changeImage(a)},a.prototype.tweenIn=function(){var a,b,c,d,e,f,g,h,i,j=this;h=this.engine.particles;for(e=0,f=h.length;e<f;e++)b=h[e],a=function(a){return a.moveTo(a.pos)},g=function(b){return a(b)},c=Math.random()*0,d=Math.random()*0,i=b.mass/b.radius/10,this.timeline.insert(TweenLite.to(b.pos,i,{x:b.behaviours[1].target.x-c,y:b.behaviours[1].target.y-d,delay:Math.random(),onUpdate:g,onUpdateParams:[b]}));return this.timeline.play()},a.prototype.createParticles=function(a){var b,c,d,e,f,g,h,i,j,k,l;this.engine=new Physics,this.engine.integrator=new Verlet,b=0;for(h=0,j=a.length;h<j;h++){d=a[h],l=d.pathData;for(i=0,k=l.length;i<k;i++)e=l[i],c=new Particle(max(this.min_mass,random(this.max_mass))),f=new Vector(random(this.sketch.width),random(this.sketch.height)),this.count++,c.endRadius=random(8),c.setRadius=0,c.moveTo(f),c.destX=e.x,c.destY=e.y,g=new Attraction,g.target.x=e.x+(this.sketch.width/2-this.X_OFFSET),g.target.y=e.y+(this.sketch.height/2-this.Y_OFFSET),g.strength=Math.max(5e3*Math.random(),3e3),c.behaviours.push(this.avoidMouse,g),this.engine.particles.push(c)}return this.avoidMouse.setRadius(100),this.avoidMouse.strength=-this.AVOID_MOUSE_STRENGTH,this.tweenIn()},a.prototype.timerCallback=function(){var a=this;return this.destroySketch(function(){return a.createSketch()})},a.prototype.draw=function(){this.isPhysicsRunning&&this.engine.step(),this.counter<this.max_count?this.counter++:(this.counter=0,this.timerCallback()),this.avoidMouse.strength=-this.AVOID_MOUSE_STRENGTH;if(this.isDrawingParticles)return this.drawParticles()},a.prototype.drawParticles=function(){var a,b,c,d,e,f;d=this.engine.particles,e=[];for(b=0,c=d.length;b<c;b++)a=d[b],this.destroy?a.radius>0&&(a.radius-=this.DESTROY_SIZE):a.radius<a.endRadius&&(a.radius+=this.DESTROY_SIZE),a.radius>0?(this.destroy?f="stroke":f="fill",e.push(this.drawCircle(a.pos.x,a.pos.y,a.radius,"fill"))):e.push(void 0);return e},a.prototype.drawCircle=function(a,b,c,d){return this.sketch.beginPath(),this.sketch.arc(a,b,c,0,Math.PI*2),this.sketch[d]()},a.prototype.onmousemove=function(){return this.avoidMouse.target.x=this.sketch.mouse.x,this.avoidMouse.target.y=this.sketch.mouse.y},a.prototype.getSketch=function(){return this.sketch},a}(),Utils={vendors:["webkit","ms","Moz","o"],transform:function(a,b){var c,d,e,f,g;f=this.vendors,g=[];for(d=0,e=f.length;d<e;d++)c=f[d],g.push(a.style[c+"Transform"]=b);return g},addCSSEventListener:function(a,b,c){var d,e,f,g,h,i=this;g=this.vendors,h=[];for(e=0,f=g.length;e<f;e++)d=g[e],h.push(a.addEventListener(d+"TransitionEnd",function(a){if(a.propertyName===b)return c(a)}));return h},setTransitionDelay:function(a,b){var c,d,e,f,g;f=this.vendors,g=[];for(d=0,e=f.length;d<e;d++)c=f[d],g.push(a.style[c+"TransitionDelay"]=b+"ms");return g},getCSS:function(a,b){return a.style[b]},parseLocation:function(){var a,b;return window.location.hash?b=window.location.hash:b="#"+window.location.href.split("#")[1],a=b,a.split("#")[1]}},About=function(a){function b(){this.onKeyPress=__bind(this.onKeyPress,this),this.onResize=__bind(this.onResize,this),this.onVideoComplete=__bind(this.onVideoComplete,this),this.close=__bind(this.close,this),this.maxIndex=this.videos.length-1,b.__super__.constructor.call(this)}return __extends(b,a),b.prototype.VIDEO_PLAYER_ID="video-player",b.prototype.container=document.getElementById("dhaakon-about-container"),b.prototype.sectionContainer=document.getElementById("about-content-section-container"),b.prototype.videoContaienr=document.getElementById("video-section"),b.prototype.videos=["video/loop.mp4","video/post_slow.mp4"],b.prototype.videoPlayer=null,b.prototype.currentIndex=0,b.prototype.maxIndex=0,b.prototype.close=function(a){var b,c=this;return console.log("closing"),this.removeListeners(),this.videoPlayer.pause(),b=function(){return c.container.style.display="none"},Animations.fade("out",this.container,0,.25,b)},b.prototype.onVideoComplete=function(a){return console.log(this.currentIndex),this.currentIndex<this.maxIndex?this.currentIndex++:this.currentIndex=0,this.videoJS.src(this.videos[this.currentIndex]),this.videoJS.play()},b.prototype.addListeners=function(){return EventManager.addListener(Events.CLOSE_EVENT,this.close),EventManager.addListener(Events.WINDOW_RESIZE,this.onResize),EventManager.addListener(Events.KEYBOARD_EVENT,this.onKeyPress)},b.prototype.removeListeners=function(){return EventManager.removeListener(Events.CLOSE_EVENT,this.close),EventManager.removeListener(Events.WINDOW_RESIZE,this.onResize),EventManager.removeListener(Events.KEYBOARD_EVENT,this.onKeyPress)},b.prototype.start=function(){return this.container.style.display="block",Animations.fade("in",this.container,0,1),this.addListeners(),this.createClose(),this.onResize(),this.videoPlayer?this.videoPlayer.play():this.createVideo()},b.prototype.createVideo=function(){var a,b,c,d=this;return console.log("video"),this.videoPlayer=document.createElement("video"),this.videoPlayer.id=this.VIDEO_PLAYER_ID,b=document.createElement("source"),b.type="video/mp4",b.src=this.videos[0],this.container.appendChild(this.videoPlayer),this.videoPlayer.appendChild(b),c={autoplay:!0,loop:!1,controls:!1,width:$(window).width(),height:$(window).height()},a=function(){return setTimeout(function(){return console.log(d.videoJS),d.videoJS.on("ended",d.onVideoComplete)},10),d.onResize()},this.videoJS=videojs(this.VIDEO_PLAYER_ID,c,a)},b.prototype.onResize=function(a){var b,c,d,e,f,g,h,i;c=$(this.container),g=$(this.videoPlayer),h=$(window).height(),i=$(window).width(),c.css("width",i);if(!g[0])return;return e=$(g.parentNode),f=g[0].videoWidth/g[0].videoHeight,d=i/h,b=d/f,e.css("width",i),g.css("width",i),f<d?g.css("-webkit-transform","scaleX("+d/f+")"):g.css("-webkit-transform","scaleY("+f/d+")"),this.sectionContainer.style.marginTop=this.calcYOffset()+"px"},b.prototype.onKeyPress=function(a){switch(a.keyCode){case 27:return this.close(),this.closeClickHandler(a)}},b.prototype.calcYOffset=function(a){var b,c,d,e,f,g;return d=$(this.sectionContainer),b=$(this.container).height(),c=$(window).height(),f=d.height(),g=d.position().top,e=c-f,-(g-e/2)},b}(Module),Work=function(a){function b(){b.__super__.constructor.call(this,this.data,this.wrapper,this.container,this.slideContainer)}return __extends(b,a),b.prototype.wrapper=document.getElementById("dhaakon-work-container"),b.prototype.container=document.getElementById("portfolio-container"),b.prototype.slideContainer=document.getElementById("work-templates"),b.prototype.data=PortfolioData,b}(Slideshow),Experiments=function(a){function b(){b.__super__.constructor.call(this,this.data,this.wrapper,this.container,this.slideContainer)}return __extends(b,a),b.prototype.wrapper=document.getElementById("dhaakon-experiments-container"),b.prototype.container=document.getElementById("experiments-container"),b.prototype.slideContainer=document.getElementById("experiments-work-templates"),b.prototype.data=ExperimentsData,b}(Slideshow),TypePath=function(){function a(){var a,b,c,d,e,f,g,h,i,j,k;this.svg=new SVG("svgElement"),j=this.images;for(d=0,g=j.length;d<g;d++){b=j[d],a=this.svg.group(),e={paths:[],name:b.name,points:[],offset:b.offset},k=b.paths;for(f=0,h=k.length;f<h;f++)c=k[f],i=a.path(),i.attr("d",c),e.paths.push(i);this.imagesData.push(e)}this.getPoints()}return a.prototype.STEP_SIZE=5,a.prototype.ctx=null,a.prototype.lines=[],a.prototype.images=ParticleImages,a.prototype.imagesData=[],a.prototype.paths=[],a.prototype.getPoints=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m;k=this.imagesData,m=[];for(g=0,i=k.length;g<i;g++){a=k[g],l=a.paths;for(h=0,j=l.length;h<j;h++){b=l[h],c={},f=c.totalLength=~~b.node.getTotalLength(),d=[];while(f>0)e=b.node.getPointAtLength(f),d.push(e),f-=this.STEP_SIZE;c.pathData=d,a.points.push(c)}m.push(this.paths.push(a))}return m},a.prototype.getPaths=function(){return this.paths},a}(),EventManager=new EventEmitter,Events={CLOSE_EVENT:"Close Event",SLIDE_EVENT_CLICK:"On Slide Click",WINDOW_RESIZE:"On Window Resize",KEYBOARD_EVENT:"On Key Press"},function(){var a,b;return b=1024,a=768,window.onkeydown=function(a){return EventManager.emitEvent(Events.KEYBOARD_EVENT,[a])},window.onresize=function(a){return EventManager.emitEvent(Events.WINDOW_RESIZE,[a])}}(),Portfolio=function(){function a(){this.onModuleClose=__bind(this.onModuleClose,this),this.onResize=__bind(this.onResize,this),this.navigateToLink=__bind(this.navigateToLink,this);var a,b,c,d;d=this.BODY_BACKGROUND;for(b=0,c=d.length;b<c;b++)a=d[b],document.body.style.background=a;this.setupNavigationLinks(),this.setupTitleBar(),this.setupInfo(),this.sketchContainer.style.height=window.innerHeight-this.heightOffset+"px",this.sketchContainer.style.width=window.innerWidth+"px",Animations.fade("in",this.sketchContainer,.1,.4),this.addListeners()}return a.prototype.MIN_HEIGHT=768,a.prototype.MIN_WIDTH=1024,a.prototype.BODY_BACKGROUND=["radial-gradient(ellipse at center, rgba(175,30,30,1.0) 0%,#0e0e0e 100%)","-moz-radial-gradient(center, ellipse cover, rgba(175,30,30,1.0) 0%, #0e0e0e 100%)","-webkit-gradient(radial, center center, 0px, center center, 100%, color-stop(0%,rgba(175,30,30,1.0)), color-stop(100%,#0e0e0e))","-webkit-radial-gradient(center, ellipse cover,rgba(175,30,30,1.0) 0%,#0e0e0e 100%)"],a.prototype.heading=document.getElementById("dhaakon-heading"),a.prototype.footer=document.querySelectorAll("footer")[0],a.prototype.title=document.getElementById("dhaakon-heading").querySelectorAll("h1")[0],a.prototype.navigationLinks=document.getElementById("dhaakon-title-navigation"),a.prototype.sketchContainer=document.getElementById("dhaakon-sketch-container"),a.prototype.info=document.getElementById("dhaakon-info"),a.prototype.heightOffset=80,a.prototype.Modules={work:Work,experiments:Experiments,about:About},a.prototype.activeModules={work:null,experiments:null,about:null},a.prototype.Utils=Utils,a.prototype.physix=null,a.prototype.addListeners=function(){return EventManager.addListener(Events.WINDOW_RESIZE,this.onResize),EventManager.addListener(Events.CLOSE_EVENT,this.onModuleClose)},a.prototype.setupInfo=function(){var a=this;return Animations.fade("in",this.info,.4,.1),this.info.onclick=function(){return Animations.fade("out",a.info,0,.1)}},a.prototype.setupTitleBar=function(){return Animations.fade("in",this.title,.4,.1),this.heading.style.top="0px",this.footer.style.bottom="0px"},a.prototype.setupNavigationLinks=function(){return Animations.fade("in",this.navigationLinks,.8,.3),this.addNavigationListeners()},a.prototype.addNavigationListeners=function(){var a;return this.navigationLinks.onclick=this.navigateToLink,a={target:{href:window.location.href}},this.navigateToLink(a)},a.prototype.navigateToLink=function(a){var b,c,d=this;if(a.target.href==null)return;c=a.target.href.split("#")[1];if(c==null)return;if(c==="main"){this.physix||(this.typePath=new TypePath(document.getElementById("svgElement")),this.physix=new PhysicsDemo(this.typePath.getPaths()));return}return this.navigationLinks.onclick=null,this.physix!=null&&this.physix.destroySketch(),this.createModule(c),b=function(){return d.navigationLinks.style.display="none"},Animations.fade("out",this.navigationLinks,0,.2,b)},a.prototype.createModule=function(a){var b;return this.activeModules[a]?b=this.activeModules[a]:(b=new this.Modules[a](a),this.activeModules[a]=b),b.start()},a.prototype.restartPhysix=function(){return this.physix.createSketch()},a.prototype.onResize=function(a){return this.sketchContainer.style.height=window.innerHeight-this.heightOffset+"px",this.sketchContainer.style.width=window.innerWidth+"px"},a.prototype.onModuleClose=function(a){return this.physix!=null&&this.restartPhysix(),this.navigationLinks.style.display="block",this.addNavigationListeners(),console.log("module close"),Animations.fade("in",this.navigationLinks,.2,.2)},a}(),window.onload=function(){return new Portfolio}